(()=>{var e,t,n={45137:(e,t,n)=>{"use strict";n.d(t,{B:()=>o,BK:()=>Le,Bj:()=>a,EB:()=>u,Fl:()=>Te,IU:()=>ke,Jd:()=>v,PG:()=>we,Um:()=>pe,WL:()=>Pe,X3:()=>_e,XI:()=>Ie,Xl:()=>xe,dq:()=>Me,iH:()=>De,j:()=>M,lk:()=>b,nZ:()=>c,qj:()=>me,qq:()=>d,yT:()=>be});var r=n(59908);
/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let s,i;class a{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=s,!e&&s&&(this.index=(s.scopes||(s.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=s;try{return s=this,e()}finally{s=t}}else 0}on(){s=this}off(){s=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function o(e){return new a(e)}function l(e,t=s){t&&t.active&&t.effects.push(e)}function c(){return s}function u(e){s&&s.cleanups.push(e)}class d{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,l(this,r)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,v();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(h(t.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),b()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=g,t=i;try{return g=!0,i=this,this._runnings++,f(this),this.fn()}finally{m(this),this._runnings--,i=t,g=e}}stop(){this.active&&(f(this),m(this),this.onStop&&this.onStop(),this.active=!1)}}function h(e){return e.value}function f(e){e._trackId++,e._depsLength=0}function m(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)p(e.deps[t],e);e.deps.length=e._depsLength}}function p(e,t){const n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}let g=!0,y=0;const w=[];function v(){w.push(g),g=!1}function b(){const e=w.pop();g=void 0===e||e}function _(){y++}function k(){for(y--;!y&&A.length;)A.shift()()}function x(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&p(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const A=[];function S(e,t,n){_();for(const n of e.keys()){let r;n._dirtyLevel<t&&(null!=r?r:r=e.get(n)===n._trackId)&&(n._shouldSchedule||(n._shouldSchedule=0===n._dirtyLevel),n._dirtyLevel=t),n._shouldSchedule&&(null!=r?r:r=e.get(n)===n._trackId)&&(n.trigger(),n._runnings&&!n.allowRecurse||2===n._dirtyLevel||(n._shouldSchedule=!1,n.scheduler&&A.push(n.scheduler)))}k()}const O=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},T=new WeakMap,E=Symbol(""),C=Symbol("");function M(e,t,n){if(g&&i){let t=T.get(e);t||T.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=O((()=>t.delete(n)))),x(i,r)}}function D(e,t,n,s,i,a){const o=T.get(e);if(!o)return;let l=[];if("clear"===t)l=[...o.values()];else if("length"===n&&(0,r.isArray)(e)){const e=Number(s);o.forEach(((t,n)=>{("length"===n||!(0,r.isSymbol)(n)&&n>=e)&&l.push(t)}))}else switch(void 0!==n&&l.push(o.get(n)),t){case"add":(0,r.isArray)(e)?(0,r.isIntegerKey)(n)&&l.push(o.get("length")):(l.push(o.get(E)),(0,r.isMap)(e)&&l.push(o.get(C)));break;case"delete":(0,r.isArray)(e)||(l.push(o.get(E)),(0,r.isMap)(e)&&l.push(o.get(C)));break;case"set":(0,r.isMap)(e)&&l.push(o.get(E))}_();for(const e of l)e&&S(e,4);k()}const I=(0,r.makeMap)("__proto__,__v_isRef,__isVue"),N=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.isSymbol)),j=$();function $(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ke(this);for(let e=0,t=this.length;e<t;e++)M(n,0,e+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ke)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){v(),_();const n=ke(this)[t].apply(this,e);return k(),b(),n}})),e}function F(e){(0,r.isSymbol)(e)||(e=String(e));const t=ke(this);return M(t,0,e),t.hasOwnProperty(e)}class P{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const s=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!s;if("__v_isReadonly"===t)return s;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(s?i?fe:he:i?de:ue).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=(0,r.isArray)(e);if(!s){if(a&&(0,r.hasOwn)(j,t))return Reflect.get(j,t,n);if("hasOwnProperty"===t)return F}const o=Reflect.get(e,t,n);return((0,r.isSymbol)(t)?N.has(t):I(t))?o:(s||M(e,0,t),i?o:Me(o)?a&&(0,r.isIntegerKey)(t)?o:o.value:(0,r.isObject)(o)?s?ge(o):me(o):o)}}class L extends P{constructor(e=!1){super(!1,e)}set(e,t,n,s){let i=e[t];if(!this._isShallow){const t=ve(i);if(be(n)||ve(n)||(i=ke(i),n=ke(n)),!(0,r.isArray)(e)&&Me(i)&&!Me(n))return!t&&(i.value=n,!0)}const a=(0,r.isArray)(e)&&(0,r.isIntegerKey)(t)?Number(t)<e.length:(0,r.hasOwn)(e,t),o=Reflect.set(e,t,n,s);return e===ke(s)&&(a?(0,r.hasChanged)(n,i)&&D(e,"set",t,n):D(e,"add",t,n)),o}deleteProperty(e,t){const n=(0,r.hasOwn)(e,t),s=(e[t],Reflect.deleteProperty(e,t));return s&&n&&D(e,"delete",t,void 0),s}has(e,t){const n=Reflect.has(e,t);return(0,r.isSymbol)(t)&&N.has(t)||M(e,0,t),n}ownKeys(e){return M(e,0,(0,r.isArray)(e)?"length":E),Reflect.ownKeys(e)}}class R extends P{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const W=new L,V=new R,B=new L(!0),U=e=>e,q=e=>Reflect.getPrototypeOf(e);function z(e,t,n=!1,s=!1){const i=ke(e=e.__v_raw),a=ke(t);n||((0,r.hasChanged)(t,a)&&M(i,0,t),M(i,0,a));const{has:o}=q(i),l=s?U:n?Se:Ae;return o.call(i,t)?l(e.get(t)):o.call(i,a)?l(e.get(a)):void(e!==i&&e.get(t))}function K(e,t=!1){const n=this.__v_raw,s=ke(n),i=ke(e);return t||((0,r.hasChanged)(e,i)&&M(s,0,e),M(s,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function Z(e,t=!1){return e=e.__v_raw,!t&&M(ke(e),0,E),Reflect.get(e,"size",e)}function H(e,t=!1){t||be(e)||ve(e)||(e=ke(e));const n=ke(this);return q(n).has.call(n,e)||(n.add(e),D(n,"add",e,e)),this}function Y(e,t,n=!1){n||be(t)||ve(t)||(t=ke(t));const s=ke(this),{has:i,get:a}=q(s);let o=i.call(s,e);o||(e=ke(e),o=i.call(s,e));const l=a.call(s,e);return s.set(e,t),o?(0,r.hasChanged)(t,l)&&D(s,"set",e,t):D(s,"add",e,t),this}function J(e){const t=ke(this),{has:n,get:r}=q(t);let s=n.call(t,e);s||(e=ke(e),s=n.call(t,e));r&&r.call(t,e);const i=t.delete(e);return s&&D(t,"delete",e,void 0),i}function G(){const e=ke(this),t=0!==e.size,n=e.clear();return t&&D(e,"clear",void 0,void 0),n}function X(e,t){return function(n,r){const s=this,i=s.__v_raw,a=ke(i),o=t?U:e?Se:Ae;return!e&&M(a,0,E),i.forEach(((e,t)=>n.call(r,o(e),o(t),s)))}}function Q(e,t,n){return function(...s){const i=this.__v_raw,a=ke(i),o=(0,r.isMap)(a),l="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,u=i[e](...s),d=n?U:t?Se:Ae;return!t&&M(a,0,c?C:E),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ee(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function te(){const e={get(e){return z(this,e)},get size(){return Z(this)},has:K,add:H,set:Y,delete:J,clear:G,forEach:X(!1,!1)},t={get(e){return z(this,e,!1,!0)},get size(){return Z(this)},has:K,add(e){return H.call(this,e,!0)},set(e,t){return Y.call(this,e,t,!0)},delete:J,clear:G,forEach:X(!1,!0)},n={get(e){return z(this,e,!0)},get size(){return Z(this,!0)},has(e){return K.call(this,e,!0)},add:ee("add"),set:ee("set"),delete:ee("delete"),clear:ee("clear"),forEach:X(!0,!1)},r={get(e){return z(this,e,!0,!0)},get size(){return Z(this,!0)},has(e){return K.call(this,e,!0)},add:ee("add"),set:ee("set"),delete:ee("delete"),clear:ee("clear"),forEach:X(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((s=>{e[s]=Q(s,!1,!1),n[s]=Q(s,!0,!1),t[s]=Q(s,!1,!0),r[s]=Q(s,!0,!0)})),[e,n,t,r]}const[ne,re,se,ie]=te();function ae(e,t){const n=t?e?ie:se:e?re:ne;return(t,s,i)=>"__v_isReactive"===s?!e:"__v_isReadonly"===s?e:"__v_raw"===s?t:Reflect.get((0,r.hasOwn)(n,s)&&s in t?n:t,s,i)}const oe={get:ae(!1,!1)},le={get:ae(!1,!0)},ce={get:ae(!0,!1)};const ue=new WeakMap,de=new WeakMap,he=new WeakMap,fe=new WeakMap;function me(e){return ve(e)?e:ye(e,!1,W,oe,ue)}function pe(e){return ye(e,!1,B,le,de)}function ge(e){return ye(e,!0,V,ce,he)}function ye(e,t,n,s,i){if(!(0,r.isObject)(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const o=(l=e).__v_skip||!Object.isExtensible(l)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((0,r.toRawType)(l));var l;if(0===o)return e;const c=new Proxy(e,2===o?s:n);return i.set(e,c),c}function we(e){return ve(e)?we(e.__v_raw):!(!e||!e.__v_isReactive)}function ve(e){return!(!e||!e.__v_isReadonly)}function be(e){return!(!e||!e.__v_isShallow)}function _e(e){return!!e&&!!e.__v_raw}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function xe(e){return Object.isExtensible(e)&&(0,r.def)(e,"__v_skip",!0),e}const Ae=e=>(0,r.isObject)(e)?me(e):e,Se=e=>(0,r.isObject)(e)?ge(e):e;class Oe{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new d((()=>e(this._value)),(()=>Ce(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=ke(this);return e._cacheable&&!e.effect.dirty||!(0,r.hasChanged)(e._value,e._value=e.effect.run())||Ce(e,4),Ee(e),e.effect._dirtyLevel>=2&&Ce(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Te(e,t,n=!1){let s,i;const a=(0,r.isFunction)(e);a?(s=e,i=r.NOOP):(s=e.get,i=e.set);return new Oe(s,i,a||!i,n)}function Ee(e){var t;g&&i&&(e=ke(e),x(i,null!=(t=e.dep)?t:e.dep=O((()=>e.dep=void 0),e instanceof Oe?e:void 0)))}function Ce(e,t=4,n,r){const s=(e=ke(e)).dep;s&&S(s,t)}function Me(e){return!(!e||!0!==e.__v_isRef)}function De(e){return Ne(e,!1)}function Ie(e){return Ne(e,!0)}function Ne(e,t){return Me(e)?e:new je(e,t)}class je{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ke(e),this._value=t?e:Ae(e)}get value(){return Ee(this),this._value}set value(e){const t=this.__v_isShallow||be(e)||ve(e);if(e=t?e:ke(e),(0,r.hasChanged)(e,this._rawValue)){this._rawValue;this._rawValue=e,this._value=t?e:Ae(e),Ce(this,4)}}}function $e(e){return Me(e)?e.value:e}const Fe={get:(e,t,n)=>$e(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Me(s)&&!Me(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Pe(e){return we(e)?e:new Proxy(e,Fe)}function Le(e){const t=(0,r.isArray)(e)?new Array(e.length):{};for(const n in e)t[n]=We(e,n);return t}class Re{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=T.get(e);return n&&n.get(t)}(ke(this._object),this._key)}}function We(e,t,n){const r=e[t];return Me(r)?r:new Re(e,t,n)}},14011:(e,t,n)=>{"use strict";n.d(t,{Ah:()=>R,EM:()=>q,FN:()=>be,Fl:()=>Te,HY:()=>re,Wm:()=>fe,Y3:()=>y,YP:()=>X,aZ:()=>C,bv:()=>F,f3:()=>U,h:()=>Ee,xv:()=>se});var r=n(45137),s=n(59908);function i(e,t,n,r){try{return r?e(...r):e()}catch(e){o(e,t,n)}}function a(e,t,n,r){if((0,s.isFunction)(e)){const a=i(e,t,n,r);return a&&(0,s.isPromise)(a)&&a.catch((e=>{o(e,t,n)})),a}if((0,s.isArray)(e)){const s=[];for(let i=0;i<e.length;i++)s.push(a(e[i],t,n,r));return s}}function o(e,t,n,s=!0){t&&t.vnode;if(t){let s=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const t=s.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,a,o))return;s=s.parent}const l=t.appContext.config.errorHandler;if(l)return(0,r.Jd)(),i(l,null,10,[e,a,o]),void(0,r.lk)()}!function(e,t,n,r=!0){console.error(e)}(e,0,0,s)}let l=!1,c=!1;const u=[];let d=0;const h=[];let f=null,m=0;const p=Promise.resolve();let g=null;function y(e){const t=g||p;return e?t.then(this?e.bind(this):e):t}function w(e){u.length&&u.includes(e,l&&e.allowRecurse?d+1:d)||(null==e.id?u.push(e):u.splice(function(e){let t=d+1,n=u.length;for(;t<n;){const r=t+n>>>1,s=u[r],i=k(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}(e.id),0,e),v())}function v(){l||c||(c=!0,g=p.then(A))}function b(e){(0,s.isArray)(e)?h.push(...e):f&&f.includes(e,e.allowRecurse?m+1:m)||h.push(e),v()}function _(e){if(h.length){const e=[...new Set(h)].sort(((e,t)=>k(e)-k(t)));if(h.length=0,f)return void f.push(...e);for(f=e,m=0;m<f.length;m++){const e=f[m];0,!1!==e.active&&e()}f=null,m=0}}const k=e=>null==e.id?1/0:e.id,x=(e,t)=>{const n=k(e)-k(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function A(e){c=!1,l=!0,u.sort(x);s.NOOP;try{for(d=0;d<u.length;d++){const e=u[d];e&&!1!==e.active&&i(e,e.i,e.i?15:14)}}finally{d=0,u.length=0,_(),l=!1,g=null,(u.length||h.length)&&A(e)}}let S=null,O=null;Symbol("_leaveCb"),Symbol("_enterCb");const T=[Function,Array];Boolean,Boolean;function E(e,t){6&e.shapeFlag&&e.component?E(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}
/*! #__NO_SIDE_EFFECTS__ */
function C(e,t){return(0,s.isFunction)(e)?(()=>(0,s.extend)({name:e.name},t,{setup:e}))():e}const M=e=>!!e.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;RegExp,RegExp;function D(e,t){return(0,s.isArray)(e)?e.some((e=>D(e,t))):(0,s.isString)(e)?e.split(",").includes(t):!!(0,s.isRegExp)(e)&&e.test(t)}function I(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function N(e){return 128&e.shapeFlag?e.ssContent:e}function j(e,t,n=ve,s=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{(0,r.Jd)();const i=xe(n),o=a(t,n,e,s);return i(),(0,r.lk)(),o});return s?i.unshift(o):i.push(o),o}}const $=e=>(t,n=ve)=>{Ae&&"sp"!==e||j(e,((...e)=>t(...e)),n)},F=($("bm"),$("m")),P=($("bu"),$("u")),L=$("bum"),R=$("um");$("sp"),$("rtg"),$("rtc");const W=Symbol.for("v-ndc");function V(){return{app:null,config:{isNativeTag:s.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let B=null;function U(e,t,n=!1){const r=ve||S;if(r||B){const i=B?B._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&(0,s.isFunction)(t)?t.call(r&&r.proxy):t}else 0}function q(){return!!(ve||S||B)}const z={},K=e=>Object.getPrototypeOf(e)===z;Symbol("_vte");const Z=ne;function H(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const Y=Symbol.for("v-scx"),J=()=>{{const e=U(Y);return e}};const G={};function X(e,t,n){return Q(e,t,n)}function Q(e,t,{immediate:n,deep:o,flush:l,once:c,onTrack:u,onTrigger:d}=s.EMPTY_OBJ){if(t&&c){const e=t;t=(...t)=>{e(...t),O()}}const h=ve,f=e=>!0===o?e:ee(e,!1===o?1:void 0);let m,p,g=!1,y=!1;if((0,r.dq)(e)?(m=()=>e.value,g=(0,r.yT)(e)):(0,r.PG)(e)?(m=()=>f(e),g=!0):(0,s.isArray)(e)?(y=!0,g=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),m=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?f(e):(0,s.isFunction)(e)?i(e,h,2):void 0))):m=(0,s.isFunction)(e)?t?()=>i(e,h,2):()=>(p&&p(),a(e,h,3,[b])):s.NOOP,t&&o){const e=m;m=()=>ee(e())}let v,b=e=>{p=A.onStop=()=>{i(e,h,4),p=A.onStop=void 0}};if(Ae){if(b=s.NOOP,t?n&&a(t,h,3,[m(),y?[]:void 0,b]):m(),"sync"!==l)return s.NOOP;{const e=J();v=e.__watcherHandles||(e.__watcherHandles=[])}}let _=y?new Array(e.length).fill(G):G;const k=()=>{if(A.active&&A.dirty)if(t){const e=A.run();(o||g||(y?e.some(((e,t)=>(0,s.hasChanged)(e,_[t]))):(0,s.hasChanged)(e,_)))&&(p&&p(),a(t,h,3,[e,_===G?void 0:y&&_[0]===G?[]:_,b]),_=e)}else A.run()};let x;k.allowRecurse=!!t,"sync"===l?x=k:"post"===l?x=()=>Z(k,h&&h.suspense):(k.pre=!0,h&&(k.id=h.uid),x=()=>w(k));const A=new r.qq(m,s.NOOP,x),S=(0,r.nZ)(),O=()=>{A.stop(),S&&(0,s.remove)(S.effects,A)};return t?n?k():_=A.run():"post"===l?Z(A.run.bind(A),h&&h.suspense):A.run(),v&&v.push(O),O}function ee(e,t=1/0,n){if(t<=0||!(0,s.isObject)(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,(0,r.dq)(e))ee(e.value,t,n);else if((0,s.isArray)(e))for(let r=0;r<e.length;r++)ee(e[r],t,n);else if((0,s.isSet)(e)||(0,s.isMap)(e))e.forEach((e=>{ee(e,t,n)}));else if((0,s.isPlainObject)(e)){for(const r in e)ee(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ee(e[r],t,n)}return e}const te=e=>e.__isSuspense;function ne(e,t){t&&t.pendingBranch?(0,s.isArray)(e)?t.effects.push(...e):t.effects.push(e):b(e)}const re=Symbol.for("v-fgt"),se=Symbol.for("v-txt"),ie=Symbol.for("v-cmt");Symbol.for("v-stc");let ae=null;let oe=1;function le(e){return!!e&&!0===e.__v_isVNode}function ce(e,t){return e.type===t.type&&e.key===t.key}const ue=({key:e})=>null!=e?e:null,de=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?(0,s.isString)(e)||(0,r.dq)(e)||(0,s.isFunction)(e)?{i:S,r:e,k:t,f:!!n}:e:null);function he(e,t=null,n=null,r=0,i=null,a=(e===re?0:1),o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ue(t),ref:t&&de(t),scopeId:O,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:S};return l?(ye(c,n),128&a&&e.normalize(c)):n&&(c.shapeFlag|=(0,s.isString)(n)?8:16),oe>0&&!o&&ae&&(c.patchFlag>0||6&a)&&32!==c.patchFlag&&ae.push(c),c}const fe=me;function me(e,t=null,n=null,i=0,a=null,o=!1){if(e&&e!==W||(e=ie),le(e)){const r=pe(e,t,!0);return n&&ye(r,n),oe>0&&!o&&ae&&(6&r.shapeFlag?ae[ae.indexOf(e)]=r:ae.push(r)),r.patchFlag=-2,r}if(Oe(e)&&(e=e.__vccOpts),t){t=function(e){return e?(0,r.X3)(e)||K(e)?(0,s.extend)({},e):e:null}(t);let{class:e,style:n}=t;e&&!(0,s.isString)(e)&&(t.class=(0,s.normalizeClass)(e)),(0,s.isObject)(n)&&((0,r.X3)(n)&&!(0,s.isArray)(n)&&(n=(0,s.extend)({},n)),t.style=(0,s.normalizeStyle)(n))}return he(e,t,n,i,a,(0,s.isString)(e)?1:te(e)?128:(e=>e.__isTeleport)(e)?64:(0,s.isObject)(e)?4:(0,s.isFunction)(e)?2:0,o,!0)}function pe(e,t,n=!1,r=!1){const{props:i,ref:a,patchFlag:o,children:l,transition:c}=e,u=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,s.normalizeClass)([t.class,r.class]));else if("style"===e)t.style=(0,s.normalizeStyle)([t.style,r.style]);else if((0,s.isOn)(e)){const n=t[e],i=r[e];!i||n===i||(0,s.isArray)(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ue(u),ref:t&&t.ref?n&&a?(0,s.isArray)(a)?a.concat(de(t)):[a,de(t)]:de(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pe(e.ssContent),ssFallback:e.ssFallback&&pe(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&E(d,c.clone(d)),d}function ge(e=" ",t=0){return fe(se,null,e,t)}function ye(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,s.isArray)(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),ye(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||K(t)?3===r&&S&&(1===S.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=S}}else(0,s.isFunction)(t)?(t={default:t,_ctx:S},n=32):(t=String(t),64&r?(n=16,t=[ge(t)]):n=8);e.children=t,e.shapeFlag|=n}function we(e,t,n,r=null){a(e,t,7,[n,r])}V();let ve=null;const be=()=>ve||S;let _e,ke;{const e=(0,s.getGlobalThis)(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};_e=t("__VUE_INSTANCE_SETTERS__",(e=>ve=e)),ke=t("__VUE_SSR_SETTERS__",(e=>Ae=e))}const xe=e=>{const t=ve;return _e(e),e.scope.on(),()=>{e.scope.off(),_e(t)}};let Ae=!1;function Se(e,t=!0){return(0,s.isFunction)(e)?e.displayName||e.name:e.name||t&&e.__name}function Oe(e){return(0,s.isFunction)(e)&&"__vccOpts"in e}const Te=(e,t)=>(0,r.Fl)(e,t,Ae);function Ee(e,t,n){const r=arguments.length;return 2===r?(0,s.isObject)(t)&&!(0,s.isArray)(t)?le(t)?fe(e,null,[t]):fe(e,t):fe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&le(n)&&(n=[n]),fe(e,t,n))}},59908:(e,t,n)=>{"use strict";
/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function r(e,t){const n=new Set(e.split(","));return t?e=>n.has(e.toLowerCase()):e=>n.has(e)}n.d(t,{EMPTY_ARR:()=>i,EMPTY_OBJ:()=>s,NO:()=>o,NOOP:()=>a,camelize:()=>D,def:()=>L,extend:()=>u,getGlobalThis:()=>B,hasChanged:()=>F,hasOwn:()=>f,hyphenate:()=>N,invokeArrayFns:()=>P,isArray:()=>m,isFunction:()=>w,isGloballyAllowed:()=>U,isIntegerKey:()=>T,isMap:()=>p,isModelListener:()=>c,isObject:()=>_,isOn:()=>l,isPlainObject:()=>O,isPromise:()=>k,isRegExp:()=>y,isReservedProp:()=>E,isSet:()=>g,isString:()=>v,isSymbol:()=>b,looseToNumber:()=>R,makeMap:()=>r,normalizeClass:()=>Y,normalizeStyle:()=>q,remove:()=>d,toHandlerKey:()=>$,toNumber:()=>W,toRawType:()=>S});const s={},i=[],a=()=>{},o=()=>!1,l=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith("onUpdate:"),u=Object.assign,d=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,f=(e,t)=>h.call(e,t),m=Array.isArray,p=e=>"[object Map]"===A(e),g=e=>"[object Set]"===A(e),y=e=>"[object RegExp]"===A(e),w=e=>"function"==typeof e,v=e=>"string"==typeof e,b=e=>"symbol"==typeof e,_=e=>null!==e&&"object"==typeof e,k=e=>(_(e)||w(e))&&w(e.then)&&w(e.catch),x=Object.prototype.toString,A=e=>x.call(e),S=e=>A(e).slice(8,-1),O=e=>"[object Object]"===A(e),T=e=>v(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,E=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),C=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},M=/-(\w)/g,D=C((e=>e.replace(M,((e,t)=>t?t.toUpperCase():"")))),I=/\B([A-Z])/g,N=C((e=>e.replace(I,"-$1").toLowerCase())),j=C((e=>e.charAt(0).toUpperCase()+e.slice(1))),$=C((e=>e?`on${j(e)}`:"")),F=(e,t)=>!Object.is(e,t),P=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},L=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},R=e=>{const t=parseFloat(e);return isNaN(t)?e:t},W=e=>{const t=v(e)?Number(e):NaN;return isNaN(t)?e:t};let V;const B=()=>V||(V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});const U=r("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error");function q(e){if(m(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=v(r)?H(r):q(r);if(s)for(const e in s)t[e]=s[e]}return t}if(v(e)||_(e))return e}const z=/;(?![^(]*\))/g,K=/:([^]+)/,Z=/\/\*[^]*?\*\//g;function H(e){const t={};return e.replace(Z,"").split(z).forEach((e=>{if(e){const n=e.split(K);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function Y(e){let t="";if(v(e))t=e;else if(m(e))for(let n=0;n<e.length;n++){const r=Y(e[n]);r&&(t+=r+" ")}else if(_(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}},63653:(e,t,n)=>{"use strict";var r=n(6887);function s(e,t){var n={zone:t};if(e?e instanceof s?this._date=e._date:e instanceof Date?this._date=r.DateTime.fromJSDate(e,n):"number"==typeof e?this._date=r.DateTime.fromMillis(e,n):"string"==typeof e&&(this._date=r.DateTime.fromISO(e,n),this._date.isValid||(this._date=r.DateTime.fromRFC2822(e,n)),this._date.isValid||(this._date=r.DateTime.fromSQL(e,n)),this._date.isValid||(this._date=r.DateTime.fromFormat(e,"EEE, d MMM yyyy HH:mm:ss",n))):this._date=r.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(e));t&&t!==this._date.zoneName&&(this._date=this._date.setZone(t))}s.prototype.addYear=function(){this._date=this._date.plus({years:1})},s.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},s.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},s.prototype.addHour=function(){var e=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=e&&(this._date=this._date.plus({hours:1}))},s.prototype.addMinute=function(){var e=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<e&&(this._date=this._date.plus({hours:1}))},s.prototype.addSecond=function(){var e=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<e&&(this._date=this._date.plus({hours:1}))},s.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},s.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},s.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},s.prototype.subtractHour=function(){var e=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=e&&(this._date=this._date.minus({hours:1}))},s.prototype.subtractMinute=function(){var e=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},s.prototype.subtractSecond=function(){var e=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},s.prototype.getDate=function(){return this._date.day},s.prototype.getFullYear=function(){return this._date.year},s.prototype.getDay=function(){var e=this._date.weekday;return 7==e?0:e},s.prototype.getMonth=function(){return this._date.month-1},s.prototype.getHours=function(){return this._date.hour},s.prototype.getMinutes=function(){return this._date.minute},s.prototype.getSeconds=function(){return this._date.second},s.prototype.getMilliseconds=function(){return this._date.millisecond},s.prototype.getTime=function(){return this._date.valueOf()},s.prototype.getUTCDate=function(){return this._getUTC().day},s.prototype.getUTCFullYear=function(){return this._getUTC().year},s.prototype.getUTCDay=function(){var e=this._getUTC().weekday;return 7==e?0:e},s.prototype.getUTCMonth=function(){return this._getUTC().month-1},s.prototype.getUTCHours=function(){return this._getUTC().hour},s.prototype.getUTCMinutes=function(){return this._getUTC().minute},s.prototype.getUTCSeconds=function(){return this._getUTC().second},s.prototype.toISOString=function(){return this._date.toUTC().toISO()},s.prototype.toJSON=function(){return this._date.toJSON()},s.prototype.setDate=function(e){this._date=this._date.set({day:e})},s.prototype.setFullYear=function(e){this._date=this._date.set({year:e})},s.prototype.setDay=function(e){this._date=this._date.set({weekday:e})},s.prototype.setMonth=function(e){this._date=this._date.set({month:e+1})},s.prototype.setHours=function(e){this._date=this._date.set({hour:e})},s.prototype.setMinutes=function(e){this._date=this._date.set({minute:e})},s.prototype.setSeconds=function(e){this._date=this._date.set({second:e})},s.prototype.setMilliseconds=function(e){this._date=this._date.set({millisecond:e})},s.prototype._getUTC=function(){return this._date.toUTC()},s.prototype.toString=function(){return this.toDate().toString()},s.prototype.toDate=function(){return this._date.toJSDate()},s.prototype.isLastDayOfMonth=function(){var e=this._date.plus({days:1}).startOf("day");return this._date.month!==e.month},s.prototype.isLastWeekdayOfMonth=function(){var e=this._date.plus({days:7}).startOf("day");return this._date.month!==e.month},e.exports=s},35251:(e,t,n)=>{"use strict";var r=n(63653),s=n(16450);function i(e,t){this._options=t,this._utc=t.utc||!1,this._tz=this._utc?"UTC":t.tz,this._currentDate=new r(t.currentDate,this._tz),this._startDate=t.startDate?new r(t.startDate,this._tz):null,this._endDate=t.endDate?new r(t.endDate,this._tz):null,this._isIterator=t.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=t.nthDayOfWeek||0,this.fields=i._freezeFields(e)}i.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],i.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},i.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],i.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],i.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},i.parseDefaults=["0","*","*","*","*","*"],i.standardValidCharacters=/^[,*\d/-]+$/,i.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/,i.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/,i.validCharacters={second:i.standardValidCharacters,minute:i.standardValidCharacters,hour:i.standardValidCharacters,dayOfMonth:i.dayOfMonthValidCharacters,month:i.standardValidCharacters,dayOfWeek:i.dayOfWeekValidCharacters},i._isValidConstraintChar=function(e,t){return"string"==typeof t&&e.chars.some((function(e){return t.indexOf(e)>-1}))},i._parseField=function(e,t,n){switch(e){case"month":case"dayOfWeek":var r=i.aliases[e];t=t.replace(/[a-z]{3}/gi,(function(e){if(e=e.toLowerCase(),void 0!==r[e])return r[e];throw new Error('Validation error, cannot resolve alias "'+e+'"')}))}if(!i.validCharacters[e].test(t))throw new Error("Invalid characters, got value: "+t);function s(e){var t=e.split("/");if(t.length>2)throw new Error("Invalid repeat: "+e);return t.length>1?(t[0]==+t[0]&&(t=[t[0]+"-"+n.max,t[1]]),a(t[0],t[t.length-1])):a(e,1)}function a(t,r){var s=[],i=t.split("-");if(i.length>1){if(i.length<2)return+t;if(!i[0].length){if(!i[1].length)throw new Error("Invalid range: "+t);return+t}var a=+i[0],o=+i[1];if(Number.isNaN(a)||Number.isNaN(o)||a<n.min||o>n.max)throw new Error("Constraint error, got range "+a+"-"+o+" expected range "+n.min+"-"+n.max);if(a>o)throw new Error("Invalid range: "+t);var l=+r;if(Number.isNaN(l)||l<=0)throw new Error("Constraint error, cannot repeat at every "+l+" time.");"dayOfWeek"===e&&o%7==0&&s.push(0);for(var c=a,u=o;c<=u;c++){!(-1!==s.indexOf(c))&&l>0&&l%r==0?(l=1,s.push(c)):l++}return s}return Number.isNaN(+t)?t:+t}return-1!==t.indexOf("*")?t=t.replace(/\*/g,n.min+"-"+n.max):-1!==t.indexOf("?")&&(t=t.replace(/\?/g,n.min+"-"+n.max)),function(t){var r=[];function a(t){if(t instanceof Array)for(var s=0,a=t.length;s<a;s++){var o=t[s];if(i._isValidConstraintChar(n,o))r.push(o);else{if("number"!=typeof o||Number.isNaN(o)||o<n.min||o>n.max)throw new Error("Constraint error, got value "+o+" expected range "+n.min+"-"+n.max);r.push(o)}}else{if(i._isValidConstraintChar(n,t))return void r.push(t);var l=+t;if(Number.isNaN(l)||l<n.min||l>n.max)throw new Error("Constraint error, got value "+t+" expected range "+n.min+"-"+n.max);"dayOfWeek"===e&&(l%=7),r.push(l)}}var o=t.split(",");if(!o.every((function(e){return e.length>0})))throw new Error("Invalid list value format");if(o.length>1)for(var l=0,c=o.length;l<c;l++)a(s(o[l]));else a(s(t));return r.sort(i._sortCompareFn),r}(t)},i._sortCompareFn=function(e,t){var n="number"==typeof e,r="number"==typeof t;return n&&r?e-t:!n&&r?1:n&&!r?-1:e.localeCompare(t)},i._handleMaxDaysInMonth=function(e){if(1===e.month.length){var t=i.daysInMonth[e.month[0]-1];if(e.dayOfMonth[0]>t)throw new Error("Invalid explicit day of month definition");return e.dayOfMonth.filter((function(e){return"L"===e||e<=t})).sort(i._sortCompareFn)}},i._freezeFields=function(e){for(var t=0,n=i.map.length;t<n;++t){var r=i.map[t],s=e[r];e[r]=Object.freeze(s)}return Object.freeze(e)},i.prototype._applyTimezoneShift=function(e,t,n){if("Month"===n||"Day"===n){var r=e.getTime();e[t+n](),r===e.getTime()&&(0===e.getMinutes()&&0===e.getSeconds()?e.addHour():59===e.getMinutes()&&59===e.getSeconds()&&e.subtractHour())}else{var s=e.getHours();e[t+n]();var i=e.getHours(),a=i-s;2===a?24!==this.fields.hour.length&&(this._dstStart=i):0===a&&0===e.getMinutes()&&0===e.getSeconds()&&24!==this.fields.hour.length&&(this._dstEnd=i)}},i.prototype._findSchedule=function(e){function t(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n]>=e)return t[n]===e;return t[0]===e}function n(e,t){if(t<6){if(e.getDate()<8&&1===t)return!0;var n=e.getDate()%7?1:0,r=e.getDate()-e.getDate()%7;return Math.floor(r/7)+n===t}return!1}function s(e){return e.length>0&&e.some((function(e){return"string"==typeof e&&e.indexOf("L")>=0}))}var a=(e=e||!1)?"subtract":"add",o=new r(this._currentDate,this._tz),l=this._startDate,c=this._endDate,u=o.getTime(),d=0;for(;d<1e4;){if(d++,e){if(l&&o.getTime()-l.getTime()<0)throw new Error("Out of the timespan range")}else if(c&&c.getTime()-o.getTime()<0)throw new Error("Out of the timespan range");var h=t(o.getDate(),this.fields.dayOfMonth);s(this.fields.dayOfMonth)&&(h=h||o.isLastDayOfMonth());var f=t(o.getDay(),this.fields.dayOfWeek);s(this.fields.dayOfWeek)&&(f=f||this.fields.dayOfWeek.some((function(e){if(!s([e]))return!1;var t=Number.parseInt(e[0])%7;if(Number.isNaN(t))throw new Error("Invalid last weekday of the month expression: "+e);return o.getDay()===t&&o.isLastWeekdayOfMonth()})));var m=this.fields.dayOfMonth.length>=i.daysInMonth[o.getMonth()],p=this.fields.dayOfWeek.length===i.constraints[5].max-i.constraints[5].min+1,g=o.getHours();if(h||f&&!p)if(m||!p||h)if(!m||p||f)if(this._nthDayOfWeek>0&&!n(o,this._nthDayOfWeek))this._applyTimezoneShift(o,a,"Day");else if(t(o.getMonth()+1,this.fields.month)){if(t(g,this.fields.hour)){if(this._dstEnd===g&&!e){this._dstEnd=null,this._applyTimezoneShift(o,"add","Hour");continue}}else{if(this._dstStart!==g){this._dstStart=null,this._applyTimezoneShift(o,a,"Hour");continue}if(!t(g-1,this.fields.hour)){o[a+"Hour"]();continue}}if(t(o.getMinutes(),this.fields.minute))if(t(o.getSeconds(),this.fields.second)){if(u!==o.getTime())break;"add"===a||0===o.getMilliseconds()?this._applyTimezoneShift(o,a,"Second"):o.setMilliseconds(0)}else this._applyTimezoneShift(o,a,"Second");else this._applyTimezoneShift(o,a,"Minute")}else this._applyTimezoneShift(o,a,"Month");else this._applyTimezoneShift(o,a,"Day");else this._applyTimezoneShift(o,a,"Day");else this._applyTimezoneShift(o,a,"Day")}if(d>=1e4)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new r(o,this._tz),this._hasIterated=!0,o},i.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e},i.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e},i.prototype.hasNext=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},i.prototype.hasPrev=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(!0),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},i.prototype.iterate=function(e,t){var n=[];if(e>=0)for(var r=0,s=e;r<s;r++)try{var i=this.next();n.push(i),t&&t(i,r)}catch(e){break}else for(r=0,s=e;r>s;r--)try{i=this.prev();n.push(i),t&&t(i,r)}catch(e){break}return n},i.prototype.reset=function(e){this._currentDate=new r(e||this._options.currentDate)},i.prototype.stringify=function(e){for(var t=[],n=e?0:1,r=i.map.length;n<r;++n){var a=i.map[n],o=this.fields[a],l=i.constraints[n];"dayOfMonth"===a&&1===this.fields.month.length?l={min:1,max:i.daysInMonth[this.fields.month[0]-1]}:"dayOfWeek"===a&&(l={min:0,max:6},o=7===o[o.length-1]?o.slice(0,-1):o),t.push(s(o,l.min,l.max))}return t.join(" ")},i.parse=function(e,t){var n=this;function s(e,t){t||(t={}),void 0===t.currentDate&&(t.currentDate=new r(void 0,n._tz)),i.predefined[e]&&(e=i.predefined[e]);var s=[],a=(e+"").trim().split(/\s+/);if(a.length>6)throw new Error("Invalid cron expression");for(var o=i.map.length-a.length,l=0,c=i.map.length;l<c;++l){var u=i.map[l],d=a[a.length>c?l:l-o];if(l<o||!d)s.push(i._parseField(u,i.parseDefaults[l],i.constraints[l]));else{var h="dayOfWeek"===u?p(d):d;s.push(i._parseField(u,h,i.constraints[l]))}}var f={};for(l=0,c=i.map.length;l<c;l++){f[i.map[l]]=s[l]}var m=i._handleMaxDaysInMonth(f);return f.dayOfMonth=m||f.dayOfMonth,new i(f,t);function p(e){var n=e.split("#");if(n.length>1){var r=+n[n.length-1];if(/,/.test(e))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(e))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(e))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(n.length>2||Number.isNaN(r)||r<1||r>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return t.nthDayOfWeek=r,n[0]}return e}}return"function"==typeof t&&(t={}),s(e,t)},i.fieldsToExpression=function(e,t){function n(e,t,n){if(!t)throw new Error("Validation error, Field "+e+" is missing");if(0===t.length)throw new Error("Validation error, Field "+e+" contains no values");for(var r=0,s=t.length;r<s;r++){var a=t[r];if(!i._isValidConstraintChar(n,a)&&("number"!=typeof a||Number.isNaN(a)||a<n.min||a>n.max))throw new Error("Constraint error, got value "+a+" expected range "+n.min+"-"+n.max)}}for(var r={},s=0,a=i.map.length;s<a;++s){var o=i.map[s],l=e[o];n(o,l,i.constraints[s]);for(var c=[],u=-1;++u<l.length;)c[u]=l[u];if((l=c.sort(i._sortCompareFn).filter((function(e,t,n){return!t||e!==n[t-1]}))).length!==c.length)throw new Error("Validation error, Field "+o+" contains duplicate values");r[o]=l}var d=i._handleMaxDaysInMonth(r);return r.dayOfMonth=d||r.dayOfMonth,new i(r,t||{})},e.exports=i},52686:e=>{"use strict";function t(e){return{start:e,count:1}}function n(e,t){e.end=t,e.step=t-e.start,e.count=2}function r(e,n,r){n&&(2===n.count?(e.push(t(n.start)),e.push(t(n.end))):e.push(n)),r&&e.push(r)}e.exports=function(e){for(var s=[],i=void 0,a=0;a<e.length;a++){var o=e[a];"number"!=typeof o?(r(s,i,t(o)),i=void 0):i?1===i.count?n(i,o):i.step===o-i.end?(i.count++,i.end=o):2===i.count?(s.push(t(i.start)),n(i=t(i.end),o)):(r(s,i),i=t(o)):i=t(o)}return r(s,i),s}},16450:(e,t,n)=>{"use strict";var r=n(52686);e.exports=function(e,t,n){var s=r(e);if(1===s.length){var i=s[0];if(1===(u=i.step)&&i.start===t&&i.end===n)return"*";if(1!==u&&i.start===t&&i.end===n-u+1)return"*/"+u}for(var a=[],o=0,l=s.length;o<l;++o){var c=s[o];if(1!==c.count){var u=c.step;if(1!==c.step){var d=0==c.start?c.count-1:c.count;c.step*d>c.end?a=a.concat(Array.from({length:c.end-c.start+1}).map((function(e,t){var n=c.start+t;return(n-c.start)%c.step==0?n:null})).filter((function(e){return null!=e}))):c.end===n-c.step+1?a.push(c.start+"/"+c.step):a.push(c.start+"-"+c.end+"/"+c.step)}else a.push(c.start+"-"+c.end)}else a.push(c.start)}return a.join(",")}},94046:(e,t,n)=>{"use strict";var r=n(35251);function s(){}s._parseEntry=function(e){var t=e.split(" ");if(6===t.length)return{interval:r.parse(e)};if(t.length>6)return{interval:r.parse(t.slice(0,6).join(" ")),command:t.slice(6,t.length)};throw new Error("Invalid entry: "+e)},s.parseExpression=function(e,t){return r.parse(e,t)},s.fieldsToExpression=function(e,t){return r.fieldsToExpression(e,t)},s.parseString=function(e){for(var t=e.split("\n"),n={variables:{},expressions:[],errors:{}},r=0,i=t.length;r<i;r++){var a=null,o=t[r].trim();if(o.length>0){if(o.match(/^#/))continue;if(a=o.match(/^(.*)=(.*)$/))n.variables[a[1]]=a[2];else{var l=null;try{l=s._parseEntry("0 "+o),n.expressions.push(l.interval)}catch(e){n.errors[o]=e}}}}return n},s.parseFile=function(e,t){n(50810).readFile(e,(function(e,n){if(!e)return t(null,s.parseString(n.toString()));t(e)}))},e.exports=s},16483:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",s="second",i="minute",a="hour",o="day",l="week",c="month",u="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},w={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,c),i=n-s<0,a=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:o,D:h,h:a,m:i,s,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=g;var _="$isDayjsObject",k=function(e){return e instanceof O||!(!e||!e[_])},x=function e(t,n,r){var s;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(s=i),n&&(b[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var o=t.name;b[o]=t,s=o}return!r&&s&&(v=s),s||!r&&v},A=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},S=w;S.l=x,S.i=k,S.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function g(e){this.$L=x(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(m);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return S},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=A(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return A(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<A(e)},y.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!S.u(t)||t,u=S.p(e),f=function(e,t){var s=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?s:s.endOf(o)},m=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,g=this.$M,y=this.$D,w="set"+(this.$u?"UTC":"");switch(u){case d:return r?f(1,0):f(31,11);case c:return r?f(1,g):f(0,g+1);case l:var v=this.$locale().weekStart||0,b=(p<v?p+7:p)-v;return f(r?y-b:y+(6-b),g);case o:case h:return m(w+"Hours",0);case a:return m(w+"Minutes",1);case i:return m(w+"Seconds",2);case s:return m(w+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=S.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[o]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[a]=u+"Hours",n[i]=u+"Minutes",n[s]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],m=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var p=this.clone().set(h,1);p.$d[f](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[S.p(e)]()},y.add=function(r,u){var h,f=this;r=Number(r);var m=S.p(u),p=function(e){var t=A(f);return S.w(t.date(t.date()+Math.round(e*r)),f)};if(m===c)return this.set(c,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===o)return p(1);if(m===l)return p(7);var g=(h={},h[i]=t,h[a]=n,h[s]=e,h)[m]||1,y=this.$d.getTime()+r*g;return S.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),i=this.$H,a=this.$m,o=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},h=function(e){return S.s(i%12||12,e,"0")},m=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return d(n.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return S.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return m(i,a,!0);case"A":return m(i,a,!1);case"m":return String(a);case"mm":return S.s(a,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,h,f){var m,p=this,g=S.p(h),y=A(r),w=(y.utcOffset()-this.utcOffset())*t,v=this-y,b=function(){return S.m(p,y)};switch(g){case d:m=b()/12;break;case c:m=b();break;case u:m=b()/3;break;case l:m=(v-w)/6048e5;break;case o:m=(v-w)/864e5;break;case a:m=v/n;break;case i:m=v/t;break;case s:m=v/e;break;default:m=v}return f?m:S.a(m)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return S.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),T=O.prototype;return A.prototype=T,[["$ms",r],["$s",s],["$m",i],["$H",a],["$W",o],["$M",c],["$y",d],["$D",h]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,O,A),e.$i=!0),A},A.locale=x,A.isDayjs=k,A.unix=function(e){return A(1e3*e)},A.en=b[v],A.Ls=b,A.p={},A}()},6887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}class r extends n{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class s extends n{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class i extends n{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class a extends n{}class o extends n{constructor(e){super(`Invalid unit ${e}`)}}class l extends n{}class c extends n{constructor(){super("Zone is an abstract class")}}const u="numeric",d="short",h="long",f={year:u,month:u,day:u},m={year:u,month:d,day:u},p={year:u,month:d,day:u,weekday:d},g={year:u,month:h,day:u},y={year:u,month:h,day:u,weekday:h},w={hour:u,minute:u},v={hour:u,minute:u,second:u},b={hour:u,minute:u,second:u,timeZoneName:d},_={hour:u,minute:u,second:u,timeZoneName:h},k={hour:u,minute:u,hourCycle:"h23"},x={hour:u,minute:u,second:u,hourCycle:"h23"},A={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:d},S={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:h},O={year:u,month:u,day:u,hour:u,minute:u},T={year:u,month:u,day:u,hour:u,minute:u,second:u},E={year:u,month:d,day:u,hour:u,minute:u},C={year:u,month:d,day:u,hour:u,minute:u,second:u},M={year:u,month:d,day:u,weekday:d,hour:u,minute:u},D={year:u,month:h,day:u,hour:u,minute:u,timeZoneName:d},I={year:u,month:h,day:u,hour:u,minute:u,second:u,timeZoneName:d},N={year:u,month:h,day:u,weekday:h,hour:u,minute:u,timeZoneName:h},j={year:u,month:h,day:u,weekday:h,hour:u,minute:u,second:u,timeZoneName:h};class ${get type(){throw new c}get name(){throw new c}get ianaName(){return this.name}get isUniversal(){throw new c}offsetName(e,t){throw new c}formatOffset(e,t){throw new c}offset(e){throw new c}equals(e){throw new c}get isValid(){throw new c}}let F=null;class P extends ${static get instance(){return null===F&&(F=new P),F}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return tt(e,t,n)}formatOffset(e,t){return it(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let L={};const R={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let W={};class V extends ${static create(e){return W[e]||(W[e]=new V(e)),W[e]}static resetCache(){W={},L={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=V.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return tt(e,t,n,this.name)}formatOffset(e,t){return it(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(r=this.name,L[r]||(L[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),L[r]);var r;let[s,i,a,o,l,c,u]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){const{type:t,value:s}=n[e],i=R[t];"era"===t?r[i]=s:je(i)||(r[i]=parseInt(s,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,i,a,o,l,c,u]=r;return[a,s,i,o,l,c,u]}(n,t);"BC"===o&&(s=1-Math.abs(s));let d=+t;const h=d%1e3;return d-=h>=0?h:1e3+h,(Ge({year:s,month:i,day:a,hour:24===l?0:l,minute:c,second:u,millisecond:0})-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let B={};let U={};function q(e,t={}){const n=JSON.stringify([e,t]);let r=U[n];return r||(r=new Intl.DateTimeFormat(e,t),U[n]=r),r}let z={};let K={};let Z=null;let H={};function Y(e,t,n,r){const s=e.listingMode();return"error"===s?null:"en"===s?n(t):r(t)}class J{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let r=z[n];return r||(r=new Intl.NumberFormat(e,t),z[n]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Ue(this.floor?Math.floor(e):Ze(e,3),this.padTo)}}class G{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&V.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=q(t,s)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class X{constructor(e,t,n){this.opts={style:"long",...n},!t&&Pe()&&(this.rtf=function(e,t={}){const{base:n,...r}=t,s=JSON.stringify([e,r]);let i=K[s];return i||(i=new Intl.RelativeTimeFormat(e,t),K[s]=i),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${s[e][0]}`;case-1:return n?"yesterday":`last ${s[e][0]}`;case 0:return n?"today":`this ${s[e][0]}`}}const a=Object.is(t,-0)||t<0,o=Math.abs(t),l=1===o,c=s[e],u=r?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return a?`${o} ${u} ago`:`in ${o} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Q={firstDay:1,minimalDays:4,weekend:[6,7]};class ee{static fromOpts(e){return ee.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,s=!1){const i=e||we.defaultLocale,a=i||(s?"en-US":Z||(Z=(new Intl.DateTimeFormat).resolvedOptions().locale,Z)),o=t||we.defaultNumberingSystem,l=n||we.defaultOutputCalendar,c=Ve(r)||we.defaultWeekSettings;return new ee(a,o,l,c,i)}static resetCache(){Z=null,U={},z={},K={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return ee.create(e,t,n,r)}constructor(e,t,n,r,s){const[i,a,o]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,r;try{t=q(e).resolvedOptions(),r=e}catch(s){const i=e.substring(0,n);t=q(i).resolvedOptions(),r=i}const{numberingSystem:s,calendar:i}=t;return[r,s,i]}}(e);this.locale=i,this.numberingSystem=t||a||null,this.outputCalendar=n||o||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?ee.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Ve(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Y(this,e,ut,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;n<=12;n++){const r=mr.utc(2009,n,1);t.push(e(r))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1){return Y(this,e,mt,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;n<=7;n++){const r=mr.utc(2016,11,13+n);t.push(e(r))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return Y(this,void 0,(()=>pt),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[mr.utc(2016,11,13,9),mr.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return Y(this,e,vt,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[mr.utc(-40,1,1),mr.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return r?r.value:null}numberFormatter(e={}){return new J(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new G(e,this.intl,t)}relFormatter(e={}){return new X(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let r=B[n];return r||(r=new Intl.ListFormat(e,t),B[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Le()?function(e){let t=H[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,H[e]=t}return t}(this.locale):Q}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let te=null;class ne extends ${static get utcInstance(){return null===te&&(te=new ne(0)),te}static instance(e){return 0===e?ne.utcInstance:new ne(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ne(nt(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${it(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${it(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return it(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class re extends ${constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function se(e,t){if(je(e)||null===e)return t;if(e instanceof $)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?P.instance:"utc"===n||"gmt"===n?ne.utcInstance:ne.parseSpecifier(n)||V.create(e)}return $e(e)?ne.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new re(e)}const ie={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},ae={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},oe=ie.hanidec.replace(/[\[|\]]/g,"").split("");let le={};function ce({numberingSystem:e},t=""){const n=e||"latn";return le[n]||(le[n]={}),le[n][t]||(le[n][t]=new RegExp(`${ie[n]}${t}`)),le[n][t]}let ue,de=()=>Date.now(),he="system",fe=null,me=null,pe=null,ge=60,ye=null;class we{static get now(){return de}static set now(e){de=e}static set defaultZone(e){he=e}static get defaultZone(){return se(he,P.instance)}static get defaultLocale(){return fe}static set defaultLocale(e){fe=e}static get defaultNumberingSystem(){return me}static set defaultNumberingSystem(e){me=e}static get defaultOutputCalendar(){return pe}static set defaultOutputCalendar(e){pe=e}static get defaultWeekSettings(){return ye}static set defaultWeekSettings(e){ye=Ve(e)}static get twoDigitCutoffYear(){return ge}static set twoDigitCutoffYear(e){ge=e%100}static get throwOnInvalid(){return ue}static set throwOnInvalid(e){ue=e}static resetCaches(){ee.resetCache(),V.resetCache(),mr.resetCache(),le={}}}class ve{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const be=[0,31,59,90,120,151,181,212,243,273,304,334],_e=[0,31,60,91,121,152,182,213,244,274,305,335];function ke(e,t){return new ve("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function xe(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return 0===s?7:s}function Ae(e,t,n){return n+(He(e)?_e:be)[t-1]}function Se(e,t){const n=He(e)?_e:be,r=n.findIndex((e=>e<t));return{month:r+1,day:t-n[r]}}function Oe(e,t){return(e-t+7)%7+1}function Te(e,t=4,n=1){const{year:r,month:s,day:i}=e,a=Ae(r,s,i),o=Oe(xe(r,s,i),n);let l,c=Math.floor((a-o+14-t)/7);return c<1?(l=r-1,c=Qe(l,t,n)):c>Qe(r,t,n)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:o,...at(e)}}function Ee(e,t=4,n=1){const{weekYear:r,weekNumber:s,weekday:i}=e,a=Oe(xe(r,1,t),n),o=Ye(r);let l,c=7*s+i-a-7+t;c<1?(l=r-1,c+=Ye(l)):c>o?(l=r+1,c-=Ye(r)):l=r;const{month:u,day:d}=Se(l,c);return{year:l,month:u,day:d,...at(e)}}function Ce(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:Ae(t,n,r),...at(e)}}function Me(e){const{year:t,ordinal:n}=e,{month:r,day:s}=Se(t,n);return{year:t,month:r,day:s,...at(e)}}function De(e,t){if(!je(e.localWeekday)||!je(e.localWeekNumber)||!je(e.localWeekYear)){if(!je(e.weekday)||!je(e.weekNumber)||!je(e.weekYear))throw new a("Cannot mix locale-based week fields with ISO-based week fields");return je(e.localWeekday)||(e.weekday=e.localWeekday),je(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),je(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Ie(e){const t=Fe(e.year),n=Be(e.month,1,12),r=Be(e.day,1,Je(e.year,e.month));return t?n?!r&&ke("day",e.day):ke("month",e.month):ke("year",e.year)}function Ne(e){const{hour:t,minute:n,second:r,millisecond:s}=e,i=Be(t,0,23)||24===t&&0===n&&0===r&&0===s,a=Be(n,0,59),o=Be(r,0,59),l=Be(s,0,999);return i?a?o?!l&&ke("millisecond",s):ke("second",r):ke("minute",n):ke("hour",t)}function je(e){return void 0===e}function $e(e){return"number"==typeof e}function Fe(e){return"number"==typeof e&&e%1==0}function Pe(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Le(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Re(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const s=[t(r),r];return e&&n(e[0],s[0])===e[0]?e:s}),null)[1]}function We(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ve(e){if(null==e)return null;if("object"!=typeof e)throw new l("Week settings must be an object");if(!Be(e.firstDay,1,7)||!Be(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Be(e,1,7))))throw new l("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Be(e,t,n){return Fe(e)&&e>=t&&e<=n}function Ue(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function qe(e){return je(e)||null===e||""===e?void 0:parseInt(e,10)}function ze(e){return je(e)||null===e||""===e?void 0:parseFloat(e)}function Ke(e){if(!je(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Ze(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function He(e){return e%4==0&&(e%100!=0||e%400==0)}function Ye(e){return He(e)?366:365}function Je(e,t){const n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?He(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Ge(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Xe(e,t,n){return-Oe(xe(e,1,t),n)+t-1}function Qe(e,t=4,n=1){const r=Xe(e,t,n),s=Xe(e+1,t,n);return(Ye(e)-r+s)/7}function et(e){return e>99?e:e>we.twoDigitCutoffYear?1900+e:2e3+e}function tt(e,t,n,r=null){const s=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const a={timeZoneName:t,...i},o=new Intl.DateTimeFormat(n,a).formatToParts(s).find((e=>"timezonename"===e.type.toLowerCase()));return o?o.value:null}function nt(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function rt(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new l(`Invalid unit value ${e}`);return t}function st(e,t){const n={};for(const r in e)if(We(e,r)){const s=e[r];if(null==s)continue;n[t(r)]=rt(s)}return n}function it(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Ue(n,2)}:${Ue(r,2)}`;case"narrow":return`${s}${n}${r>0?`:${r}`:""}`;case"techie":return`${s}${Ue(n,2)}${Ue(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function at(e){return function(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(e,["hour","minute","second","millisecond"])}const ot=["January","February","March","April","May","June","July","August","September","October","November","December"],lt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ct=["J","F","M","A","M","J","J","A","S","O","N","D"];function ut(e){switch(e){case"narrow":return[...ct];case"short":return[...lt];case"long":return[...ot];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ht=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ft=["M","T","W","T","F","S","S"];function mt(e){switch(e){case"narrow":return[...ft];case"short":return[...ht];case"long":return[...dt];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const pt=["AM","PM"],gt=["Before Christ","Anno Domini"],yt=["BC","AD"],wt=["B","A"];function vt(e){switch(e){case"narrow":return[...wt];case"short":return[...yt];case"long":return[...gt];default:return null}}function bt(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const _t={D:f,DD:m,DDD:g,DDDD:y,t:w,tt:v,ttt:b,tttt:_,T:k,TT:x,TTT:A,TTTT:S,f:O,ff:E,fff:D,ffff:N,F:T,FF:C,FFF:I,FFFF:j};class kt{static create(e,t={}){return new kt(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let i=0;i<e.length;i++){const a=e.charAt(i);"'"===a?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||a===t?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return _t[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Ue(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,s=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",a=()=>n?function(e){return pt[e.hour<12?0:1]}(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(t,r)=>n?function(e,t){return ut(t)[e.month-1]}(e,t):s(r?{month:t}:{month:t,day:"numeric"},"month"),l=(t,r)=>n?function(e,t){return mt(t)[e.weekday-1]}(e,t):s(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=kt.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return vt(t)[e.year<0?0:1]}(e,t):s({era:t},"era");return bt(kt.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=kt.parseFormat(t),s=r.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]);return bt(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...s.map(n).filter((e=>e)))))}}const xt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function At(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function St(...e){return t=>e.reduce((([e,n,r],s)=>{const[i,a,o]=s(t,r);return[{...e,...i},a||n,o]}),[{},null,1]).slice(0,2)}function Ot(e,...t){if(null==e)return[null,null];for(const[n,r]of t){const t=n.exec(e);if(t)return r(t)}return[null,null]}function Tt(...e){return(t,n)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=qe(t[n+s]);return[r,null,n+s]}}const Et=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ct=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Mt=RegExp(`${Ct.source}${`(?:${Et.source}?(?:\\[(${xt.source})\\])?)?`}`),Dt=RegExp(`(?:T${Mt.source})?`),It=Tt("weekYear","weekNumber","weekDay"),Nt=Tt("year","ordinal"),jt=RegExp(`${Ct.source} ?(?:${Et.source}|(${xt.source}))?`),$t=RegExp(`(?: ${jt.source})?`);function Ft(e,t,n){const r=e[t];return je(r)?n:qe(r)}function Pt(e,t){return[{hours:Ft(e,t,0),minutes:Ft(e,t+1,0),seconds:Ft(e,t+2,0),milliseconds:Ke(e[t+3])},null,t+4]}function Lt(e,t){const n=!e[t]&&!e[t+1],r=nt(e[t+1],e[t+2]);return[{},n?null:ne.instance(r),t+3]}function Rt(e,t){return[{},e[t]?V.create(e[t]):null,t+1]}const Wt=RegExp(`^T?${Ct.source}$`),Vt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Bt(e){const[t,n,r,s,i,a,o,l,c]=e,u="-"===t[0],d=l&&"-"===l[0],h=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:h(ze(n)),months:h(ze(r)),weeks:h(ze(s)),days:h(ze(i)),hours:h(ze(a)),minutes:h(ze(o)),seconds:h(ze(l),"-0"===l),milliseconds:h(Ke(c),d)}]}const Ut={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function qt(e,t,n,r,s,i,a){const o={year:2===t.length?et(qe(t)):qe(t),month:lt.indexOf(n)+1,day:qe(r),hour:qe(s),minute:qe(i)};return a&&(o.second=qe(a)),e&&(o.weekday=e.length>3?dt.indexOf(e)+1:ht.indexOf(e)+1),o}const zt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Kt(e){const[,t,n,r,s,i,a,o,l,c,u,d]=e,h=qt(t,s,r,n,i,a,o);let f;return f=l?Ut[l]:c?0:nt(u,d),[h,new ne(f)]}const Zt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ht=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Yt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Jt(e){const[,t,n,r,s,i,a,o]=e;return[qt(t,s,r,n,i,a,o),ne.utcInstance]}function Gt(e){const[,t,n,r,s,i,a,o]=e;return[qt(t,o,n,r,s,i,a),ne.utcInstance]}const Xt=At(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Dt),Qt=At(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Dt),en=At(/(\d{4})-?(\d{3})/,Dt),tn=At(Mt),nn=St((function(e,t){return[{year:Ft(e,t),month:Ft(e,t+1,1),day:Ft(e,t+2,1)},null,t+3]}),Pt,Lt,Rt),rn=St(It,Pt,Lt,Rt),sn=St(Nt,Pt,Lt,Rt),an=St(Pt,Lt,Rt);const on=St(Pt);const ln=At(/(\d{4})-(\d\d)-(\d\d)/,$t),cn=At(jt),un=St(Pt,Lt,Rt);const dn="Invalid Duration",hn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},fn={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...hn},mn=365.2425,pn=30.436875,gn={years:{quarters:4,months:12,weeks:52.1775,days:mn,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:pn,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...hn},yn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wn=yn.slice(0).reverse();function vn(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new kn(r)}function bn(e,t){var n;let r=null!=(n=t.milliseconds)?n:0;for(const n of wn.slice(1))t[n]&&(r+=t[n]*e[n].milliseconds);return r}function _n(e,t){const n=bn(e,t)<0?-1:1;yn.reduceRight(((r,s)=>{if(je(t[s]))return r;if(r){const i=t[r]*n,a=e[s][r],o=Math.floor(i/a);t[s]+=o*n,t[r]-=o*a*n}return s}),null),yn.reduce(((n,r)=>{if(je(t[r]))return n;if(n){const s=t[n]%1;t[n]-=s,t[r]+=s*e[n][r]}return r}),null)}class kn{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?gn:fn;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||ee.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return kn.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new l("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new kn({values:st(e,kn.normalizeUnit),loc:ee.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if($e(e))return kn.fromMillis(e);if(kn.isDuration(e))return e;if("object"==typeof e)return kn.fromObject(e);throw new l(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return Ot(e,[Vt,Bt])}(e);return n?kn.fromObject(n,t):kn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return Ot(e,[Wt,on])}(e);return n?kn.fromObject(n,t):kn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the Duration is invalid");const n=e instanceof ve?e:new ve(e,t);if(we.throwOnInvalid)throw new i(n);return new kn({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new o(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?kt.create(this.loc,n).formatDurationFromString(this,e):dn}toHuman(e={}){if(!this.isValid)return dn;const t=yn.map((t=>{const n=this.values[t];return je(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Ze(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};return mr.fromMillis(t,{zone:"UTC"}).toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?bn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=kn.fromDurationLike(e),n={};for(const e of yn)(We(t.values,e)||We(this.values,e))&&(n[e]=t.get(e)+this.get(e));return vn(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=kn.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=rt(e(this.values[n],n));return vn(this,{values:t},!0)}get(e){return this[kn.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return vn(this,{values:{...this.values,...st(e,kn.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){return vn(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return _n(this.matrix,e),vn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;return vn(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>kn.normalizeUnit(e)));const t={},n={},r=this.toObject();let s;for(const i of yn)if(e.indexOf(i)>=0){s=i;let e=0;for(const t in n)e+=this.matrix[t][i]*n[t],n[t]=0;$e(r[i])&&(e+=r[i]);const a=Math.trunc(e);t[i]=a,n[i]=(1e3*e-1e3*a)/1e3}else $e(r[i])&&(n[i]=r[i]);for(const e in n)0!==n[e]&&(t[s]+=e===s?n[e]:n[e]/this.matrix[s][e]);return _n(this.matrix,t),vn(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return vn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of yn)if(t=this.values[r],n=e.values[r],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const xn="Invalid Interval";class An{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the Interval is invalid");const n=e instanceof ve?e:new ve(e,t);if(we.throwOnInvalid)throw new s(n);return new An({invalid:n})}static fromDateTimes(e,t){const n=pr(e),r=pr(t),s=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?An.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:An.invalid("missing or invalid end"):An.invalid("missing or invalid start")}(n,r);return null==s?new An({start:n,end:r}):s}static after(e,t){const n=kn.fromDurationLike(t),r=pr(e);return An.fromDateTimes(r,r.plus(n))}static before(e,t){const n=kn.fromDurationLike(t),r=pr(e);return An.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,s,i,a;try{e=mr.fromISO(n,t),s=e.isValid}catch(r){s=!1}try{i=mr.fromISO(r,t),a=i.isValid}catch(r){a=!1}if(s&&a)return An.fromDateTimes(e,i);if(s){const n=kn.fromISO(r,t);if(n.isValid)return An.after(e,n)}else if(a){const e=kn.fromISO(n,t);if(e.isValid)return An.before(i,e)}}return An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?An.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(pr).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:r}=this,s=0;for(;r<this.e;){const e=t[s]||this.e,i=+e>+this.e?this.e:e;n.push(An.fromDateTimes(r,i)),r=i,s+=1}return n}splitBy(e){const t=kn.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,s=1;const i=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*s)));n=+e>+this.e?this.e:e,i.push(An.fromDateTimes(r,n)),r=n,s+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:An.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return An.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=Array.prototype.concat(...s).sort(((e,t)=>e.time-t.time));for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&r.push(An.fromDateTimes(t,e.time)),t=null);return An.merge(r)}difference(...e){return An.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:xn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=f,t={}){return this.isValid?kt.create(this.s.loc.clone(t),e).formatInterval(this):xn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:xn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:xn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:xn}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:xn}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):kn.invalid(this.invalidReason)}mapEndpoints(e){return An.fromDateTimes(e(this.s),e(this.e))}}class Sn{static hasDST(e=we.defaultZone){const t=mr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return V.isValidZone(e)}static normalizeZone(e){return se(e,we.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||ee.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||ee.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||ee.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ee.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ee.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ee.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ee.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ee.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return ee.create(t,null,"gregory").eras(e)}static features(){return{relative:Pe(),localeWeek:Le()}}}function On(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(kn.fromMillis(r).as("days"))}function Tn(e,t,n,r){let[s,i,a,o]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=On(e,t);return(n-n%7)/7}],["days",On]],s={},i=e;let a,o;for(const[l,c]of r)n.indexOf(l)>=0&&(a=l,s[l]=c(e,t),o=i.plus(s),o>t?(s[l]--,(e=i.plus(s))>t&&(o=e,s[l]--,e=i.plus(s))):e=o);return[e,s,o,a]}(e,t,n);const l=t-s,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(a<t&&(a=s.plus({[o]:1})),a!==s&&(i[o]=(i[o]||0)+l/(a-s)));const u=kn.fromObject(i,r);return c.length>0?kn.fromMillis(l,r).shiftTo(...c).plus(u):u}function En(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(ie.hanidec))t+=oe.indexOf(e[n]);else for(const e in ae){const[n,s]=ae[e];r>=n&&r<=s&&(t+=r-n)}}return parseInt(t,10)}return t}(e))}}const Cn=`[ ${String.fromCharCode(160)}]`,Mn=new RegExp(Cn,"g");function Dn(e){return e.replace(/\./g,"\\.?").replace(Mn,Cn)}function In(e){return e.replace(/\./g,"").replace(Mn," ").toLowerCase()}function Nn(e,t){return null===e?null:{regex:RegExp(e.map(Dn).join("|")),deser:([n])=>e.findIndex((e=>In(n)===In(e)))+t}}function jn(e,t){return{regex:e,deser:([,e,t])=>nt(e,t),groups:t}}function $n(e){return{regex:e,deser:([e])=>e}}const Fn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Pn=null;function Ln(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Vn(kt.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}class Rn{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Ln(kt.parseFormat(t),e),this.units=this.tokens.map((t=>function(e,t){const n=ce(t),r=ce(t,"{2}"),s=ce(t,"{3}"),i=ce(t,"{4}"),a=ce(t,"{6}"),o=ce(t,"{1,2}"),l=ce(t,"{1,3}"),c=ce(t,"{1,6}"),u=ce(t,"{1,9}"),d=ce(t,"{2,4}"),h=ce(t,"{4,6}"),f=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},m=(m=>{if(e.literal)return f(m);switch(m.val){case"G":return Nn(t.eras("short"),0);case"GG":return Nn(t.eras("long"),0);case"y":return En(c);case"yy":case"kk":return En(d,et);case"yyyy":case"kkkk":return En(i);case"yyyyy":return En(h);case"yyyyyy":return En(a);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return En(o);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return En(r);case"MMM":return Nn(t.months("short",!0),1);case"MMMM":return Nn(t.months("long",!0),1);case"LLL":return Nn(t.months("short",!1),1);case"LLLL":return Nn(t.months("long",!1),1);case"o":case"S":return En(l);case"ooo":case"SSS":return En(s);case"u":return $n(u);case"uu":return $n(o);case"uuu":case"E":case"c":return En(n);case"a":return Nn(t.meridiems(),0);case"EEE":return Nn(t.weekdays("short",!1),1);case"EEEE":return Nn(t.weekdays("long",!1),1);case"ccc":return Nn(t.weekdays("short",!0),1);case"cccc":return Nn(t.weekdays("long",!0),1);case"Z":case"ZZ":return jn(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return jn(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return $n(/[a-z_+-/]{1,256}?/i);case" ":return $n(/[^\S\n\r]/);default:return f(m)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return m.token=e,m}(t,e))),this.disqualifyingUnit=this.units.find((e=>e.invalidReason)),!this.disqualifyingUnit){const[e,t]=[`^${(n=this.units).map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,n];this.regex=RegExp(e,"i"),this.handlers=t}var n}explainFromTokens(e){if(this.isValid){const[t,n]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const s in n)if(We(n,s)){const i=n[s],a=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(r.slice(t,t+a))),t+=a}return[r,e]}return[r,{}]}(e,this.regex,this.handlers),[r,s,i]=n?function(e){let t,n=null;return je(e.z)||(n=V.create(e.z)),je(e.Z)||(n||(n=new ne(e.Z)),t=e.Z),je(e.q)||(e.M=3*(e.q-1)+1),je(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),je(e.u)||(e.S=Ke(e.u)),[Object.keys(e).reduce(((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t}),{}),n,t]}(n):[null,null,void 0];if(We(n,"a")&&We(n,"H"))throw new a("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:s,specificOffset:i}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Wn(e,t,n){return new Rn(e,n).explainFromTokens(t)}function Vn(e,t){if(!e)return null;const n=kt.create(t,e).dtFormatter((Pn||(Pn=mr.fromMillis(1555555555555)),Pn)),r=n.formatToParts(),s=n.resolvedOptions();return r.map((t=>function(e,t,n){const{type:r,value:s}=e;if("literal"===r){const e=/^\s+$/.test(s);return{literal:!e,val:e?" ":s}}const i=t[r];let a=r;"hour"===r&&(a=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let o=Fn[a];if("object"==typeof o&&(o=o[i]),o)return{literal:!1,val:o}}(t,e,s)))}const Bn="Invalid DateTime",Un=864e13;function qn(e){return new ve("unsupported zone",`the zone "${e.name}" is not supported`)}function zn(e){return null===e.weekData&&(e.weekData=Te(e.c)),e.weekData}function Kn(e){return null===e.localWeekData&&(e.localWeekData=Te(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Zn(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new mr({...n,...t,old:n})}function Hn(e,t,n){let r=e-60*t*1e3;const s=n.offset(r);if(t===s)return[r,t];r-=60*(s-t)*1e3;const i=n.offset(r);return s===i?[r,s]:[e-60*Math.min(s,i)*1e3,Math.max(s,i)]}function Yn(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Jn(e,t,n){return Hn(Ge(e),t,n)}function Gn(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:r,month:s,day:Math.min(e.c.day,Je(r,s))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=kn.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),o=Ge(i);let[l,c]=Hn(o,n,e.zone);return 0!==a&&(l+=a,c=e.zone.offset(l)),{ts:l,o:c}}function Xn(e,t,n,r,s,i){const{setZone:a,zone:o}=n;if(e&&0!==Object.keys(e).length||t){const r=t||o,s=mr.fromObject(e,{...n,zone:r,specificOffset:i});return a?s:s.setZone(o)}return mr.invalid(new ve("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Qn(e,t,n=!0){return e.isValid?kt.create(ee.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function er(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Ue(e.c.year,n?6:4),t?(r+="-",r+=Ue(e.c.month),r+="-",r+=Ue(e.c.day)):(r+=Ue(e.c.month),r+=Ue(e.c.day)),r}function tr(e,t,n,r,s,i){let a=Ue(e.c.hour);return t?(a+=":",a+=Ue(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=":")):a+=Ue(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=Ue(e.c.second),0===e.c.millisecond&&r||(a+=".",a+=Ue(e.c.millisecond,3))),s&&(e.isOffsetFixed&&0===e.offset&&!i?a+="Z":e.o<0?(a+="-",a+=Ue(Math.trunc(-e.o/60)),a+=":",a+=Ue(Math.trunc(-e.o%60))):(a+="+",a+=Ue(Math.trunc(e.o/60)),a+=":",a+=Ue(Math.trunc(e.o%60)))),i&&(a+="["+e.zone.ianaName+"]"),a}const nr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},rr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},sr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ir=["year","month","day","hour","minute","second","millisecond"],ar=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],or=["year","ordinal","hour","minute","second","millisecond"];function lr(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new o(e);return t}(e)}}function cr(e,t){const n=se(t.zone,we.defaultZone);if(!n.isValid)return mr.invalid(qn(n));const r=ee.fromObject(t);let s,i;if(je(e.year))s=we.now();else{for(const t of ir)je(e[t])&&(e[t]=nr[t]);const t=Ie(e)||Ne(e);if(t)return mr.invalid(t);const r=function(e){return fr[e]||(void 0===hr&&(hr=we.now()),fr[e]=e.offset(hr)),fr[e]}(n);[s,i]=Jn(e,r,n)}return new mr({ts:s,zone:n,loc:r,o:i})}function ur(e,t,n){const r=!!je(n.round)||n.round,s=(e,s)=>{e=Ze(e,r||n.calendary?0:2,!0);return t.loc.clone(n).relFormatter(n).format(e,s)},i=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return s(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return s(t,e)}return s(e>t?-0:0,n.units[n.units.length-1])}function dr(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let hr,fr={};class mr{constructor(e){const t=e.zone||we.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ve("invalid input"):null)||(t.isValid?null:qn(t));this.ts=je(e.ts)?we.now():e.ts;let r=null,s=null;if(!n){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const i=$e(e.o)&&!e.old?e.o:t.offset(this.ts);r=Yn(this.ts,i),n=Number.isNaN(r.year)?new ve("invalid input"):null,r=n?null:r,s=n?null:i}}this._zone=t,this.loc=e.loc||ee.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new mr({})}static local(){const[e,t]=dr(arguments),[n,r,s,i,a,o,l]=t;return cr({year:n,month:r,day:s,hour:i,minute:a,second:o,millisecond:l},e)}static utc(){const[e,t]=dr(arguments),[n,r,s,i,a,o,l]=t;return e.zone=ne.utcInstance,cr({year:n,month:r,day:s,hour:i,minute:a,second:o,millisecond:l},e)}static fromJSDate(e,t={}){const n=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(n))return mr.invalid("invalid input");const s=se(t.zone,we.defaultZone);return s.isValid?new mr({ts:n,zone:s,loc:ee.fromObject(t)}):mr.invalid(qn(s))}static fromMillis(e,t={}){if($e(e))return e<-Un||e>Un?mr.invalid("Timestamp out of range"):new mr({ts:e,zone:se(t.zone,we.defaultZone),loc:ee.fromObject(t)});throw new l(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if($e(e))return new mr({ts:1e3*e,zone:se(t.zone,we.defaultZone),loc:ee.fromObject(t)});throw new l("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=se(t.zone,we.defaultZone);if(!n.isValid)return mr.invalid(qn(n));const r=ee.fromObject(t),s=st(e,lr),{minDaysInFirstWeek:i,startOfWeek:o}=De(s,r),l=we.now(),c=je(t.specificOffset)?n.offset(l):t.specificOffset,u=!je(s.ordinal),d=!je(s.year),h=!je(s.month)||!je(s.day),f=d||h,m=s.weekYear||s.weekNumber;if((f||u)&&m)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new a("Can't mix ordinal dates with month/day");const p=m||s.weekday&&!f;let g,y,w=Yn(l,c);p?(g=ar,y=rr,w=Te(w,i,o)):u?(g=or,y=sr,w=Ce(w)):(g=ir,y=nr);let v=!1;for(const e of g){je(s[e])?s[e]=v?y[e]:w[e]:v=!0}const b=p?function(e,t=4,n=1){const r=Fe(e.weekYear),s=Be(e.weekNumber,1,Qe(e.weekYear,t,n)),i=Be(e.weekday,1,7);return r?s?!i&&ke("weekday",e.weekday):ke("week",e.weekNumber):ke("weekYear",e.weekYear)}(s,i,o):u?function(e){const t=Fe(e.year),n=Be(e.ordinal,1,Ye(e.year));return t?!n&&ke("ordinal",e.ordinal):ke("year",e.year)}(s):Ie(s),_=b||Ne(s);if(_)return mr.invalid(_);const k=p?Ee(s,i,o):u?Me(s):s,[x,A]=Jn(k,c,n),S=new mr({ts:x,zone:n,o:A,loc:r});return s.weekday&&f&&e.weekday!==S.weekday?mr.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${S.toISO()}`):S.isValid?S:mr.invalid(S.invalid)}static fromISO(e,t={}){const[n,r]=function(e){return Ot(e,[Xt,nn],[Qt,rn],[en,sn],[tn,an])}(e);return Xn(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=function(e){return Ot(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[zt,Kt])}(e);return Xn(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=function(e){return Ot(e,[Zt,Jt],[Ht,Jt],[Yt,Gt])}(e);return Xn(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(je(e)||je(t))throw new l("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,i=ee.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,o,c,u]=function(e,t,n){const{result:r,zone:s,specificOffset:i,invalidReason:a}=Wn(e,t,n);return[r,s,i,a]}(i,e,t);return u?mr.invalid(u):Xn(a,o,n,`format ${t}`,e,c)}static fromString(e,t,n={}){return mr.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=function(e){return Ot(e,[ln,nn],[cn,un])}(e);return Xn(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the DateTime is invalid");const n=e instanceof ve?e:new ve(e,t);if(we.throwOnInvalid)throw new r(n);return new mr({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Vn(e,ee.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return Ln(kt.parseFormat(e),ee.fromObject(t)).map((e=>e.val)).join("")}static resetCache(){hr=void 0,fr={}}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?zn(this).weekYear:NaN}get weekNumber(){return this.isValid?zn(this).weekNumber:NaN}get weekday(){return this.isValid?zn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Kn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Kn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Kn(this).weekYear:NaN}get ordinal(){return this.isValid?Ce(this.c).ordinal:NaN}get monthShort(){return this.isValid?Sn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Sn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Sn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Sn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Ge(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),i=this.zone.offset(n-r*t),a=this.zone.offset(n-s*t);if(i===a)return[this];const o=n-i*t,l=n-a*t,c=Yn(o,i),u=Yn(l,a);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[Zn(this,{ts:o}),Zn(this,{ts:l})]:[this]}get isInLeapYear(){return He(this.year)}get daysInMonth(){return Je(this.year,this.month)}get daysInYear(){return this.isValid?Ye(this.year):NaN}get weeksInWeekYear(){return this.isValid?Qe(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Qe(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=kt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(ne.instance(e),t)}toLocal(){return this.setZone(we.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=se(e,we.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=Jn(n,t,e)}return Zn(this,{ts:r,zone:e})}return mr.invalid(qn(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return Zn(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=st(e,lr),{minDaysInFirstWeek:n,startOfWeek:r}=De(t,this.loc),s=!je(t.weekYear)||!je(t.weekNumber)||!je(t.weekday),i=!je(t.ordinal),o=!je(t.year),l=!je(t.month)||!je(t.day),c=o||l,u=t.weekYear||t.weekNumber;if((c||i)&&u)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&i)throw new a("Can't mix ordinal dates with month/day");let d;s?d=Ee({...Te(this.c,n,r),...t},n,r):je(t.ordinal)?(d={...this.toObject(),...t},je(t.day)&&(d.day=Math.min(Je(d.year,d.month),d.day))):d=Me({...Ce(this.c),...t});const[h,f]=Jn(d,this.o,this.zone);return Zn(this,{ts:h,o:f})}plus(e){if(!this.isValid)return this;return Zn(this,Gn(this,kn.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return Zn(this,Gn(this,kn.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=kn.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?kt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Bn}toLocaleString(e=f,t={}){return this.isValid?kt.create(this.loc.clone(t),e).formatDateTime(this):Bn}toLocaleParts(e={}){return this.isValid?kt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const i="extended"===e;let a=er(this,i);return a+="T",a+=tr(this,i,t,n,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?er(this,"extended"===e):null}toISOWeekDate(){return Qn(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:i="extended"}={}){if(!this.isValid)return null;return(r?"T":"")+tr(this,"extended"===i,t,e,n,s)}toRFC2822(){return Qn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Qn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?er(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Qn(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Bn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return kn.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=(o=t,Array.isArray(o)?o:[o]).map(kn.normalizeUnit),i=e.valueOf()>this.valueOf(),a=Tn(i?this:e,i?e:this,s,r);var o;return i?a.negate():a}diffNow(e="milliseconds",t={}){return this.diff(mr.now(),e,t)}until(e){return this.isValid?An.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,n)<=r&&r<=s.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||mr.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),ur(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?ur(e.base||mr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(mr.isDateTime))throw new l("min requires all arguments be DateTimes");return Re(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(mr.isDateTime))throw new l("max requires all arguments be DateTimes");return Re(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n;return Wn(ee.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return mr.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:r=null}=t,s=ee.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new Rn(s,e)}static fromFormatParser(e,t,n={}){if(je(e)||je(t))throw new l("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:s=null}=n,i=ee.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});if(!i.equals(t.locale))throw new l(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${t.locale}`);const{result:a,zone:o,specificOffset:c,invalidReason:u}=t.explainFromTokens(e);return u?mr.invalid(u):Xn(a,o,n,`format ${t.format}`,e,c)}static get DATE_SHORT(){return f}static get DATE_MED(){return m}static get DATE_MED_WITH_WEEKDAY(){return p}static get DATE_FULL(){return g}static get DATE_HUGE(){return y}static get TIME_SIMPLE(){return w}static get TIME_WITH_SECONDS(){return v}static get TIME_WITH_SHORT_OFFSET(){return b}static get TIME_WITH_LONG_OFFSET(){return _}static get TIME_24_SIMPLE(){return k}static get TIME_24_WITH_SECONDS(){return x}static get TIME_24_WITH_SHORT_OFFSET(){return A}static get TIME_24_WITH_LONG_OFFSET(){return S}static get DATETIME_SHORT(){return O}static get DATETIME_SHORT_WITH_SECONDS(){return T}static get DATETIME_MED(){return E}static get DATETIME_MED_WITH_SECONDS(){return C}static get DATETIME_MED_WITH_WEEKDAY(){return M}static get DATETIME_FULL(){return D}static get DATETIME_FULL_WITH_SECONDS(){return I}static get DATETIME_HUGE(){return N}static get DATETIME_HUGE_WITH_SECONDS(){return j}}function pr(e){if(mr.isDateTime(e))return e;if(e&&e.valueOf&&$e(e.valueOf()))return mr.fromJSDate(e);if(e&&"object"==typeof e)return mr.fromObject(e);throw new l(`Unknown datetime argument: ${e}, of type ${typeof e}`)}t.DateTime=mr,t.Duration=kn,t.FixedOffsetZone=ne,t.IANAZone=V,t.Info=Sn,t.Interval=An,t.InvalidZone=re,t.Settings=we,t.SystemZone=P,t.VERSION="3.5.0",t.Zone=$},81843:function(e,t){var n,r,s;!function(i,a){"use strict";"object"==typeof e.exports?e.exports=a():(r=[],void 0===(s="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=s))}(0,(function(){"use strict";var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){if(!e)return!0;if(s(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function r(t){return e.call(t)}var s=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(e){var t=parseInt(e);return t.toString()===e?t:e}function a(e){var a,o,l=function(e){return Object.keys(l).reduce((function(t,n){return"create"===n||"function"==typeof l[n]&&(t[n]=l[n].bind(l,e)),t}),{})};function c(e,t){if(a(e,t))return e[t]}function u(e,t,n,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return u(e,t.split(".").map(i),n,r);var s=t[0],a=o(e,s);return 1===t.length?(void 0!==a&&r||(e[s]=n),a):(void 0===a&&("number"==typeof t[1]?e[s]=[]:e[s]={}),u(e[s],t.slice(1),n,r))}return a=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,n){return"number"==typeof n&&Array.isArray(e)||t(e,n)},o=e.includeInheritedProps?function(e,t){"string"!=typeof t&&"number"!=typeof t&&(t=String(t));var n=c(e,t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(e,t){return c(e,t)},l.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var a=0;a<r.length;a++){var o=i(r[a]);if(!("number"==typeof o&&s(n)&&o<n.length||(e.includeInheritedProps?o in Object(n):t(n,o))))return!1;n=n[o]}return!0},l.ensureExists=function(e,t,n){return u(e,t,n,!0)},l.set=function(e,t,n,r){return u(e,t,n,r)},l.insert=function(e,t,n,r){var i=l.get(e,t);r=~~r,s(i)||(i=[],l.set(e,t,i)),i.splice(r,0,n)},l.empty=function(e,t){var i,o;if(!n(t)&&(null!=e&&(i=l.get(e,t)))){if("string"==typeof i)return l.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}(i))return l.set(e,t,!1);if("number"==typeof i)return l.set(e,t,0);if(s(i))i.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===r(e)}(i))return l.set(e,t,null);for(o in i)a(i,o)&&delete i[o]}}},l.push=function(e,t){var n=l.get(e,t);s(n)||(n=[],l.set(e,t,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},l.coalesce=function(e,t,n){for(var r,s=0,i=t.length;s<i;s++)if(void 0!==(r=l.get(e,t[s])))return r;return n},l.get=function(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return l.get(e,t.split("."),n);var r=i(t[0]),s=o(e,r);return void 0===s?n:1===t.length?s:l.get(e[r],t.slice(1),n)},l.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(n(t))return e;if("string"==typeof t)return l.del(e,t.split("."));var r=i(t[0]);return o(e,r),a(e,r)?1!==t.length?l.del(e[r],t.slice(1)):(s(e)?e.splice(r,1):delete e[r],e):e},l}var o=a();return o.create=a,o.withInheritedProps=a({includeInheritedProps:!0}),o}))},30503:e=>{e.exports={webOrigin:["https://extension.automa.site","https://www.automa.site","https://www.automa.vercel.app","http://localhost:3000","http://localhost:4000"],baseApiUrl:"https://api.automa.site/v1",googleApiKey:"AIzaSyDFnZRieCTa1oztr3j2fFAzE-Y1N7f1CzI",googleProjectId:57312334836,apApiUrl:"https://api-aipower.automa.site",apHomeUrl:"https://aipower.automa.site",apCreateWorkflowUrl:"https://aipower.automa.site/resource?resource=flow&active=resources"}},2518:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});const r=!1},79911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const r=new(n(85334).ZP)("storage");r.version(2).stores({tablesData:"++id, tableId",tablesItems:"++id, name, createdAt, modifiedAt",variables:"++id, &name",credentials:"++id, &name"});const s=r},79667:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(50543),s=n(55278);const i={ON_EVENT:"browser-api:on-browser-event",TOGGLE:"browser-api:toggle-browser-event-listener"};function a(e,...t){r.m.sendMessage(i.ON_EVENT,{name:e,args:t},"offscreen")}class o{static#e;static get instance(){return this.#e||(this.#e=new o),this.#e}static RuntimeEvents=i;#t;#n;#r;#s;constructor(){this.#t={},this.#s={},this.#n={},this.#r=new Set}createEventListener(e){if(this.#n[e])return this.#n[e];this.#t[e]||(this.#t[e]=[]);return this.#n[e]={addListener:t=>{this.#t[e].push(t),this.#r.has(e)||r.m.sendMessage(i.TOGGLE,{name:e,type:"add"},"background").then((()=>{this.#r.add(e)}))},hasListener:t=>this.#t[e].includes(t),hasListeners:()=>this.#t[e].length>0,removeListener:t=>{const n=this.#t[e].indexOf(t);-1!==n&&(this.#t[e].splice(n,1),this.#t[e].length>0||(r.m.sendMessage(i.TOGGLE,{name:e,type:"remove"},"background"),delete this.#n[e]))}},this.#n[e]}onBrowserEventListener(e){e.name&&this.#t[e.name]&&this.#t[e.name].forEach((t=>t(...e.args)))}onToggleBrowserEventListener({name:e,type:t}){const n="add"===t;if(n&&this.#s[e])return;if(!n&&!this.#s[e])return;const r=s.e.find((t=>t.path===e&&t.isEvent))?.api();if(!s.e)return;const i=n?"addListener":"removeListener",o=n?a.bind(null,e):this.#s[e];n&&(this.#s[e]=o),r[i](o)}}const l=o},28875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(50543),s=n(26784),i=n(81843),a=n.n(i),o=n(24839),l=n.n(o),c=n(79667),u=n(55278);const d="tabs"in l();function h(e,...t){const n=(0,s.m)(t);return r.m.sendMessage("browser-api",{name:e,args:n},"background")}class f{static async isContentScriptInjected(e,t){if(!d)return h("contentScript.isContentScriptInjected",...arguments);try{return await l().tabs.sendMessage(e.tabId,{type:t||"content-script-exists"},{frameId:e.allFrames?void 0:e.frameId}),!0}catch(e){return!1}}static async inject({file:e,target:t,injectImmediately:n,waitUntilInjected:r}){if(!d)return h("contentScript.inject",...arguments);const s=Object.hasOwn(t,"frameId")&&!t.allFrames?t.frameId:void 0;if(l().tabs.injectContentScript?await l().tabs.executeScript(t.tabId,{file:e,frameId:s,allFrames:t.allFrames}):await l().scripting.executeScript({target:{tabId:t.tabId,allFrames:t.allFrames,frameIds:"number"==typeof s?[s]:void 0},files:[e],injectImmediately:n}),!r)return!0;const i=r.maxTry??3,a=r.timeoutMs??1e3;let o=0;return new Promise((e=>{const n=async()=>{try{if(o>i)return void e(!1);o+=1;if(await f.isContentScriptInjected(t,r.messageId))return void e(!0);setTimeout((()=>n()),a)}catch(e){console.error(e),setTimeout((()=>n()),a)}};n()}))}static async isInjected({tabId:e,allFrames:t,frameId:n},r){if(!d)return h("contentScript.isInjected",...arguments);try{return await l().tabs.sendMessage(e,{type:r||"content-script-exists"},{frameId:t?void 0:n}),!0}catch(e){return!1}}}class m{static runtimeMessageHandler({args:e,name:t}){const n=(0,s.Y)(e),r=a().get(this,t);if(!r)throw new Error(`"${t}" is invalid method`);return n?r(...n):r()}static runtime=l().runtime;static tabs;static proxy;static storage;static windows;static debugger;static webNavigation;static permissions;static downloads;static notifications;static browserAction;static extension;static contentScript=f}u.e.forEach((e=>{let t;t=d?e.api():e.isEvent?c.Z.instance.createEventListener(e.path):(...t)=>h(e.path,...t),a().set(m,e.path,t)}));const p=m},55278:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var r=n(24839),s=n.n(r);const i=[{api:()=>s().tabs.get,path:"tabs.get"},{api:()=>chrome.tabs.group,path:"tabs.group"},{api:()=>s().tabs.query,path:"tabs.query"},{api:()=>s().tabs.update,path:"tabs.update"},{api:()=>s().tabs.create,path:"tabs.create"},{api:()=>s().tabs.remove,path:"tabs.remove"},{api:()=>s().tabs.reload,path:"tabs.reload"},{api:()=>s().tabs.goBack,path:"tabs.goBack"},{api:()=>s().tabs.setZoom,path:"tabs.setZoom"},{api:()=>s().tabs.goForward,path:"tabs.goForward"},{api:()=>s().tabs.captureTab,path:"tabs.captureTab"},{api:()=>s().tabs.captureVisibleTab,path:"tabs.captureVisibleTab"},{api:()=>s().tabs.sendMessage,path:"tabs.sendMessage"},{isEvent:!0,api:()=>s().tabs.onRemoved,path:"tabs.onRemoved"},{isEvent:!0,path:"webNavigation.onCreatedNavigationTarget",api:()=>s().webNavigation.onCreatedNavigationTarget},{isEvent:!0,path:"webNavigation.onErrorOccurred",api:()=>s().webNavigation.onErrorOccurred},{path:"webNavigation.getAllFrames",api:()=>s().webNavigation.getAllFrames},{api:()=>s().windows.get,path:"windows.get"},{api:()=>s().windows.update,path:"windows.update"},{api:()=>s().windows.create,path:"windows.create"},{api:()=>s().windows.getAll,path:"windows.getAll"},{api:()=>s().windows.remove,path:"windows.remove"},{api:()=>s().windows.getCurrent,path:"windows.getCurrent"},{isEvent:!0,path:"windows.onRemoved",api:()=>s().windows.onRemoved},{isEvent:!0,path:"storage.onChanged",api:()=>s().storage.onChanged},{api:()=>s().storage.local.get,path:"storage.local.get"},{api:()=>s().storage.local.set,path:"storage.local.set"},{api:()=>s().storage.local.remove,path:"storage.local.remove"},{api:()=>s().proxy.settings.clear,path:"proxy.settings.clear"},{api:()=>s().proxy.settings.set,path:"proxy.settings.set"},{isEvent:!0,path:"debugger.onEvent",api:()=>chrome.debugger.onEvent},{path:"debugger.detach",api:()=>chrome.debugger.detach},{path:"debugger.attach",api:()=>chrome.debugger.attach},{path:"debugger.sendCommand",api:()=>chrome.debugger.sendCommand},{path:"permissions.contains",api:()=>s().permissions.contains},{path:"permissions.request",api:()=>s().permissions.request},{path:"cookies.get",api:()=>s().cookies?.get},{path:"cookies.getAll",api:()=>s().cookies?.getAll},{path:"cookies.remove",api:()=>s().cookies?.remove},{path:"cookies.set",api:()=>s().cookies?.set},{path:"downloads.search",api:()=>s().downloads?.search},{path:"downloads.download",api:()=>s().downloads?.download},{isEvent:!0,path:"downloads.onCreated",api:()=>s().downloads?.onCreated},{isEvent:!0,path:"downloads.onDeterminingFilename",api:()=>chrome.downloads?.onDeterminingFilename},{isEvent:!0,path:"downloads.onChanged",api:()=>s().downloads?.onChanged},{path:"browserAction.setBadgeText",api:()=>(s().action||s().browserAction).setBadgeText},{path:"notifications.create",api:()=>s().notifications?.create},{path:"extension.isAllowedFileSchemeAccess",api:()=>s().extension.isAllowedFileSchemeAccess}]},9044:(e,t,n)=>{"use strict";n.d(t,{$1:()=>c,a8:()=>o,tO:()=>l,wr:()=>u});var r=n(28875),s=n(30503),i=n.n(s),a=n(87360);async function o(e,t={}){const n=e.startsWith("/")?e:`/${e}`,s={"Content-Type":"application/json",...t?.headers||{}},{session:a}=await r.Z.storage.local.get("session")||{session:null};if(a&&t?.auth){delete t.auth;let e=a.access_token;if(Date.now()>1e3*(a.expires_at-2e3)){const t=await fetch(`${i().baseApiUrl}/me/refresh-auth-session?token=${a.refresh_token}`),n=await t.json();if(!t.ok)throw new Error(n.message);await r.Z.storage.local.set({session:n}),e=n.access_token}s.Authorization=`Bearer ${e}`}const o=`${i().baseApiUrl}${n}`;return fetch(o,{...t,headers:s})}async function l(e,t,n=!0){const r="boolean"==typeof n,s={ttl:1e5,storage:sessionStorage,useCache:!r||n};!r&&(0,a.Kn)(n)&&Object.assign(s,n);const i=s.ttl,o=Date.now()-i,l=`cache-time:${e}`,c=(0,a.Rx)(s.storage.getItem(e),null),u=+s.storage.getItem(l)||Date.now();if(s.useCache&&c&&o<u)return c;const d=await t();let h=d;return d?.cacheData&&(h=d?.cacheData),s.storage.setItem(l,Date.now()),s.storage.setItem(e,JSON.stringify(h)),d}function c(){let e=0;const t=async()=>{try{const{sessionToken:n}=await r.Z.storage.local.get("sessionToken");if(!n)return null;if(400===(await fetch(`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${n.access}`)).status&&n.refresh&&e<=3){const r=await o(`/me/refresh-session?token=${n.refresh}`,{auth:!0}),s=await r.json();if(!r.ok)throw new Error(s.message);e+=1;return await t()}return null}catch(e){console.error(e)}return null};return t()}async function u(e,t={},n={}){const{sessionToken:s}=await r.Z.storage.local.get("sessionToken");if(!s)throw new Error("unauthorized");const{search:i,origin:l,pathname:c}=new URL(e),u=new URLSearchParams(i);u.set("access_token",s.access);let d=0;const h=n?.tryCount||3,f=async()=>{const e=await fetch(`${l}${c}?${u.toString()}`,t),i=(0,a.Rx)(await e.text(),null),m=403===e.status&&i?.error?.message.includes("insufficient authentication scopes");if((!s.access||401===e.status||m)&&s.refresh){const e=await o(`/me/refresh-session?token=${s.refresh}`,{auth:!0}),t=await e.json();if(!e.ok)throw new Error(t.message);if(u.set("access_token",t.token),s.access=t.token,await r.Z.storage.local.set({sessionToken:s}),d<h){d+=1;return await f()}throw new Error("unauthorized")}if(!e.ok)throw new Error(i?.error?.message,{cause:i});return n?.response?{response:e,result:i}:i};return await f()}},5072:(e,t,n)=>{"use strict";function r(e){return new Promise((t=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)}))}function s(e,t={}){return e.startsWith("http")?async function(e,t){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const s=t.responseType||"blob",i=await n[s]();if(t.returnValue)return i;if(URL.createObjectURL)return{objUrl:URL.createObjectURL(i),path:e,type:i.type};return{path:e,objUrl:await r(i),type:i.type}}(e,t):function(e,t){return new Promise(((n,r)=>{if(!/\.(.*)/.test(e))return void r(new Error(`"${e}" is invalid file path.`));const s=e?.startsWith("file://")?e:`file://${e}`;if("XMLHttpRequest"in self){const i=new XMLHttpRequest;i.responseType=t.responseType||"blob",i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE)if(0===i.status||200===i.status){if(t.returnValue)return void n(i.response);const r=URL.createObjectURL(i.response);n({path:e,objUrl:r,type:i.response.type})}else r(new Error(i.statusText))},i.onerror=function(){r(new Error(i.statusText||`Can't find a file with "${e}" path`))},i.open("GET",s),i.send()}else fetch(s).then((e=>{if(!e.ok)throw new Error(e.statusText);return t.returnValue?e.text():e.blob()})).then((r=>{if(t.returnValue)n(r);else if(r)if(URL.createObjectURL){const t=URL.createObjectURL(r);n({path:e,objUrl:t,type:r.type})}else{const t=new FileReader;t.onload=()=>{n({path:e,objUrl:t.result,type:r.type})},t.readAsDataURL(r)}})).catch(r)}))}(e,t)}n.d(t,{Z:()=>s,f:()=>r})},87360:(e,t,n)=>{"use strict";n.d(t,{AG:()=>f,Ac:()=>d,Kn:()=>g,LK:()=>v,No:()=>c,Rx:()=>h,_v:()=>l,aX:()=>y,cb:()=>w,ex:()=>u,fr:()=>a,g9:()=>m,mq:()=>o,zW:()=>p});var r=n(28875),s=n(24839),i=n.n(s);async function a(){try{const e={active:!0,url:"*://*/*"},t=(await i().windows.getLastFocused({populate:!0,windowTypes:["normal"]})).id;t?e.windowId=t:e.lastFocusedWindow=!0;const[n]=await i().tabs.query(e);return n}catch(e){return console.error(e),null}}function o(e){return/^([(/@]|id\()/.test(e)}function l(e=500){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function c(e={}){if(!e)return null;if(e.drawflow){const t=Object.values(e.drawflow?.Home?.data??{});return t?t.find((({name:e})=>"trigger"===e)):null}return e.nodes?e.nodes.find((e=>"trigger"===e.label)):null}function u(e){const t=new Map,n=[[]];return e.forEach((e=>{const r=Object.keys(e),s=[];r.forEach((r=>{t.has(r)||(t.set(r,t.size),n[0].push(r));const i=e[r],a=t.get(r);s[a]="object"==typeof i?JSON.stringify(i):i})),n.push([...s])})),n}function d(e){let t=0;const n=e.shift(),r=[];for(let s=0;s<e.length;s+=1){const i={};for(let r=0;r<e[s].length;r+=1){let a=n[r];a||(t+=1,a=`_row${t}`,n.push(a)),i[a]=e[s][r]}r.push(i)}return r}function h(e,t){try{return JSON.parse(e)}catch(e){return t}}function f(e,t){const n=document.createElement("a");n.download=e,n.href=t,n.dispatchEvent(new MouseEvent("click")),n.remove()}function m(e,t){const n=Math.round((t-e)/1e3),r=Math.floor(n/60),s=Math.floor(n%60);return`${i=r,a="m",i>0?`${i}${a}`:""} ${s}s`;var i,a}function p(e,t=!1){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,n)=>0!==n||t?e.toUpperCase():e.toLowerCase())).replace(/\s+|[-]/g,"")}function g(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e){return!/\S/.test(e)}async function v(e){try{await r.Z.storage.local.remove(`state:${e.id}`);const t=h(e.drawflow,null),n=t&&t.drawflow.Home.data;return n&&Object.values(n).forEach((({name:e,id:t})=>{"loop-data"===e&&localStorage.removeItem(`index:${t}`)})),!0}catch(e){return console.error(e),!1}}},50543:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(24839),s=n.n(r);const i=(e,t)=>e?`${e}--${t}`:t;function a(e="",t={},n=""){let r={name:i(n,e),data:t};return s().runtime.sendMessage(r)}class o{static sendMessage=a;constructor(e=""){this.listeners={},this.prefix=e,this.listener=this.listener.bind(this)}on(e,t){return Object.hasOwn(this.listeners,e)?(console.error(`You already added ${e}`),this.on):(this.listeners[i(this.prefix,e)]=t,this.on)}listener(e,t){try{false;const n=this.listeners[e.name],r=n&&n.call({message:e,sender:t},e.data,t),s=e.name.split("--")[0];return s&&s!==e.name?s===this.prefix?r?r instanceof Promise?r:Promise.resolve(r):Promise.resolve():void 0:r?r instanceof Promise?r:Promise.resolve(r):Promise.resolve()}catch(e){return Promise.reject(new Error(`Unhandled Background Error: ${String(e)}`))}}sendMessage(e,t){return a(e,t,this.prefix)}}},26784:(e,t,n)=>{"use strict";function r(e){if("function"==typeof e)return{__type:"function",__value:e.toString()};if(Array.isArray(e))return e.map((e=>r(e)));if(e&&"object"==typeof e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}return e}function s(e){if(e&&"object"==typeof e){if("function"===e.__type)return new Function("return "+e.__value)();if(Array.isArray(e))return e.map((e=>s(e)));const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=s(e[n]));return t}return e}n.d(t,{Y:()=>s,m:()=>r})},72112:(e,t,n)=>{"use strict";n.d(t,{Hh:()=>h,SR:()=>p,TE:()=>y,XB:()=>m,Xs:()=>c,fs:()=>f,k:()=>u,k$:()=>l,uh:()=>g,xq:()=>d});var r=n(28875),s=n(50543),i=n(96973),a=n(24839),o=n.n(a);function l(e,t={}){const n=(0,i.k)("1234567890abcdef",5);return new Promise((r=>{const s=n();document.getElementById("sandbox").contentWindow.postMessage({id:s,type:e,...t},"*");const i=({data:e})=>{"sandbox"===e?.type&&e?.id===s&&(window.removeEventListener("message",i),r(e.result))};window.addEventListener("message",i)}))}async function c(e){try{const t=await r.Z.webNavigation.getAllFrames({tabId:e});return t.reduce(((e,{frameId:t,url:n})=>(e["about:blank"===n?"":n]=t,e)),{})}catch(e){return console.error(e),{}}}function u(e,t,n={}){return new Promise((s=>{r.Z.debugger.sendCommand({tabId:e},t,n,s)}))}async function d(e,t){try{return t&&e!==t&&await r.Z.debugger.detach({tabId:t}),await r.Z.debugger.attach({tabId:e},"1.3"),await r.Z.debugger.sendCommand({tabId:e},"Page.enable"),!0}catch(e){return console.error("Failed to attach debugger:",e),!1}}function h({tabId:e,listenError:t=!1,ms:n=1e4}){return new Promise(((s,i)=>{let a=null;const o=["net::ERR_BLOCKED_BY_CLIENT","net::ERR_ABORTED"],l=t=>{t.tabId!==e||0!==t.frameId||o.includes(t.error)||(clearTimeout(a),r.Z.webNavigation.onErrorOccurred.removeListener(l),i(new Error(t.error)))};n>0&&(a=setTimeout((()=>{r.Z.webNavigation.onErrorOccurred.removeListener(l),i(new Error("Timeout"))}),n)),t&&r.Z.webNavigation.onErrorOccurred.addListener(l);const c=()=>{r.Z.tabs.get(e).then((e=>{e?"loading"!==e.status?(clearTimeout(a),r.Z.webNavigation.onErrorOccurred.removeListener(l),s()):setTimeout((()=>{c()}),1e3):i(new Error("no-tab"))}))};c()}))}function f(e,t){if("any"===t)return e;let n=e;switch(t){case"integer":n="number"!=typeof e?+e?.replace(/\D+/g,""):e;break;case"boolean":n=Boolean(e);break;case"array":n=Array.from(e);break;case"string":n=String(e)}return n}function m(e){return`\nfunction findData(obj, path) {\n  const paths = path.split('.');\n  const isWhitespace = paths.length === 1 && !/\\S/.test(paths[0]);\n\n  if (path.startsWith('$last') && Array.isArray(obj)) {\n    paths[0] = obj.length - 1;\n  }\n\n  if (paths.length === 0 || isWhitespace) return obj;\n  else if (paths.length === 1) return obj[paths[0]];\n\n  let result = obj;\n\n  for (let i = 0; i < paths.length; i++) {\n    if (result[paths[i]] == undefined) {\n      return undefined;\n    } else {\n      result = result[paths[i]];\n    }\n  }\n\n  return result;\n}\nfunction automaRefData(keyword, path = '') {\n  const data = ${e}[keyword];\n\n  if (!data) return;\n\n  return findData(data, path);\n}\n  `}function p({target:e,scripts:t,frameSelector:n}){return o().scripting.executeScript({target:e,world:"MAIN",args:[t,n||null],func:(e,t)=>{let n=document;if(t){const e=document.querySelector(t)?.contentDocument;if(!e)return;n=e}e.forEach((e=>{const t=`block--${e.id}`;if(n.querySelector(`.automa-custom-js[${t}]`))return;const r=n.createElement("script");r.textContent=e.data.code,r.setAttribute(t,""),r.classList.add("automa-custom-js"),n.documentElement.appendChild(r)}))}})}async function g({target:e,debugMode:t,options:n={},injectOptions:r={}},i){let a="";"function"==typeof i?a=i.toString():"string"==typeof i&&(a=i);try{return await s.m.sendMessage("check-csp-and-inject",{target:e,debugMode:t,callback:a,options:n,injectOptions:r},"background")}catch(e){return console.error("CSP check error:",e),{isBlocked:!1,value:null}}}function y(e){return new Promise(((t,n)=>{if(!navigator.clipboard)return function(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(t)}(e),void t(!0);navigator.clipboard.writeText(e).then((()=>{t(!0)})).catch((e=>{n(e)}))}))}},24839:function(e,t){var n,r,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],n=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,i=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",o=(e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((s,a)=>{if(t.fallbackToNoCallback)try{n[e](...r,i({resolve:s,reject:a},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(n[e](...r),s()):n[e](...r,i({resolve:s,reject:a},t))}))},l=(e,t,n)=>new Proxy(t,{apply:(t,r,s)=>n.call(r,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const u=(e,t={},n={})=>{let r=Object.create(null),s={has:(t,n)=>n in e||n in r,get(s,i,a){if(i in r)return r[i];if(!(i in e))return;let d=e[i];if("function"==typeof d)if("function"==typeof t[i])d=l(e,e[i],t[i]);else if(c(n,i)){let t=o(i,n[i]);d=l(e,e[i],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,i)||c(n,i)))d=u(d,t[i],n[i]);else{if(!c(n,"*"))return Object.defineProperty(r,i,{configurable:!0,enumerable:!0,get:()=>e[i],set(t){e[i]=t}}),d;d=u(d,t[i],n["*"])}return r[i]=d,d},set:(t,n,s,i)=>(n in r?r[n]=s:e[n]=s,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},i=Object.create(e);return new Proxy(i,s)},d=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),h=new r((e=>"function"!=typeof e?e:function(t){const n=u(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),f=new r((e=>"function"!=typeof e?e:function(t,n,r){let i,a,o=!1,l=new Promise((e=>{i=function(t){o=!0,e(t)}}));try{a=e(t,n,i)}catch(e){a=Promise.reject(e)}const c=!0!==a&&s(a);if(!0!==a&&!c&&!o)return!1;const u=e=>{e.then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return u(c?a:l),!0})),m=({reject:n,resolve:r},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?n(new Error(s.message)):r(s)},p=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,t)=>{const s=m.bind(null,{resolve:e,reject:t});r.push(s),n.sendMessage(...r)}))},g={devtools:{network:{onRequestFinished:d(h)}},runtime:{onMessage:d(f),onMessageExternal:d(f),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},u(e,g,n)};e.exports=n(chrome)}},void 0===(s="function"==typeof n?n.apply(t,r):n)||(e.exports=s)},50810:()=>{},85334:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>Xn});const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,s=Object.keys,i=Array.isArray;function a(e,t){return"object"!=typeof t||s(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const o=Object.getPrototypeOf,l={}.hasOwnProperty;function c(e,t){return l.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(o(e))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(t).forEach((n=>{h(e,n,t[n])}))}const d=Object.defineProperty;function h(e,t,n,r){d(e,t,a(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}const m=Object.getOwnPropertyDescriptor;function p(e,t){let n;return m(e,t)||(n=o(e))&&p(n,t)}const g=[].slice;function y(e,t,n){return g.call(e,t,n)}function w(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function b(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function k(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=k(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return null==o?void 0:k(o,t.substr(a+1))}}function x(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var r=0,s=t.length;r<s;++r)x(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var o=t.substr(0,a),l=t.substr(a+1);if(""===l)void 0===n?i(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&c(e,o)||(u=e[o]={}),x(u,l,n)}}else void 0===n?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function A(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}const S=[].concat;function O(e){return S.apply([],e)}const T="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),E=T.map((e=>r[e]));_(T,(e=>[e,!0]));let C=null;function M(e){C="undefined"!=typeof WeakMap&&new WeakMap;const t=D(e);return C=null,t}function D(e){if(!e||"object"!=typeof e)return e;let t=C&&C.get(e);if(t)return t;if(i(e)){t=[],C&&C.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(D(e[n]))}else if(E.indexOf(e.constructor)>=0)t=e;else{const n=o(e);for(var s in t=n===Object.prototype?{}:Object.create(n),C&&C.set(e,t),e)c(e,s)&&(t[s]=D(e[s]))}return t}const{toString:I}={};function N(e){return I.call(e).slice(8,-1)}const j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",$="symbol"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},F={};function P(e){var t,n,r,s;if(1===arguments.length){if(i(e))return e.slice();if(this===F&&"string"==typeof e)return[e];if(s=$(e)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const L="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var R="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function W(e,t){R=e,V=t}var V=()=>!0;const B=!new Error("").stack;function U(){if(B)try{throw U.arguments,new Error}catch(e){return e}return new Error}function q(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(V).map((e=>"\n"+e)).join("")):""}var z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(z),Z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(e,t){this._e=U(),this.name=e,this.message=t}function Y(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function J(e,t,n,r){this._e=U(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=U(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}f(H).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(J).from(H),f(G).from(H);var X=K.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Q=H;var ee=K.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=U(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=Z[t]||n,this.inner=null)}return f(r).from(Q),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=z.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=K.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function re(){}function se(e){return e}function ie(e,t){return null==e||e===se?t:function(n){return t(e(n))}}function ae(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function oe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ae(r,this.onsuccess):r),s&&(this.onerror=this.onerror?ae(s,this.onerror):s),void 0!==i?i:n}}function le(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ae(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ae(r,this.onerror):r)}}function ce(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);a(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?ae(s,this.onsuccess):s),i&&(this.onerror=this.onerror?ae(i,this.onerror):i),void 0===r?void 0===o?void 0:o:a(r,o)}}function ue(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}ne.ModifyError=J,ne.DexieError=H,ne.BulkError=G;var he={};const fe=100,[me,pe,ge]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,o(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,o(t),e]})(),ye=pe&&pe.then,we=me&&me.constructor,ve=!!ge;var be=!1,_e=ge?()=>{ge.then(qe)}:r.setImmediate?setImmediate.bind(null,qe):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(qe,0)},ke=function(e,t){De.push([e,t]),Ae&&(_e(),Ae=!1)},xe=!0,Ae=!0,Se=[],Oe=[],Te=null,Ee=se,Ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{pt(e[0],e[1])}catch(e){}}))}},Me=Ce,De=[],Ie=0,Ne=[];function je(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Me;if(R&&(this._stackHolder=U(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==he)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Le(this,this._value))}this._state=null,this._value=null,++t.ref,Pe(this,e)}const $e={get:function(){var e=Me,t=et;function n(n,r){var s=!e.global&&(e!==Me||t!==et);const i=s&&!st();var a=new je(((t,a)=>{We(this,new Fe(ht(n,e,s,i),ht(r,e,s,i),t,a,e))}));return R&&Ue(a,this),a}return n.prototype=he,n},set:function(e){h(this,"then",e&&e.prototype===he?$e:{get:function(){return e},set:$e.set})}};function Fe(e,t,n,r,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Pe(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&"function"==typeof t.then?Pe(e,((e,n)=>{t instanceof je?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Re(e)),n&&Ke()}}),Le.bind(null,e))}catch(t){Le(e,t)}}function Le(e,t){if(Oe.push(t),null===e._state){var n=e._lib&&ze();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=p(t,"stack");t._promise=e,h(t,"stack",{get:()=>be?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){Se.some((t=>t._value===e._value))||Se.push(e)}(e),Re(e),n&&Ke()}}function Re(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)We(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Ie&&(++Ie,ke((()=>{0==--Ie&&Ze()}),[]))}function We(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,ke(Ve,[n,e,t])}else e._listeners.push(t)}function Ve(e,t,n){try{Te=t;var r,s=t._value;t._state?r=e(s):(Oe.length&&(Oe=[]),r=e(s),-1===Oe.indexOf(s)&&function(e){for(var t=Se.length;t;)if(Se[--t]._value===e._value)return void Se.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Te=null,0==--Ie&&Ze(),--n.psd.ref||n.psd.finalize()}}function Be(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var s,i,a=e._value;null!=a?(s=a.name||"Error",i=a.message||a,r=q(a,0)):(s=a,i=""),t.push(s+(i?": "+i:"")+r)}return R&&((r=q(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Be(e._prev,t,n)),t}function Ue(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){ze()&&Ke()}function ze(){var e=xe;return xe=!1,Ae=!1,e}function Ke(){var e,t,n;do{for(;De.length>0;)for(e=De,De=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(De.length>0);xe=!0,Ae=!0}function Ze(){var e=Se;Se=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ne.slice(0),n=t.length;n;)t[--n]()}function He(e){return new je(he,!1,e)}function Ye(e,t){var n=Me;return function(){var r=ze(),s=Me;try{return lt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{lt(s,!1),r&&Ke()}}}u(je.prototype,{then:$e,_then:function(e,t){We(this,new Fe(null,null,e,t,Me))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):He(e))):this.then(null,(e=>e&&e.name===t?n(e):He(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),He(t))))},stack:{get:function(){if(this._stack)return this._stack;try{be=!0;var e=Be(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{be=!1}}},timeout:function(e,t){return e<1/0?new je(((n,r)=>{var s=setTimeout((()=>r(new ee.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Ce.env=ct(),u(je,{all:function(){var e=P.apply(null,arguments).map(it);return new je((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>je.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof je)return e;if(e&&"function"==typeof e.then)return new je(((t,n)=>{e.then(t,n)}));var t=new je(he,!0,e);return Ue(t,Te),t},reject:He,race:function(){var e=P.apply(null,arguments).map(it);return new je(((t,n)=>{e.map((e=>je.resolve(e).then(t,n)))}))},PSD:{get:()=>Me,set:e=>Me=e},totalEchoes:{get:()=>et},newPSD:nt,usePSD:ut,scheduler:{get:()=>ke,set:e=>{ke=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new je(((n,r)=>nt(((t,n)=>{var r=Me;r.unhandleds=[],r.onunhandled=n,r.finalize=ae((function(){!function(e){Ne.push((function t(){e(),Ne.splice(Ne.indexOf(t),1)})),++Ie,ke((()=>{0==--Ie&&Ze()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),we&&(we.allSettled&&h(je,"allSettled",(function(){const e=P.apply(null,arguments).map(it);return new je((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>je.resolve(e).then((e=>r[s]={status:"fulfilled",value:e}),(e=>r[s]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),we.any&&"undefined"!=typeof AggregateError&&h(je,"any",(function(){const e=P.apply(null,arguments).map(it);return new je(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>je.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Je={awaits:0,echoes:0,id:0};var Ge=0,Xe=[],Qe=0,et=0,tt=0;function nt(e,t,n,r){var s=Me,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++tt;var o=Ce.env;i.env=ve?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject,nthen:ft(o.nthen,i),gthen:ft(o.gthen,i)}:{},t&&a(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ut(i,e,n,r);return 0===i.ref&&i.finalize(),l}function rt(){return Je.id||(Je.id=++Ge),++Je.awaits,Je.echoes+=fe,Je.id}function st(){return!!Je.awaits&&(0==--Je.awaits&&(Je.id=0),Je.echoes=Je.awaits*fe,!0)}function it(e){return Je.echoes&&e&&e.constructor===we?(rt(),e.then((e=>(st(),e)),(e=>(st(),gt(e))))):e}function at(e){++et,Je.echoes&&0!=--Je.echoes||(Je.echoes=Je.id=0),Xe.push(Me),lt(e,!0)}function ot(){var e=Xe[Xe.length-1];Xe.pop(),lt(e,!1)}function lt(e,t){var n=Me;if((t?!Je.echoes||Qe++&&e===Me:!Qe||--Qe&&e===Me)||dt(t?at.bind(null,e):ot),e!==Me&&(Me=e,n===Ce&&(Ce.env=ct()),ve)){var s=Ce.env.Promise,i=e.env;pe.then=i.nthen,s.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function ct(){var e=r.Promise;return ve?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:pe.then,gthen:e.prototype.then}:{}}function ut(e,t,n,r,s){var i=Me;try{return lt(e,!0),t(n,r,s)}finally{lt(i,!1)}}function dt(e){ye.call(me,e)}function ht(e,t,n,r){return"function"!=typeof e?e:function(){var s=Me;n&&rt(),lt(t,!0);try{return e.apply(this,arguments)}finally{lt(s,!1),r&&dt(st)}}}function ft(e,t){return function(n,r){return e.call(this,ht(n,t),ht(r,t))}}-1===(""+ye).indexOf("[native code]")&&(rt=st=re);const mt="unhandledrejection";function pt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var s,i={promise:t,reason:e};if(r.document&&document.createEvent?((s=document.createEvent("Event")).initEvent(mt,!0,!0),a(s,i)):r.CustomEvent&&a(s=new CustomEvent(mt,{detail:i}),i),s&&r.dispatchEvent&&(dispatchEvent(s),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(s)}catch(e){}R&&s&&!s.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}var gt=je.reject;function yt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Me.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>yt(e,t,n,r)))):gt(s)}return s._promise(t,((e,t)=>nt((()=>(Me.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return gt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return gt(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((()=>yt(e,t,n,r)))}const wt="3.2.7",vt=String.fromCharCode(65535),bt=-1/0,_t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kt="String expected.",xt=[],At="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),St=At,Ot=At,Tt=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Et="__dbnames",Ct="readonly",Mt="readwrite";function Dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const It={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=M(t))[e],t)}class jt{_trans(e,t,n){const r=this._tx||Me.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new ee.NotFound("Table "+s+" not part of transaction");return t(r.idbtrans,r)}const a=ze();try{return r&&r.db===this.db?r===Me.trans?r._promise(e,i,n):nt((()=>r._promise(e,i,n)),{trans:r,transless:Me.transless||Me}):yt(this.db,e,[this.name],i)}finally{a&&Ke()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>{if(e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))){for(let n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort(((e,t)=>e.keyPath.length-t.keyPath.length))[0];if(n&&this.db._maxKey!==vt){const r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((t=>e[t])))}!n&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,a=this.db._deps.indexedDB;function o(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}const[l,c]=t.reduce((([t,n],s)=>{const a=r[s],l=e[s];return[t||a,t||!a?Dt(n,a&&a.multi?e=>{const t=k(e,s);return i(t)&&t.some((e=>o(l,e)))}:e=>o(l,k(e,s))):n]}),[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){a(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=Nt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?je.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{x(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);{const n=k(e,this.schema.primKey.keyPath);if(void 0===n)return gt(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?s(t).forEach((n=>{x(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=Nt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?je.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{x(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?je.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:It}))).then((e=>e.numFailures?je.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=i&&n?e.map(Nt(i)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:o,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${a} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=i&&n?e.map(Nt(i)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:o,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${a} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function $t(e){var t={},n=function(n,r){if(r){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,a=arguments.length;r<a;++r)o(arguments[r]);return n;function o(e,r,a){if("object"!=typeof e){var l;r||(r=ue),a||(a=re);var c={subscribers:[],fire:a,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,a)}};return t[e]=n[e]=c,c}s(l=e).forEach((function(e){var t=l[e];if(i(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new ee.InvalidArgument("Invalid event config");var n=o(e,se,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){b((function(){e.apply(null,t)}))}))}))}}))}}function Ft(e,t){return f(t).from({prototype:e}),t}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Lt(e,t){e.filter=Dt(e.filter,t)}function Rt(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Dt(r(),t()):t,e.justLimit=n&&!r}function Wt(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Vt(e,t,n){const r=Wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Bt(e,t,n,r){const s=e.replayFilter?Dt(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,o=""+a;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(a)),c(i,o)||(i[o]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Ut(Vt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Ut(Vt(e,r,n),Dt(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Ut(e,t,n,r){var s=Ye(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=re}),(t=>{e.fail(t),n=re}))||s(e.value,e,(e=>n=e)),n()}))}))}function qt(e,t){try{const n=zt(e),r=zt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Kt(e),Kt(t));case"Array":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=qt(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function zt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=N(e);return"ArrayBuffer"===n?"binary":n}function Kt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Zt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,gt.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Dt(t.algorithm,e)}_iterate(e,t){return Bt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Bt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Pt(t,!0))return n.count({trans:e,query:{index:Wt(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Bt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function o(e,t){var n=i(e,s),r=i(t,s);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(o)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Pt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Wt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Bt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Pt(t)?Rt(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Rt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Rt(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Lt(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Lt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Dt(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Pt(t,!0)&&t.limit>0)return this._read((e=>{var n=Wt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Lt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var i=s(e),a=i.length;r=function(t){for(var n=!1,r=0;r<a;++r){var s=i[r],o=e[s];k(t,s)!==o&&(x(t,s,o),n=!0)}return n}}const o=t.table.core,{outbound:l,extractKey:c}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const f=[],m=(e,t)=>{const{failures:n,numFailures:r}=t;h+=e-r;for(let e of s(n))d.push(n[e])};return this.clone().primaryKeys().then((s=>{const i=a=>{const d=Math.min(u,s.length-a);return o.getMany({trans:n,keys:s.slice(a,a+d),cache:"immutable"}).then((h=>{const f=[],p=[],g=l?[]:null,y=[];for(let e=0;e<d;++e){const t=h[e],n={value:M(t),primKey:s[a+e]};!1!==r.call(n,n.value,n)&&(null==n.value?y.push(s[a+e]):l||0===qt(c(t),c(n.value))?(p.push(n.value),l&&g.push(s[a+e])):(y.push(s[a+e]),f.push(n.value)))}const w=Pt(t)&&t.limit===1/0&&("function"!=typeof e||e===Ht)&&{index:t.index,range:t.range};return Promise.resolve(f.length>0&&o.mutate({trans:n,type:"add",values:f}).then((e=>{for(let t in e.failures)y.splice(parseInt(t),1);m(f.length,e)}))).then((()=>(p.length>0||w&&"object"==typeof e)&&o.mutate({trans:n,type:"put",keys:g,values:p,criteria:w,changeSpec:"function"!=typeof e&&e}).then((e=>m(p.length,e))))).then((()=>(y.length>0||w&&e===Ht)&&o.mutate({trans:n,type:"delete",keys:y,criteria:w}).then((e=>m(y.length,e))))).then((()=>s.length>a+d&&i(a+u)))}))};return i(0).then((()=>{if(d.length>0)throw new J("Error modifying one or more objects",d,h,f);return s.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Pt(e)&&(e.isPrimKey&&!Ot||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new J("Could not delete some values",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Ht)}}const Ht=(e,t)=>t.value=null;function Yt(e,t){return e<t?-1:e===t?0:1}function Jt(e,t){return e>t?-1:e===t?0:1}function Gt(e,t,n){var r=e instanceof rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Xt(e){return new e.Collection(e,(()=>nn(""))).limit(0)}function Qt(e,t,n,r,s,i){for(var a=Math.min(e.length,r.length),o=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return s(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):s(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;s(e[l],c)<0&&(o=l)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function en(e,t,n,r){var s,i,a,o,l,c,u,d=n.length;if(!n.every((e=>"string"==typeof e)))return Gt(e,kt);function h(e){s=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),a="next"===e?Yt:Jt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));o=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}h("next");var f=new e.Collection(e,(()=>tn(o[0],l[d-1]+r)));f._ondirectionchange=function(e){h(e)};var m=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if("string"!=typeof s)return!1;var h=i(s);if(t(h,l,m))return!0;for(var f=null,p=m;p<d;++p){var g=Qt(s,h,o[p],l[p],a,c);null===g&&null===f?m=p+1:(null===f||a(f,g)>0)&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1})),f}function tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nn(e){return{type:1,lower:e,upper:e}}class rn{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Xt(this):new this.Collection(this,(()=>tn(e,t,!n,!r)))}catch(e){return Gt(this,_t)}}equals(e){return null==e?Gt(this,_t):new this.Collection(this,(()=>nn(e)))}above(e){return null==e?Gt(this,_t):new this.Collection(this,(()=>tn(e,void 0,!0)))}aboveOrEqual(e){return null==e?Gt(this,_t):new this.Collection(this,(()=>tn(e,void 0,!1)))}below(e){return null==e?Gt(this,_t):new this.Collection(this,(()=>tn(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Gt(this,_t):new this.Collection(this,(()=>tn(void 0,e)))}startsWith(e){return"string"!=typeof e?Gt(this,kt):this.between(e,e+vt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):en(this,((e,t)=>0===e.indexOf(t[0])),[e],vt)}equalsIgnoreCase(e){return en(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=P.apply(F,arguments);return 0===e.length?Xt(this):en(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=P.apply(F,arguments);return 0===e.length?Xt(this):en(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,vt)}anyOf(){const e=P.apply(F,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Gt(this,_t)}if(0===e.length)return Xt(this);const n=new this.Collection(this,(()=>tn(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const a=n.key;for(;t(a,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(a,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[bt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=P.apply(F,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Gt(this,_t)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[bt,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,a=this._max;if(0===e.length)return Xt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const o=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=r;function d(e,t){return u(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=a(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),c.sort(d)}catch(e){return Gt(this,_t)}let h=0;const f=l?e=>r(e,c[h][1])>0:e=>r(e,c[h][1])>=0,m=o?e=>s(e,c[h][0])>0:e=>s(e,c[h][0])>=0;let p=f;const g=new this.Collection(this,(()=>tn(c[0][0],c[c.length-1][1],!o,!l)));return g._ondirectionchange=e=>{"next"===e?(p=f,u=r):(p=m,u=s),c.sort(d)},g._addAlgorithm(((e,t,n)=>{for(var s=e.key;p(s);)if(++h,h===c.length)return t(n),!1;return!!function(e){return!f(e)&&!m(e)}(s)||(0===this._cmp(s,c[h][1])||0===this._cmp(s,c[h][0])||t((()=>{u===r?e.continue(c[h][0]):e.continue(c[h][1])})),!1)})),g}startsWithAnyOf(){const e=P.apply(F,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Xt(this):this.inAnyRange(e.map((e=>[e,e+vt]))):Gt(this,"startsWithAnyOf() only works with strings")}}function sn(e){return Ye((function(t){return an(t),e(t.target.error),!1}))}function an(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const on="storagemutated",ln="x-storagemutated-1",cn=$t(null,on);class un{_lock(){return v(!Me.global),++this._reculock,1!==this._reculock||Me.global||(Me.lockOwnerFor=this),this}_unlock(){if(v(!Me.global),0==--this._reculock)for(Me.global||(Me.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ut(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Me.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ye((t=>{an(t),this._reject(e.error)})),e.onabort=Ye((t=>{an(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Ye((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&cn.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return gt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ee.TransactionInactive);if(this._locked())return new je(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Me])}));if(n)return nt((()=>{var e=new je(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new je(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=je.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new je(((e,r)=>{n.then((n=>t._waitingQueue.push(Ye(e.bind(null,n)))),(e=>t._waitingQueue.push(Ye(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function dn(e,t,n,r,s,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(s?"++":"")+hn(t)}}function hn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:_(n,(e=>[e.name,e]))}}let mn=e=>{try{return e.only([[]]),mn=()=>[[]],[[]]}catch(e){return mn=()=>vt,vt}};function pn(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>k(t,e)}(e):t=>k(t,e)}function gn(e){return[].slice.call(e)}let yn=0;function wn(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function vn(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:s,hasGetAll:a}=function(e,t){const n=gn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=i(t),s=null==t,a={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:s,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:pn(t)},indexes:gn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:s}=e,o={name:t,compound:i(s),keyPath:s,unique:n,multiEntry:r,extractKey:pn(s)};return a[wn(s)]=o,o})),getIndexByKeyPath:e=>a[wn(e)]};return a[":id"]=o.primaryKey,null!=t&&(a[wn(t)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=s.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:s,values:i,range:a}){return new Promise(((o,l)=>{o=Ye(o);const c=e.objectStore(t),u=null==c.keyPath,d="put"===n||"add"===n;if(!d&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:h}=s||i||{length:1};if(s&&i&&s.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return o({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const m=[],p=[];let g=0;const y=e=>{++g,an(e)};if("deleteRange"===n){if(4===a.type)return o({numFailures:g,failures:p,results:[],lastResult:void 0});3===a.type?m.push(f=c.clear()):m.push(f=c.delete(r(a)))}else{const[e,t]=d?u?[i,s]:[i,null]:[s,null];if(d)for(let r=0;r<h;++r)m.push(f=t&&void 0!==t[r]?c[n](e[r],t[r]):c[n](e[r])),f.onerror=y;else for(let t=0;t<h;++t)m.push(f=c[n](e[t])),f.onerror=y}const w=e=>{const t=e.target.result;m.forEach(((e,t)=>null!=e.error&&(p[t]=e.error))),o({numFailures:g,failures:p,results:"delete"===n?s:m.map((e=>e.result)),lastResult:t})};f.onerror=e=>{y(e),w(e)},f.onsuccess=w}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=Ye(r);const i=e.objectStore(t),a=n.length,o=new Array(a);let l,c=0,u=0;const d=e=>{const t=e.target;o[t._pos]=t.result,++u===c&&r(o)},h=sn(s);for(let e=0;e<a;++e)null!=n[e]&&(l=i.get(n[e]),l._pos=e,l.onsuccess=d,l.onerror=h,++c);0===c&&r(o)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=Ye(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=sn(s)})),query:function(e){return n=>new Promise(((s,i)=>{s=Ye(s);const{trans:a,values:o,limit:l,query:c}=n,u=l===1/0?void 0:l,{index:d,range:h}=c,f=a.objectStore(t),m=d.isPrimaryKey?f:f.index(d.name),p=r(h);if(0===l)return s({result:[]});if(e){const e=o?m.getAll(p,u):m.getAllKeys(p,u);e.onsuccess=e=>s({result:e.target.result}),e.onerror=sn(i)}else{let e=0;const t=o||!("openKeyCursor"in m)?m.openCursor(p):m.openKeyCursor(p),n=[];t.onsuccess=r=>{const i=t.result;return i?(n.push(o?i.value:i.primaryKey),++e===l?s({result:n}):void i.continue()):s({result:n})},t.onerror=sn(i)}}))}(a),openCursor:function({trans:e,values:n,query:s,reverse:i,unique:a}){return new Promise(((o,l)=>{o=Ye(o);const{index:c,range:u}=s,d=e.objectStore(t),h=c.isPrimaryKey?d:d.index(c.name),f=i?a?"prevunique":"prev":a?"nextunique":"next",m=n||!("openKeyCursor"in h)?h.openCursor(r(u),f):h.openKeyCursor(r(u),f);m.onerror=sn(l),m.onsuccess=Ye((t=>{const n=m.result;if(!n)return void o(null);n.___id=++yn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),a=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Ye(l),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Ye(e),m.onerror=sn(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}})),o=()=>{if(m.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return m.onsuccess=Ye((e=>{m.onsuccess=o,o()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,o(),t},o(n)}),l)}))},count({query:e,trans:n}){const{index:s,range:i}=e;return new Promise(((e,a)=>{const o=n.objectStore(t),l=s.isPrimaryKey?o:o.index(s.name),c=r(i),u=c?l.count(c):l.count();u.onsuccess=Ye((t=>e(t.target.result))),u.onerror=sn(a)}))}}}(e))),l={};return o.forEach((e=>l[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!l[e])throw new Error(`Table '${e}' not found`);return l[e]},MIN_KEY:-1/0,MAX_KEY:mn(t),schema:s}}function bn({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(vn(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function _n({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=p(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get(){return this.table(n)},set(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function kn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function xn(e,t){return e._cfg.version-t._cfg.version}function An(e,t,n,r){const i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);const o=a._reject.bind(a),l=Me.transless||Me;nt((()=>{Me.trans=a,Me.transless=l,0===t?(s(i).forEach((e=>{On(n,e,i[e].primKey,i[e].indexes)})),bn(e,n),je.follow((()=>e.on.populate.fire(a))).catch(o)):function({_novip:e},t,n,r){const i=[],a=e._versions;let o=e._dbSchema=En(e,e.idbdb,r),l=!1;const c=a.filter((e=>e._cfg.version>=t));return c.forEach((a=>{i.push((()=>{const i=o,c=a._cfg.dbschema;Cn(e,i,r),Cn(e,c,r),o=e._dbSchema=c;const u=Sn(i,c);u.add.forEach((e=>{On(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>Tn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),Tn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const d=a._cfg.contentUpgrade;if(d&&a._cfg.version>t){bn(e,r),n._memoizedTables={},l=!0;let t=A(c);u.del.forEach((e=>{t[e]=i[e]})),kn(e,[e.Transaction.prototype]),_n(e,[e.Transaction.prototype],s(t),t),n.schema=t;const a=L(d);let o;a&&rt();const h=je.follow((()=>{if(o=d(n),o&&a){var e=st.bind(null,null);o.then(e,e)}}));return o&&"function"==typeof o.then?je.resolve(o):h.then((()=>o))}})),i.push((t=>{l&&St||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(a._cfg.dbschema,t),kn(e,[e.Transaction.prototype]),_n(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return i.length?je.resolve(i.shift()(n.idbtrans)).then(e):je.resolve()}().then((()=>{var e,t;t=r,s(e=o).forEach((n=>{t.db.objectStoreNames.contains(n)||On(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(o)}))}function Sn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!At)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let a;for(a in t)r[a]||e.del.push(a);for(a in r){const n=t[a],s=r[a];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function On(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>Tn(s,e))),s}function Tn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function En(e,t,n){const r={};return y(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=dn(hn(s),s||"",!1,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),a=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var o=dn(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&"string"!=typeof s,!1);a.push(o)}r[e]=fn(e,i,a)})),r}function Cn({_novip:e},t,n){const s=n.db.objectStoreNames;for(let r=0;r<s.length;++r){const i=s[r],a=n.objectStore(i);e._hasGetAll="getAll"in a;for(let e=0;e<a.indexNames.length;++e){const n=a.indexNames[e],r=a.index(n).keyPath,s="string"==typeof r?r:"["+y(r).join("+")+"]";if(t[i]){const e=t[i].idxByName[s];e&&(e.name=n,delete t[i].idxByName[s],t[i].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Mn{_parseStoresSpec(e,t){s(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return dn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),0===t)})),s=r.shift();if(s.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=fn(n,s,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;const n=t._versions,r={};let i={};return n.forEach((e=>{a(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,kn(t,[t._allTables,t,t.Transaction.prototype]),_n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(i),i),t._storeNames=s(i),this}upgrade(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||re,e),this}}function Dn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Xn(Et,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function In(e){return e&&"function"==typeof e.databases}function Nn(e){return nt((function(){return Me.letThrough=!0,e()}))}function jn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function $n(e){var t=t=>e.next(t),n=s(t),r=s((t=>e.throw(t)));function s(e){return t=>{var s=e(t),a=s.value;return s.done?a:a&&"function"==typeof a.then?a.then(n,r):i(a)?Promise.all(a).then(n,r):n(a)}}return s(t)()}function Fn(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[e,O(s),n]}function Pn(e,t,n,r,s){return je.resolve().then((()=>{const i=Me.transless||Me,a=e._createTransaction(t,n,e._dbSchema,r),o={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Pn(e,t,n,null,s)))):gt(r)}const l=L(s);let c;l&&rt();const u=je.follow((()=>{if(c=s.call(a,a),c)if(l){var e=st.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=$n(c))}),o);return(c&&"function"==typeof c.then?je.resolve(c).then((e=>a.active?e:gt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>c))).then((e=>(r&&a._resolve(),a._completion.then((()=>e))))).catch((e=>(a._reject(e),gt(e))))}))}function Ln(e,t,n){const r=i(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const Rn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function a(e,t,n){const r=wn(e),o=s[r]=s[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u={...n,isVirtual:c,keyTail:t,keyLength:l,extractKey:pn(e),unique:!c&&n.unique};return o.push(u),u.isPrimaryKey||i.push(u),l>1&&a(2===l?e[0]:e.slice(0,l-1),t+1,n),o.sort(((e,t)=>e.keyTail-t.keyTail)),u}const o=a(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[o];for(const e of r.indexes)a(e.keyPath,0,e);function l(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:Ln(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:Ln(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const c={...n,schema:{...r,primaryKey:o,indexes:i,getIndexByKeyPath:function(e){const t=s[wn(e)];return t&&t[0]}},count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;return s?n.openCursor(l(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(Ln(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(Ln(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n))):n.openCursor(t)}};return c}}}};function Wn(e,t,n,r){return n=n||{},r=r||"",s(e).forEach((s=>{if(c(t,s)){var i=e[s],a=t[s];if("object"==typeof i&&"object"==typeof a&&i&&a){const e=N(i);e!==N(a)?n[r+s]=t[s]:"Object"===e?Wn(i,a,n,r+s+"."):i!==a&&(n[r+s]=t[s])}else i!==a&&(n[r+s]=t[s])}else n[r+s]=void 0})),s(t).forEach((s=>{c(e,s)||(n[r+s]=t[s])})),n}const Vn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Me.trans,{deleting:i,creating:a,updating:o}=s.table(t).hook;switch(e.type){case"add":if(a.fire===re)break;return s._promise("readwrite",(()=>l(e)),!0);case"put":if(a.fire===re&&o.fire===re)break;return s._promise("readwrite",(()=>l(e)),!0);case"delete":if(i.fire===re)break;return s._promise("readwrite",(()=>l(e)),!0);case"deleteRange":if(i.fire===re)break;return s._promise("readwrite",(()=>function(e){return u(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Me.trans,s=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,s).then((l=>{const u=s.map(((n,s)=>{const u=l[s],d={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(d,n,u,t);else if("add"===e.type||void 0===u){const i=a.fire.call(d,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||x(e.values[s],r.keyPath,n))}else{const r=Wn(u,e.values[s]),i=o.fire.call(d,r,n,u,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{c(t,e)?t[e]=i[e]:x(t,e,i[e])}))}}return d}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],a=u[r];null==i?a.onerror&&a.onerror(t[r]):a.onsuccess&&a.onsuccess("put"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(u.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function u(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function Bn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===qt(t.keys[s],e[i])&&(r.push(n?M(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const Un={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Bn(e.keys,e.trans._cache,"clone"===e.cache);return t?je.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?M(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function qn(e){return!("from"in e)}const zn=function(e,t){if(!this){const t=new zn;return e&&"d"in e&&a(t,e),t}a(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Kn(e,t,n){const r=qt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(qn(e))return a(e,{from:t,to:n,d:1});const s=e.l,i=e.r;if(qt(n,e.from)<0)return s?Kn(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Yn(e);if(qt(t,e.to)>0)return i?Kn(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Yn(e);qt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),qt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&Zn(e,s),i&&o&&Zn(e,i)}function Zn(e,t){qn(t)||function e(t,{from:n,to:r,l:s,r:i}){Kn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Hn(e){let t=qn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&qt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||qt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Yn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const t="r"===s?"l":"r",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=Jn(n)}e.d=Jn(e)}function Jn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}u(zn.prototype,{add(e){return Zn(this,e),this},addKey(e){return Kn(this,e,e),this},addKeys(e){return e.forEach((e=>Kn(this,e,e))),this},[j](){return Hn(this)}});const Gn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new zn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const a=e.table(r),{schema:o}=a,{primaryKey:l}=o,{extractKey:c,outbound:u}=l,d={...a,mutate:e=>{const s=e.trans,l=s.mutatedParts||(s.mutatedParts={}),c=e=>{const n=`idb://${t}/${r}/${e}`;return l[n]||(l[n]=new zn)},u=c(""),d=c(":dels"),{type:h}=e;let[f,m]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return a.mutate(e).then((e=>{if(i(f)){"delete"!==h&&(f=e.results),u.addKeys(f);const t=Bn(f,p);t||"add"===h||d.addKeys(f),(t||m)&&function(e,t,n,r){t.indexes.forEach((function(t){const s=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}const o=e=>t.multiEntry&&i(e)?e.forEach((e=>s.addKey(e))):s.addKey(e);(n||r).forEach(((e,t)=>{const s=n&&a(n[t]),i=r&&a(r[t]);0!==qt(s,i)&&(null!=s&&o(s),null!=i&&o(i))}))}))}(c,o,t,m)}else if(f){const e={from:f.lower,to:f.upper};d.add(e),u.add(e)}else u.add(n),d.add(n),o.indexes.forEach((e=>c(e.name).add(n)));return e}))}},h=({query:{index:t,range:n}})=>{var r,s;return[t,new zn(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[l,new zn(e.key)],getMany:e=>[l,(new zn).addKeys(e.keys)],count:h,query:h,openCursor:h};return s(f).forEach((e=>{d[e]=function(s){const{subscr:i}=Me;if(i){const o=e=>{const n=`idb://${t}/${r}/${e}`;return i[n]||(i[n]=new zn)},l=o(""),d=o(":dels"),[h,m]=f[e](s);if(o(h.name||"").add(m),!h.isPrimaryKey){if("count"!==e){const t="query"===e&&u&&s.values&&a.query({...s,values:!1});return a[e].apply(this,arguments).then((n=>{if("query"===e){if(u&&s.values)return t.then((({result:e})=>(l.addKeys(e),n)));const e=s.values?n.result.map(c):n.result;s.values?l.addKeys(e):d.addKeys(e)}else if("openCursor"===e){const e=n,t=s.values;return e&&Object.create(e,{key:{get:()=>(d.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return d.addKey(t),t}},value:{get:()=>(t&&l.addKey(e.primaryKey),e.value)}})}return n}))}d.add(n)}}return a[e].apply(this,arguments)}})),d}}}};class Xn{constructor(e,t){this._middlewares={},this.verno=0;const n=Xn.dependencies;this._options=t={addons:Xn.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new je((e=>{s.dbReadyResolve=e})),s.openCanceller=new je(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=$t(this,"populate","blocked","versionchange","close",{ready:[de,re]}),this.on.ready.subscribe=w(this.on.ready.subscribe,(e=>(t,n)=>{Xn.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||je.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Ft(Zt.prototype,(function(e,t){this.db=i;let n=It,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,a=s.table,o=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:o!==se?o:null}}))),this.Table=function(e){return Ft(jt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:$t(null,{creating:[oe,re],reading:[ie,se],updating:[ce,re],deleting:[le,re]})}))}(this),this.Transaction=function(e){return Ft(un.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=$t(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),gt(e)}))}))}(this),this.Version=function(e){return Ft(Mn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Ft(rn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new ee.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=mn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),xt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Rn),this.use(Vn),this.use(Gn),this.use(Un),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(xn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Me.letThrough||this._vip)?e():new je(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?gt(t.dbOpenError):e));R&&(t.openCanceller._stackHolder=U()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,o=null,l=!1;const c=()=>new je(((r,a)=>{if(i(),!n)throw new ee.MissingAPI;const c=e.name,u=t.autoSchema?n.open(c):n.open(c,Math.round(10*e.verno));if(!u)throw new ee.MissingAPI;u.onerror=sn(a),u.onblocked=Ye(e._fireOnBlocked),u.onupgradeneeded=Ye((r=>{if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=an,o.abort(),u.result.close();const e=n.deleteDatabase(c);e.onsuccess=e.onerror=Ye((()=>{a(new ee.NoSuchDatabase(`Database ${c} doesnt exist`))}))}else{o.onerror=sn(a);var s=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;l=s<1,e._novip.idbdb=u.result,An(e,s/10,o,a)}}),a),u.onsuccess=Ye((()=>{o=null;const n=e._novip.idbdb=u.result,i=y(n.objectStoreNames);if(i.length>0)try{const r=n.transaction(1===(a=i).length?a[0]:a,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=En(0,t,n);e._storeNames=y(t.objectStoreNames,0),_n(e,[e._allTables],s(r),r)}(e,n,r):(Cn(e,e._dbSchema,r),function(e,t){const n=Sn(En(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),bn(e,r)}catch(e){}var a;xt.push(e),n.onversionchange=Ye((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Ye((t=>{e.on("close").fire(t)})),l&&function({indexedDB:e,IDBKeyRange:t},n){!In(e)&&n!==Et&&Dn(e,t).put({name:n}).catch(re)}(e._deps,c),r()}),a)})).catch((e=>e&&"UnknownError"===e.name&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):je.reject(e)));return je.race([r,("undefined"==typeof navigator?je.resolve():jn()).then(c)]).then((()=>(i(),t.onReadyBeingFired=[],je.resolve(Nn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(de,re);return t.onReadyBeingFired=[],je.resolve(Nn((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{o&&o.abort()}catch(e){}return r===t.openCanceller&&e._close(),gt(n)})).finally((()=>{t.openComplete=!0,a()}))}(this)}_close(){const e=this._state,t=xt.indexOf(this);if(t>=0&&xt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new je((t=>{e.dbReadyResolve=t})),e.openCanceller=new je(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new je(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Ye((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!In(e)&&n!==Et&&Dn(e,t).delete(n).catch(re)}(this._deps,this.name),n()})),e.onerror=sn(r),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return s(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Fn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Me.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const s=-1!==e.indexOf("?");let i,a;e=e.replace("!","").replace("?","");try{if(a=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Ct)i=Ct;else{if("rw"!=e&&e!=Mt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);i=Mt}if(r){if(r.mode===Ct&&i===Mt){if(!s)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):gt(e)}const o=Pn.bind(null,this,i,a,r,n);return r?r._promise(i,o,"lock"):Me.trans?ut(Me.transless,(()=>this._whenReady(o))):this._whenReady(o)}table(e){if(!c(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Qn="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class er{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Qn](){return this}}function tr(e,t){return s(t).forEach((n=>{Zn(e[n]||(e[n]=new zn),t[n])})),e}let nr;try{nr={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){nr={indexedDB:null,IDBKeyRange:null}}const rr=Xn;function sr(e){let t=ir;try{ir=!0,cn.storagemutated.fire(e)}finally{ir=t}}u(rr,{...ne,delete:e=>new rr(e,{addons:[]}).delete(),exists:e=>new rr(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return In(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==Et)))):Dn(e,t).toCollection().primaryKeys()}(rr.dependencies).then(e)}catch(e){return gt(new ee.MissingAPI)}},defineClass:()=>function(e){a(this,e)},ignoreTransaction:e=>Me.trans?ut(Me.transless,e):e(),vip:Nn,async:function(e){return function(){try{var t=$n(e.apply(this,arguments));return t&&"function"==typeof t.then?t:je.resolve(t)}catch(e){return gt(e)}}},spawn:function(e,t,n){try{var r=$n(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:je.resolve(r)}catch(e){return gt(e)}},currentTransaction:{get:()=>Me.trans||null},waitFor:function(e,t){const n=je.resolve("function"==typeof e?rr.ignoreTransaction(e):e).timeout(t||6e4);return Me.trans?Me.trans.waitFor(n):n},Promise:je,debug:{get:()=>R,set:e=>{W(e,"dexie"===e?()=>!0:Tt)}},derive:f,extend:a,props:u,override:w,Events:$t,on:cn,liveQuery:function(e){let t,n=!1;const r=new er((r=>{const i=L(e);let a=!1,o={},l={};const c={get closed(){return a},unsubscribe:()=>{a=!0,cn.storagemutated.unsubscribe(f)}};r.start&&r.start(c);let u=!1,d=!1;function h(){return s(l).some((e=>o[e]&&function(e,t){const n=Hn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Hn(e);let a=i.next(s.from),o=a.value;for(;!r.done&&!a.done;){if(qt(o.from,s.to)<=0&&qt(o.to,s.from)>=0)return!0;qt(s.from,o.from)<0?s=(r=n.next(o.from)).value:o=(a=i.next(s.from)).value}return!1}(o[e],l[e])))}const f=e=>{tr(o,e),h()&&m()},m=()=>{if(u||a)return;o={};const s={},p=function(t){i&&rt();const n=()=>nt(e,{subscr:t,trans:null}),r=Me.trans?ut(Me.transless,n):n();return i&&r.then(st,st),r}(s);d||(cn(on,f),d=!0),u=!0,Promise.resolve(p).then((e=>{n=!0,t=e,u=!1,a||(h()?m():(o={},l=s,r.next&&r.next(e)))}),(e=>{u=!1,n=!1,r.error&&r.error(e),c.unsubscribe()}))};return m(),c}));return r.hasValue=()=>n,r.getValue=()=>t,r},extendObservabilitySet:tr,getByKeyPath:k,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,(function(t){x(e,t,void 0)}))},shallowClone:A,deepClone:M,getObjectDiff:Wn,cmp:qt,asap:b,minKey:bt,addons:[],connections:xt,errnames:X,dependencies:nr,semVer:wt,version:wt.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),rr.maxKey=mn(rr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(cn(on,(e=>{if(!ir){let t;At?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ln,!0,!0,e)):t=new CustomEvent(ln,{detail:e}),ir=!0,dispatchEvent(t),ir=!1}})),addEventListener(ln,(({detail:e})=>{ir||sr(e)})));let ir=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(ln);"function"==typeof e.unref&&e.unref(),cn(on,(t=>{ir||e.postMessage(t)})),e.onmessage=e=>{e.data&&sr(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){cn(on,(e=>{try{ir||("undefined"!=typeof localStorage&&localStorage.setItem(ln,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:ln,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===ln){const t=JSON.parse(e.newValue);t&&sr(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&e.type===ln&&sr(e.changedParts)}))}je.rejectionMapper=function(e,t){if(!e||e instanceof H||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n},W(R,Tt)},96973:(e,t,n)=>{"use strict";n.d(t,{k:()=>r,x:()=>s});let r=(e,t=21)=>(n=t)=>{let r="",s=n;for(;s--;)r+=e[Math.random()*e.length|0];return r},s=(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}}},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=n,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>(({325:"locales/locale-fr-newtab-json",437:"locales/locale-tr-blocks-json",612:"locales/locale-zh-TW-popup-json",910:"locales/locale-en-popup-json",1167:"locales/locale-pt-BR-popup-json",1342:"locales/locale-vi-blocks-json",1531:"locales/locale-fr-blocks-json",1719:"locales/locale-fr-common-json",1799:"locales/locale-es-common-json",1825:"locales/locale-vi-common-json",1915:"locales/locale-zh-TW-newtab-json",2167:"locales/locale-tr-common-json",2366:"locales/locale-fr-popup-json",2466:"locales/locale-zh-TW-blocks-json",2826:"locales/locale-es-newtab-json",3282:"locales/locale-pt-BR-blocks-json",3335:"locales/locale-pt-BR-common-json",3424:"locales/locale-uk-popup-json",3835:"locales/locale-en-newtab-json",4120:"locales/locale-it-newtab-json",4433:"locales/locale-uk-newtab-json",4519:"locales/locale-it-blocks-json",5163:"locales/locale-en-common-json",5587:"locales/locale-uk-blocks-json",5601:"locales/locale-zh-newtab-json",5660:"locales/locale-uk-common-json",6140:"locales/locale-es-popup-json",6631:"locales/locale-vi-newtab-json",6652:"locales/locale-zh-TW-common-json",7174:"locales/locale-it-popup-json",7194:"locales/locale-en-blocks-json",7606:"locales/locale-es-blocks-json",7654:"locales/locale-it-common-json",7919:"locales/locale-tr-popup-json",7948:"locales/locale-tr-newtab-json",9030:"locales/locale-vi-popup-json",9381:"locales/locale-zh-common-json",9450:"locales/locale-zh-popup-json",9639:"locales/locale-zh-blocks-json",9800:"locales/locale-pt-BR-newtab-json"}[e]||e)+".bundle.js"),s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="automa:",s.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+i),o.src=n),e[n]=[r];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(r))),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{var e={3352:0};s.f.j=(t,n)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,s)=>r=e[t]=[n,s]));n.push(r[2]=i);var a=s.p+s.u(t),o=new Error;s.l(a,(n=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,o,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)l(s)}for(t&&t(n);c<a.length;c++)i=a[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkautoma=self.webpackChunkautoma||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=s(2518),t=s(79667),n=s(28875),r=s(9044),i=s(45137),a=!1;function o(e,t,n){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,n),n):(e[t]=n,n)}var l=s(14011);
/*!
 * pinia v2.3.0
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */
let c;const u=e=>c=e,d=Symbol();function h(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var f;!function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"}(f||(f={}));const m="undefined"!=typeof window,p=(()=>"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:"object"==typeof globalThis?globalThis:{HTMLElement:null})();function g(e,t,n){const r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){_(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function y(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function w(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}const v="object"==typeof navigator?navigator:{userAgent:""},b=(()=>/Macintosh/.test(v.userAgent)&&/AppleWebKit/.test(v.userAgent)&&!/Safari/.test(v.userAgent))(),_=m?"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!b?function(e,t="download",n){const r=document.createElement("a");r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?y(r.href)?g(e,t,n):(r.target="_blank",w(r)):w(r)):(r.href=URL.createObjectURL(e),setTimeout((function(){URL.revokeObjectURL(r.href)}),4e4),setTimeout((function(){w(r)}),0))}:"msSaveOrOpenBlob"in v?function(e,t="download",n){if("string"==typeof e)if(y(e))g(e,t,n);else{const t=document.createElement("a");t.href=e,t.target="_blank",setTimeout((function(){w(t)}))}else navigator.msSaveOrOpenBlob(function(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){(r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading...");if("string"==typeof e)return g(e,t,n);const s="application/octet-stream"===e.type,i=/constructor/i.test(String(p.HTMLElement))||"safari"in p,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i||b)&&"undefined"!=typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if("string"!=typeof e)throw r=null,new Error("Wrong reader.result type");e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location.assign(e),r=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);r?r.location.assign(t):location.href=t,r=null,setTimeout((function(){URL.revokeObjectURL(t)}),4e4)}}:()=>{};const{assign:k}=Object;const x=()=>{};function A(e,t,n,r=x){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};return!n&&(0,i.nZ)()&&(0,i.EB)(s),s}function S(e,...t){e.slice().forEach((e=>{e(...t)}))}const O=e=>e(),T=Symbol(),E=Symbol();function C(e,t){e instanceof Map&&t instanceof Map?t.forEach(((t,n)=>e.set(n,t))):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];h(s)&&h(r)&&e.hasOwnProperty(n)&&!(0,i.dq)(r)&&!(0,i.PG)(r)?e[n]=C(s,r):e[n]=r}return e}const M=Symbol();const{assign:D}=Object;function I(e,t,n={},r,s,c){let d;const m=D({actions:{}},n);const p={deep:!0};let g,y;let w,v=[],b=[];const _=r.state.value[e];c||_||(a?o(r.state.value,e,{}):r.state.value[e]={});(0,i.iH)({});let k;function I(t){let n;g=y=!1,"function"==typeof t?(t(r.state.value[e]),n={type:f.patchFunction,storeId:e,events:w}):(C(r.state.value[e],t),n={type:f.patchObject,payload:t,storeId:e,events:w});const s=k=Symbol();(0,l.Y3)().then((()=>{k===s&&(g=!0)})),y=!0,S(v,n,r.state.value[e])}const N=c?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{D(e,t)}))}:x;const j=(t,n="")=>{if(T in t)return t[E]=n,t;const s=function(){u(r);const n=Array.from(arguments),i=[],a=[];let o;S(b,{args:n,name:s[E],store:F,after:function(e){i.push(e)},onError:function(e){a.push(e)}});try{o=t.apply(this&&this.$id===e?this:F,n)}catch(e){throw S(a,e),e}return o instanceof Promise?o.then((e=>(S(i,e),e))).catch((e=>(S(a,e),Promise.reject(e)))):(S(i,o),o)};return s[T]=!0,s[E]=n,s},$={_p:r,$id:e,$onAction:A.bind(null,b),$patch:I,$reset:N,$subscribe(t,n={}){const s=A(v,t,n.detached,(()=>i())),i=d.run((()=>(0,l.YP)((()=>r.state.value[e]),(r=>{("sync"===n.flush?y:g)&&t({storeId:e,type:f.direct,events:w},r)}),D({},p,n))));return s},$dispose:function(){d.stop(),v=[],b=[],r._s.delete(e)}};a&&($._r=!1);const F=(0,i.qj)($);r._s.set(e,F);const P=(r._a&&r._a.runWithContext||O)((()=>r._e.run((()=>(d=(0,i.B)()).run((()=>t({action:j})))))));for(const t in P){const n=P[t];if((0,i.dq)(n)&&(R=n,!(0,i.dq)(R)||!R.effect)||(0,i.PG)(n))c||(!_||h(L=n)&&L.hasOwnProperty(M)||((0,i.dq)(n)?n.value=_[t]:C(n,_[t])),a?o(r.state.value[e],t,n):r.state.value[e][t]=n);else if("function"==typeof n){const e=j(n,t);a?o(P,t,e):P[t]=e,m.actions[t]=n}else 0}var L,R;return a?Object.keys(P).forEach((e=>{o(F,e,P[e])})):(D(F,P),D((0,i.IU)(F),P)),Object.defineProperty(F,"$state",{get:()=>r.state.value[e],set:e=>{I((t=>{D(t,e)}))}}),a&&(F._r=!0),r._p.forEach((e=>{D(F,d.run((()=>e({store:F,app:r._a,pinia:r,options:m}))))})),_&&c&&n.hydrate&&n.hydrate(F.$state,_),g=!0,y=!0,F}
/*! #__NO_SIDE_EFFECTS__ */var N=s(24839),j=s.n(N);const $=function(e,t,n){let r,s;const h="function"==typeof t;function f(e,n){const f=(0,l.EM)();(e=e||(f?(0,l.f3)(d,null):null))&&u(e),(e=c)._s.has(r)||(h?I(r,t,s,e):function(e,t,n,r){const{state:s,actions:c,getters:d}=t,h=n.state.value[e];let f;f=I(e,(function(){h||(a?o(n.state.value,e,s?s():{}):n.state.value[e]=s?s():{});const t=(0,i.BK)(n.state.value[e]);return D(t,c,Object.keys(d||{}).reduce(((t,r)=>(t[r]=(0,i.Xl)((0,l.Fl)((()=>{u(n);const t=n._s.get(e);if(!a||t._r)return d[r].call(t,t)}))),t)),{}))}),t,n,0,!0)}(r,s,e));return e._s.get(r)}return"string"==typeof e?(r=e,s=h?n:t):(s=e,r=e.id),f.$id=r,f}("user",{state:()=>({user:null,backupIds:[],retrieved:!1,hostedWorkflows:{},sharedPackages:[]}),getters:{getHostedWorkflows:e=>Object.values(e.hostedWorkflows),validateTeamAccess:e=>(t,n=[])=>{const r=e.user?.teams?.find((({id:e})=>t===e||+t===e));return!!r&&n.some((e=>r.access.includes(e)))}},actions:{async loadUser(e=!1){try{const t=await(0,r.tO)("user-profile",(async()=>{try{const e=await(0,r.a8)("/me",{auth:!0}),t=await e.json();if(!e.ok)throw new Error(e.message);return t}catch(e){return console.error(e),null}}),e),n=localStorage.getItem("username");if(!(t&&n===t.username||(sessionStorage.removeItem("shared-workflows"),sessionStorage.removeItem("user-workflows"),sessionStorage.removeItem("backup-workflows"),await j().storage.local.remove(["backupIds","lastSync","lastBackup"]),t)))return void(this.retrieved=!0);localStorage.setItem("username",t?.username);const{backupIds:s}=await j().storage.local.get("backupIds");this.backupIds=s||[],this.user=t,this.retrieved=!0,t?await j().storage.local.set({user:t}):await j().storage.local.remove("user")}catch(e){this.retrieved=!0,console.error(e)}}}});var F=s(5072),P=s(87360),L=s(50543),R=s(72112);var W=s(94046),V=s.n(W),B=s(16483),U=s.n(B);async function q(e,t){try{const n=await j().alarms.getAll();for(const t of n)t.name.includes(e)&&await j().alarms.clear(t.name);const{visitWebTriggers:r,onStartupTriggers:s,shortcuts:i}=await j().storage.local.get(["shortcuts","visitWebTriggers","onStartupTriggers"]),a=Array.isArray(i)?{}:i||{};Object.keys(a).forEach((t=>{t.includes(e)&&delete a[t]}));const o=(s||[]).filter((t=>!t.includes(e))),l=r?.filter((t=>!t.id.includes(e)));await async function(e){const{workflowQueue:t}=await j().storage.local.get("workflowQueue"),n=(t||[]).findIndex((t=>t.includes(e)));t&&-1!==n&&(t.splice(n,1),await j().storage.local.set({workflowQueue:t}))}(e),await j().storage.local.set({shortcuts:a,onStartupTriggers:o,visitWebTriggers:l});const c=j().contextMenus,u=async()=>{try{let n=[];t&&(n=t.map((async t=>{if("context-menu"!==t.type)return;const n=`trigger:${e}:${t.id}`;await c.remove(n)}))),n.push(c.remove(e)),await Promise.allSettled(n)}catch(e){}};c&&await u()}catch(e){console.error(e)}}function z(e,t){if(0===t.days.length)return null;const n=(e,t)=>{const[n,r,s]=t.split(":");return U()().day(e).hour(n).minute(r).second(s||0).valueOf()},r=t.days.reduce(((e,r)=>((0,P.Kn)(r)?r.times.forEach((t=>{e.push(n(r.id,t))})):e.push(n(r,t.time)),e)),[]).sort(),s=r.find((e=>e>Date.now()))||U()(r[0]).add(7,"day").valueOf();return j().alarms.create(e,{when:s})}async function K(e,t){try{const n=V().parseExpression(t.expression).next();await j().alarms.create(e,{when:n.getTime()})}catch(e){console.error(e)}}const Z={interval:function(e,t){const n={periodInMinutes:t.interval};return t.delay>0&&!t.fixedDelay&&(n.delayInMinutes=t.delay),j().alarms.create(e,n)},date:async function(e,t){let n=Date.now()+6e4;if(t.date){const[e,r,s]=t.time.split(":");n=U()(t.date).hour(e).minute(r).second(s||0).valueOf()}Date.now()>n||await j().alarms.create(e,{when:n})},"cron-job":K,"visit-web":async function(e,t){try{if(""===t.url.trim())return;const n=(await j().storage.local.get("visitWebTriggers"))?.visitWebTriggers||[],r=n.findIndex((t=>t.id===e)),s={id:e,url:t.url,isRegex:t.isUrlRegex,supportSPA:t.supportSPA??!1};-1===r?n.unshift(s):n[r]=s,await j().storage.local.set({visitWebTriggers:n})}catch(e){console.error(e)}},"on-startup":async function(){},"specific-day":z,"context-menu":function e(t,n){return new Promise(((r,s)=>{const i=["https://*/*","http://*/*"],a=n.contextTypes&&0!==n.contextTypes.length?n.contextTypes:["all"],o=j().contextMenus;if(!o)return void r();const l=t.includes(":")?t.split(":")[1]:t;o.create({id:l,documentUrlPatterns:i,contexts:a,title:n.contextMenuName,parentId:"automaContextMenu"},(()=>{const a=j().runtime.lastError;if(a){if(a.message.includes("automaContextMenu"))return o.create({documentUrlPatterns:i,contexts:["all"],id:"automaContextMenu",title:"Run Automa workflow"},(()=>{e(l,n).then(r).catch(s)})),void r();if(a.message.includes("Duplicate id"))return void o.remove(t).then((()=>{e(l,n).then(r).catch(s)}));s(a.message)}else o.refresh&&o.refresh(),r()}))}))},"keyboard-shortcut":async function(e,t){try{const{shortcuts:n}=await j().storage.local.get("shortcuts"),r=Array.isArray(n)?{}:n||{};r[e]=t.shortcut,await j().storage.local.set({shortcuts:r})}catch(e){console.error(e)}}};async function H(e,{data:t}){try{if(await q(e,t&&t?.triggers),t.triggers)for(const n of t.triggers){const t=Z[n.type];t&&await t(`trigger:${e}:${n.id}`,n.data)}else Z[t.type]&&await Z[t.type](e,t)}catch(e){throw console.error(e),e}}const Y=2===j().runtime.getManifest().manifest_version;async function J(e=null){let t=e;e||(t=await(0,P.fr)());await j().tabs.sendMessage(t.id,{type:"automa-element-selector"})||(Y?await j().tabs.executeScript(t.id,{allFrames:!0,runAt:"document_start",file:"./elementSelector.bundle.js"}):await j().scripting.executeScript({target:{allFrames:!0,tabId:t.id},files:["./elementSelector.bundle.js"]})),await j().tabs.update(t.id,{active:!0}),await j().windows.update(t.windowId,{focused:!0})}var G=s(79911);const X=class{static async openDashboard(e,t=!0){const n=j().runtime.getURL(`/newtab.html#${"string"==typeof e?e:""}`);try{const[e]=await j().tabs.query({url:j().runtime.getURL("/newtab.html")});if(e){const r={active:!0};t&&(r.url=n),await j().tabs.update(e.id,r),t&&await j().windows.update(e.windowId,{focused:!0,state:"maximized"})}else{const e=await j().windows.getCurrent(),r={top:0,left:0,width:Math.min(e.width,715),height:Math.min(e.height,715),url:n,type:"popup"};t&&(r.focused=!0),await j().windows.create(r)}}catch(e){throw console.error(e),e}}static async sendMessageToDashboard(e,t){const[n]=await j().tabs.query({url:j().runtime.getURL("/newtab.html")});await(0,R.Hh)({tabId:n.id});return await j().tabs.sendMessage(n.id,{type:e,data:t})}},Q=j().runtime.getURL("/offscreen.html");class ee{static#e;static get instance(){return this.#e||(this.#e=new ee),this.#e}#i;constructor(){this.#i=new L.m("offscreen"),this.on=this.#i.on}async#a(){if(e.D)return;await this.isOpened()||(await chrome.offscreen.createDocument({url:Q,reasons:[chrome.offscreen.Reason.BLOBS,chrome.offscreen.Reason.CLIPBOARD,chrome.offscreen.Reason.IFRAME_SCRIPTING],justification:"For running the workflow"}),await(0,P._v)(500))}async isOpened(){if(e.D)return!1;const t=await chrome.runtime.getContexts({documentUrls:[Q],contextTypes:["OFFSCREEN_DOCUMENT"]});return Boolean(t.length)}async sendMessage(e,t){return await this.#a(),this.#i.sendMessage(e,t)}}const te=ee;class ne{static#e;static get instance(){return this.#e||(this.#e=new ne),this.#e}#o;constructor(){this.#o=null}static flattenTeamWorkflows(e){return Object.values(Object.values(e||{})[0]||{})}static async getWorkflow(e){if(!e)return null;if(e.startsWith("team")){const{teamWorkflows:t}=await j().storage.local.get("teamWorkflows");if(!t)return null;return this.flattenTeamWorkflows(t).find((t=>t.id===e))}const{workflows:t,workflowHosts:n}=await j().storage.local.get(["workflows","workflowHosts"]);let r=Array.isArray(t)?t.find((({id:t})=>t===e)):t[e];return r||(r=Object.values(n||{}).find((({hostId:t})=>t===e)),r&&(r.id=r.hostId)),r}async#l(){e.D&&(this.#o=(await Promise.all([s.e(5768),s.e(3835),s.e(3475)]).then(s.bind(s,44647))).default.instance)}async stopExecution(t){if(e.D)return await this.#l(),void this.#o.stopExecution(t);await te.instance.sendMessage("workflow:stop",t)}async resumeExecution(t,n){if(e.D)return await this.#l(),void this.#o.resumeExecution(t,n);await te.instance.sendMessage("workflow:resume",{id:t,nextBlock:n})}async updateExecutionState(t,n){if(e.D)return await this.#l(),void this.#o.updateExecution(t,n);await te.instance.sendMessage("workflow:update",{data:n,id:t})}async executeWorkflow(t,n){if(!t.isDisabled)return e.D?(await this.#l(),void this.#o.execute(t,n)):void await te.instance.sendMessage("workflow:execute",{workflow:t,options:n})}}const re=ne;const se=class{static async visitWebTriggers(e,t,n=!1){const{visitWebTriggers:r}=await j().storage.local.get("visitWebTriggers");if(!r||0===r.length)return;const s=r.find((({url:e,isRegex:r,supportSPA:s})=>!(!e.trim()||n&&!s)&&t.match(r?new RegExp(e,"g"):e)));if(s){let t=s.id;if(s.id.startsWith("trigger")){const{1:e}=s.id.split(":");t=e}const n=await re.getWorkflow(t);n&&re.instance.executeWorkflow(n,{tabId:e})}}static async scheduleWorkflow({name:e}){try{let t=e,n=null;if(e.startsWith("trigger")){const{1:r,2:s}=e.split(":");n=s,t=r}const r=await re.getWorkflow(t);if(!r)return;let s=r.trigger;if(!s){const e="string"==typeof r.drawflow?(0,P.Rx)(r.drawflow,{}):r.drawflow,{data:t}=(0,P.No)(e)||{};s=t}if(n&&(s=s.triggers.find((e=>e.id===n)),s&&(s={...s,...s.data})),s&&"interval"===s.type&&s.fixedDelay){const{workflowStates:e}=await j().storage.local.get("workflowStates");if((e||[]).find((e=>e.workflowId===t))){let{workflowQueue:e}=await j().storage.local.get("workflowQueue");return e=e||[],void(e.includes(t)||((e=e||[]).push(t),await j().storage.local.set({workflowQueue:e})))}}else if(s&&"date"===s.type){const[e,t,n]=s.time.split(":"),r=U()(s.date).hour(e).minute(t).second(n||0);if(U()(Date.now()-6e4).isAfter(r))return}if(re.instance.executeWorkflow(r),!s)return;["specific-day","cron-job"].includes(s.type)&&("specific-day"===s.type?z(e,s):K(e,s))}catch(e){console.error(e)}}static async contextMenu({parentMenuItemId:e,menuItemId:t,frameId:n},r){try{if("automaContextMenu"!==e)return;const s=await j().tabs.sendMessage(r.id,{type:"context-element"},{frameId:n});let i=t;if(t.startsWith("trigger")){const{1:e}=t.split(":");i=e}const a=await re.getWorkflow(i);re.instance.executeWorkflow(a,{data:{variables:s}})}catch(e){console.error(e)}}static async reRegisterTriggers(e=!1){const{workflows:t,workflowHosts:n,teamWorkflows:r}=await j().storage.local.get(["workflows","workflowHosts","teamWorkflows"]),s=e=>Array.isArray(e)?e:Object.values(e),i=s(t);n&&i.push(...s(n)),r&&i.push(...re.flattenTeamWorkflows(r));for(const t of i){if(t.isDisabled)continue;let n=t.trigger;if(!n){const e="string"==typeof t.drawflow?(0,P.Rx)(t.drawflow,{}):t.drawflow;n=(0,P.No)(e)?.data}if(n)if(e&&"on-startup"===n.type)re.instance.executeWorkflow(t);else{if(e&&n.triggers)for(const e of n.triggers)"on-startup"===e.type&&await re.executeWorkflow(t);await H(t.id,{data:n})}}}};const ie=class{static onActionClicked(){X.openDashboard()}static onCommand(e){"open-dashboard"===e?X.openDashboard():"element-picker"===e&&J()}static onAlarms(e){"schedule-local-backup"!==e.name?se.scheduleWorkflow(e):async function(){try{const{localBackupSettings:e,workflows:t}=await j().storage.local.get(["localBackupSettings","workflows"]);if(!e)return;const n=Object.values(t||[]).reduce(((e,t)=>(t.isProtected||(delete t.$id,delete t.createdAt,delete t.data,delete t.isDisabled,delete t.isProtected,e.push(t)),e)),[]),r={workflows:JSON.stringify(n)};if(e.includedItems.includes("storage:table")){const e=await G.Z.tablesItems.toArray();r.storageTables=JSON.stringify(e)}if(e.includedItems.includes("storage:variables")){const e=await G.Z.variables.toArray();r.storageVariables=JSON.stringify(e)}const s=btoa(encodeURIComponent(JSON.stringify(r))),i=`${e.folderName?`${e.folderName}/`:""}${U()().format("DD-MMM-YYYY--HH-mm")}.json`;await j().downloads.download({filename:i,url:`data:application/json;base64,${s}`}),await j().storage.local.set({localBackupSettings:{...e,lastBackup:Date.now()}});const a="custom"===e.schedule?e.customSchedule:e.schedule,o=V().parseExpression(a).next();if(!o)return;await j().alarms.create("schedule-local-backup",{when:o.getTime()})}catch(e){console.error(e)}}()}static onWebNavigationCompleted({tabId:e,url:t,frameId:n}){n>0||se.visitWebTriggers(e,t)}static onContextMenuClicked(e,t){se.contextMenu(e,t)}static async onNotificationClicked(e){if(e.startsWith("logs")){const{1:t}=e.split(":"),[n]=await j().tabs.query({url:j().runtime.getURL("/newtab.html")});n||await X.openDashboard(""),await X.sendMessageToDashboard("open-logs",{logId:t})}}static onRuntimeStartup(){j().storage.local.remove("workflowStates"),(j().action||j().browserAction).setBadgeText({text:""}),se.reRegisterTriggers(!0)}static onHistoryStateUpdated({frameId:e,url:t,tabId:n}){0===e&&se.visitWebTriggers(n,t,!0)}static async onRuntimeInstalled({reason:e}){try{if("install"===e)return await j().storage.local.set({logs:[],shortcuts:{},workflows:[],collections:[],workflowState:{},isFirstTime:!0,visitWebTriggers:[]}),void await j().windows.create({type:"popup",state:"maximized",url:j().runtime.getURL("newtab.html#/welcome")});"update"===e&&await se.reRegisterTriggers()}catch(e){console.error(e)}}};te.instance.sendMessage("halo"),j().alarms.onAlarm.addListener(ie.onAlarms),j().commands.onCommand.addListener(ie.onCommand),(j().action||j().browserAction).onClicked.addListener(ie.onActionClicked),j().runtime.onStartup.addListener(ie.onRuntimeStartup),j().runtime.onInstalled.addListener(ie.onRuntimeInstalled),j().webNavigation.onCompleted.addListener(ie.onWebNavigationCompleted),j().webNavigation.onHistoryStateUpdated.addListener(ie.onHistoryStateUpdated);const ae=e.D?j().menus:j().contextMenus;ae&&ae.onClicked&&ae.onClicked.addListener(ie.onContextMenuClicked),j().notifications&&j().notifications.onClicked&&j().notifications.onClicked.addListener(ie.onNotificationClicked);const oe=new L.m("background");oe.on("browser-api",(e=>n.Z.runtimeMessageHandler(e))),oe.on(t.Z.RuntimeEvents.TOGGLE,(e=>t.Z.instance.onToggleBrowserEventListener(e))),oe.on("fetch",(async({type:e,resource:t})=>{const n=await fetch(t.url,t);if(!n.ok)throw new Error(n.statusText);let r=null;if("base64"===e){const e=await n.blob();r=await(0,F.f)(e)}else r=await n[e]();return r})),oe.on("fetch:text",(e=>fetch(e).then((e=>e.text())))),oe.on("open:dashboard",(e=>X.openDashboard(e))),oe.on("set:active-tab",(e=>j().tabs.update(e,{active:!0}))),oe.on("debugger:send-command",(({tabId:e,method:t,params:n})=>new Promise((r=>{chrome.debugger.sendCommand({tabId:e},t,n,r)})))),oe.on("debugger:type",(({tabId:e,commands:t,delay:n})=>new Promise((r=>{let s=0;!async function i(){const a=t[s];a?chrome.debugger.sendCommand({tabId:e},"Input.dispatchKeyEvent",a,(async()=>{n>0&&await(0,P._v)(n),s+=1,i()})):r()}()})))),oe.on("get:sender",((e,t)=>t)),oe.on("get:file",(e=>(0,F.Z)(e))),oe.on("get:tab-screenshot",((e,t)=>j().tabs.captureVisibleTab(t.tab.windowId,e))),oe.on("dashboard:refresh-packages",(async()=>{(await j().tabs.query({url:j().runtime.getURL("/newtab.html")})).forEach((e=>{j().tabs.sendMessage(e.id,{type:"refresh-packages"})}))})),oe.on("workflow:stop",(e=>re.instance.stopExecution(e))),oe.on("workflow:execute",(async(e,t)=>{e.includeTabId&&(e.options||(e.options={}),e.options.tabId=t.tab.id),re.instance.executeWorkflow(e,e?.options||{})})),oe.on("workflow:added",(({workflowId:e,teamId:t,workflowData:n,source:r="community"})=>{let s=`/workflows/${e}`;if("team"===r){if(!t)return;s=`/teams/${t}/workflows/${e}`}j().tabs.query({url:j().runtime.getURL("/newtab.html")}).then((i=>{if(i.length>=1){const s=i.at(-1);i.forEach((s=>{j().tabs.sendMessage(s.id,{data:{workflowId:e,teamId:t,source:r,workflowData:n},type:"workflow:added"})})),j().tabs.update(s.id,{active:!0}),j().windows.update(s.windowId,{focused:!0})}else X.openDashboard(`${s}?permission=true`)}))})),oe.on("workflow:register",(({triggerBlock:e,workflowId:t})=>{H(t,e)})),oe.on("recording:stop",(async()=>{try{await X.openDashboard("",!1),await X.sendMessageToDashboard("recording:stop")}catch(e){console.error(e)}})),oe.on("workflow:resume",(({id:e,nextBlock:t})=>{e&&re.instance.resumeExecution(e,t)})),oe.on("workflow:breakpoint",(e=>{e&&re.instance.updateExecutionState(e,{status:"breakpoint"})})),oe.on("get:user-id",(async()=>{const e=$();return{userId:e.user?.id}})),oe.on("check-csp-and-inject",(async({target:e,debugMode:t,callback:n,options:r,injectOptions:s})=>{try{const[i]=await j().scripting.executeScript({target:e,func:function(){return new Promise((e=>{const t=({srcElement:t})=>{t&&"automa-csp"===t.id&&(t.remove(),e(!0))};document.addEventListener("securitypolicyviolation",t);const n=document.createElement("script");n.id="automa-csp",n.innerText=(e=>{if(window?.trustedTypes?.createPolicy)try{const t=["default","dompurify","jSecure","forceInner"];let n=null;for(const e of t)try{n=window.trustedTypes.createPolicy(e,{createHTML:e=>e,createScript:e=>e});break}catch(e){}return n?n.createScript(e):e}catch(t){return e}return e})('console.log("...")'),setTimeout((()=>{document.removeEventListener("securitypolicyviolation",t),e(!1)}),500),document.body.appendChild(n)}))},world:"MAIN",...s});if(i.result){await new Promise((t=>{chrome.debugger.attach({tabId:e.tabId},"1.3",t)}));const s="function"==typeof n?n.toString():n;if(!s)throw new Error("Callback is missing or invalid");const i=`\n          (function() {\n            try {\n              const fn = ${s};\n              return fn();\n            } catch (err) {\n              console.error("Error in callback execution:", err);\n              return JSON.stringify({ error: err.message });\n            }\n          })()\n        `,a=await chrome.debugger.sendCommand({tabId:e.tabId},"Runtime.evaluate",{expression:i,userGesture:!0,returnByValue:!0,...r});if(!a||!a.result)throw console.error("JavaScript"),new Error("Unable to get JavaScript code");if("error"===a.result.subtype||a.exceptionDetails)throw console.error(":",a.result.description||a.exceptionDetails),new Error(a.result.description||"Error executing callback");if("string"!=typeof a.result.value)throw console.error("JavaScript"),new Error("Callback did not return JavaScript code string");const o=a.result.value,l=await chrome.debugger.sendCommand({tabId:e.tabId},"Runtime.evaluate",{expression:o,userGesture:!0,awaitPromise:!0,returnByValue:!0,...r});if(t||await chrome.debugger.detach({tabId:e.tabId}),!l||!l.result)throw console.error(""),new Error("Unable execute code");if("error"===l.result.subtype||l.exceptionDetails)throw console.error("JavaScript:",l.result.description||l.exceptionDetails),new Error(l.result.description||"Error executing JavaScript code");return{isBlocked:!0,value:l.result.value||null}}return{isBlocked:!1}}catch(e){return console.error(e),{isBlocked:!1,error:e.message}}}));oe.on("script:execute",(async({target:e,blockData:t,varName:n,preloadScripts:r})=>{try{const s=(({varName:e,refData:t,everyNewTab:n,isEval:r=!1})=>{let s=`\nconst ${e} = ${JSON.stringify(t)};\n${(0,R.XB)(e)}\nfunction automaSetVariable(name, value) {\n  const variables = ${e}.variables;\n  if (!variables) ${e}.variables = {}\n\n  ${e}.variables[name] = value;\n}\nfunction automaNextBlock(data, insert = true) {\n  if (${r}) {\n    Promise.resolve({\n      columns: {\n        data,\n        insert,\n      },\n      variables: ${e}.variables,\n    });\n  } else{\n    document.body.dispatchEvent(new CustomEvent('__automa-next-block__', { detail: { data, insert, refData: ${e} } }));\n  }\n}\nfunction automaResetTimeout() {\n  if (${r}) {\n    clearTimeout($automaTimeout);\n    $automaTimeout = setTimeout(() => {\n      resolve();\n    }, $automaTimeoutMs);\n  } else {\n    document.body.dispatchEvent(new CustomEvent('__automa-reset-timeout__'));\n  }\n}\n\nfunction automaFetchClient(id, { type, resource }) {\n  return new Promise((resolve, reject) => {\n    const validType = ['text', 'json', 'base64'];\n    if (!type || !validType.includes(type)) {\n      reject(new Error('The "type" must be "text" or "json"'));\n      return;\n    }\n\n    const eventName = \`__automa-fetch-response-\${id}__\`;\n    const eventListener = ({ detail }) => {\n      if (detail.id !== id) return;\n\n      window.removeEventListener(eventName, eventListener);\n\n      if (detail.isError) {\n        reject(new Error(detail.result));\n      } else {\n        resolve(detail.result);\n      }\n    };\n\n    window.addEventListener(eventName, eventListener);\n    window.dispatchEvent(\n      new CustomEvent(\`__automa-fetch__\`, {\n        detail: {\n          id,\n          type,\n          resource,\n        },\n      })\n    );\n  });\n}\n\nfunction automaFetch(type, resource) {\n  return automaFetchClient('${e}', { type, resource });\n}\n  `;return n&&(s=(0,R.XB)(e)),s})({varName:n,isEval:!1,refData:t.refData,everyNewTab:t.data.everyNewTab});return[{result:(await j().scripting.executeScript({target:e,func:(e,t,n)=>new Promise(((r,s)=>{try{const s=document,i=`block--${e.id}`;if(s.querySelector(`.automa-custom-js[${i}]`))return void r("");const a=s.createElement("script");a.setAttribute(i,""),a.classList.add("automa-custom-js"),a.textContent=`\n                (() => {\n\n                  // Setup context\n                  ${n}\n\n                  // Execute user code\n                  try {\n                    ${e.data.code}\n                    ${e.data.everyNewTab||e.data.code.includes("automaNextBlock")?"":"automaNextBlock()"}\n                  } catch (error) {\n                    console.error(error);\n                    ${e.data.everyNewTab?"":"automaNextBlock({ $error: true, message: error.message })"}\n                  }\n                })();\n              `;const o=t.map((e=>{const t=s.createElement("script");return t.id=e.id,t.textContent=e.script,{element:t,removeAfterExec:e.removeAfterExec}}));if(e.data.everyNewTab)r();else{let t,n,i;const l=()=>{a.remove(),o.forEach((e=>{e.removeAfterExec&&e.element.remove()})),clearTimeout(t),s.body.removeEventListener("__automa-reset-timeout__",i),s.body.removeEventListener("__automa-next-block__",n)};n=({detail:e})=>{if(l(),!e)return void r({columns:{},variables:{}});const t={insert:e.insert,data:e.data?.$error?e.data:JSON.stringify(e?.data??{})};r({columns:t,variables:e.refData?.variables})},i=()=>{clearTimeout(t),t=setTimeout(l,e.data.timeout)},s.body.addEventListener("__automa-next-block__",n),s.body.addEventListener("__automa-reset-timeout__",i),t=setTimeout(l,e.data.timeout)}o.forEach((e=>{s.head.appendChild(e.element)})),s.head.appendChild(a)}catch(e){console.error("javascriptBlockUtil error",e),s(e)}})),world:"MAIN",args:[t,r,s]}))[0].result}]}catch(e){return{result:null,msg:e.message,error:e}}})),oe.on("script:execute-callback",(async({target:e,callback:t})=>{try{const n=await j().scripting.executeScript({target:e,func:e=>{try{const t=document.createElement("script");return t.textContent=`\n          (() => {\n            ${e}\n          })()\n          `,document.body.appendChild(t),{success:!0}}catch(e){return console.error(":",e),{success:!1,error:e.message}}},world:"MAIN",args:[t]}),r=n[0]?.result;if(r&&r.success)return!0;await new Promise((t=>{chrome.debugger.attach({tabId:e.tabId},"1.3",t)}));const s=await chrome.debugger.sendCommand({tabId:e.tabId},"Runtime.evaluate",{expression:`(() => { ${t} })()`,userGesture:!0,awaitPromise:!1,returnByValue:!0});return await chrome.debugger.detach({tabId:e.tabId}),!(!s||!s.result)||(console.error("debugger API"),!1)}catch(e){return console.error("script:execute-callback:",e),!1}}));const le="automa-rename-downloaded-files",ce=e=>/(?:\.([^.]+))?$/.exec(e)[1],ue={registered:!1,changedCallbacks:new Map,pendingRequests:[],downloadDataCache:new Map,handledFilenameCallbacks:new Set,suggestCalled:new Set,downloadInfo:new Map};function de(e,t){const n=`download-${e.id}`;return ue.suggestCalled.has(n)||(ue.suggestCalled.add(n),setTimeout((async()=>{try{let r=null;if(ue.downloadDataCache.has(e.id))r=ue.downloadDataCache.get(e.id);else{const t=await j().storage.session.get(le);r=(t[le]||{})[e.id]}if(!r)return;if(!r.filename||""===r.filename.trim())return;if(!ce(r.filename)){const t=ce(e.filename);r.filename+=`.${t}`}let s="uniquify";const i=["uniquify","overwrite","prompt"];if(r.onConflict&&i.includes(r.onConflict)&&(s=r.onConflict),!r.waitForDownload){ue.downloadDataCache.delete(e.id);const t=(await j().storage.session.get(le))[le]||{};delete t[e.id],await j().storage.session.set({[le]:t})}ue.handledFilenameCallbacks.add(n);try{t({filename:r.filename,conflictAction:s})}catch(e){console.error(" failed to call suggest callback:",e)}}catch(e){console.error(" failed to handle download filename:",e)}}),0)),!0}function he(e){const{id:t,state:n,filename:r}=e;if(!t||!ue.changedCallbacks.has(t))return;ue.downloadInfo.has(t)||ue.downloadInfo.set(t,{downloadId:t,state:null,filename:null});const s=ue.downloadInfo.get(t);if(n&&(s.state=n.current),r&&(s.filename=r.current),s.state&&["complete","interrupted"].includes(s.state)){const e=ue.changedCallbacks.get(t),n={...s,filename:s.filename||(ue.downloadDataCache.has(t)?ue.downloadDataCache.get(t).filename:null)};try{e(n)}catch(e){console.error(" failed to call download changed callback:",e)}ue.changedCallbacks.delete(t),ue.downloadDataCache.delete(t),ue.downloadInfo.delete(t);const r=`download-${t}`;ue.handledFilenameCallbacks.delete(r),ue.suggestCalled.delete(r)}}async function fe(e){try{let t=!1;const n=ue.pendingRequests||[];if(n.length>0){const r=n.shift(),{downloadData:s,callback:i}=r;ue.downloadDataCache.set(e.id,s);const a=(await j().storage.session.get(le))[le]||{};a[e.id]=s,await j().storage.session.set({[le]:a}),s.waitForDownload&&i&&ue.changedCallbacks.set(e.id,i),t=!0}if(!t){const t=(await j().storage.session.get(le))[le]||{};t[e.id]&&ue.downloadDataCache.set(e.id,t[e.id])}}catch(e){console.error(" failed to handle download created:",e)}}async function me(){try{j().downloads.onCreated.hasListener(fe)&&j().downloads.onCreated.removeListener(fe),!e.D&&j().downloads.onDeterminingFilename&&j().downloads.onDeterminingFilename.hasListener(de)&&j().downloads.onDeterminingFilename.removeListener(de),j().downloads.onChanged.hasListener(he)&&j().downloads.onChanged.removeListener(he),ue.handledFilenameCallbacks.clear(),ue.suggestCalled.clear(),ue.downloadInfo.clear(),ue.registered&&(ue.registered=!1)}catch(e){console.warn(" failed to cleanup existing listeners:",e)}if(!ue.registered)try{if(!await j().permissions.contains({permissions:["downloads"]}))return void console.error(" no download permission, cannot register listeners");j().downloads.onCreated.addListener(fe),!e.D&&j().downloads.onDeterminingFilename&&j().downloads.onDeterminingFilename.addListener(de),j().downloads.onChanged.addListener(he),ue.registered=!0,ue.pendingRequests=[],ue.handledFilenameCallbacksTimestamp=Date.now()}catch(e){console.error(" failed to register download listeners:",e)}}setInterval((function(){const e=Date.now();ue.handledFilenameCallbacksTimestamp&&e-ue.handledFilenameCallbacksTimestamp>36e5&&ue.handledFilenameCallbacks.clear(),ue.handledFilenameCallbacksTimestamp=e}),36e5),oe.on("downloads:register-listeners",(async()=>(await me(),!0))),oe.on("downloads:watch-created",(async e=>{await me(),ue.pendingRequests=ue.pendingRequests||[];let t=null;return"function"==typeof e.onComplete&&(t=t=>{try{e.onComplete(t)}catch(e){console.error(" failed to call download complete callback:",e)}}),ue.pendingRequests.push({downloadData:e.downloadData,tabId:e.tabId,callback:t}),!0})),oe.on("downloads:watch-changed",(async({downloadId:e,onComplete:t})=>{if(await me(),e&&"function"==typeof t){const n=e=>{try{t(e)}catch(e){console.error(" failed to call download changed callback:",e)}};ue.changedCallbacks.set(e,n)}return!0})),j().runtime.onMessage.addListener(oe.listener)})()})();
;(function () {
  // Blocks ONLY known Automa cloud/telemetry endpoints and the Backup Workflows Google Drive endpoints.
  // This keeps normal automation (including visiting websites) working as before.
  const BLOCK_HOSTS = [
    "automa.site",
    "www.automa.site",
    "api.automa.site",
    "automa.app",
    "www.automa.app",
    "api.automa.app",
    "automa-extension.vercel.app"
  ];
  // Backup Workflows uses Drive API endpoints; we disable these calls entirely.
  const BLOCK_PATH_RE = /(\/drive\/v\d\/|\/upload\/drive\/v\d\/)/i;

  function shouldBlock(url) {
    try {
      const u = new URL(url, location.origin);
      const host = (u.hostname || "").toLowerCase();

      // Block Automa-owned cloud endpoints
      if (BLOCK_HOSTS.some(h => host === h || host.endsWith("." + h))) return true;

      // Block Drive endpoints (Backup Workflows)
      if ((host === "www.googleapis.com" || host.endsWith(".googleapis.com")) && BLOCK_PATH_RE.test(u.pathname)) {
        return true;
      }
      if (host === "drive.googleapis.com" && BLOCK_PATH_RE.test(u.pathname)) return true;

      return false;
    } catch (e) {
      return false;
    }
  }

  // fetch
  const _fetch = globalThis.fetch;
  if (typeof _fetch === "function") {
    globalThis.fetch = function (input, init) {
      const url = (typeof input === "string") ? input : (input && input.url) ? input.url : "";
      if (url && shouldBlock(url)) {
        return Promise.reject(new Error("Blocked by Syar Automation: external service disabled"));
      }
      return _fetch.apply(this, arguments);
    };
  }

  // XHR
  const XHR = globalThis.XMLHttpRequest;
  if (XHR && XHR.prototype) {
    const _open = XHR.prototype.open;
    XHR.prototype.open = function (method, url) {
      try {
        this.__syar_blocked = shouldBlock(String(url || ""));
      } catch (e) {
        this.__syar_blocked = false;
      }
      return _open.apply(this, arguments);
    };
    const _send = XHR.prototype.send;
    XHR.prototype.send = function () {
      if (this.__syar_blocked) {
        try { this.abort(); } catch (e) {}
        throw new Error("Blocked by Syar Automation: external service disabled");
      }
      return _send.apply(this, arguments);
    };
  }
})();
