(()=>{var e={81843:function(e,r){var t,s,n;!function(a,i){"use strict";"object"==typeof e.exports?e.exports=i():(s=[],void 0===(n="function"==typeof(t=i)?t.apply(r,s):t)||(e.exports=n))}(0,(function(){"use strict";var e=Object.prototype.toString;function r(e,r){return null!=e&&Object.prototype.hasOwnProperty.call(e,r)}function t(e){if(!e)return!0;if(n(e)&&0===e.length)return!0;if("string"!=typeof e){for(var t in e)if(r(e,t))return!1;return!0}return!1}function s(r){return e.call(r)}var n=Array.isArray||function(r){return"[object Array]"===e.call(r)};function a(e){var r=parseInt(e);return r.toString()===e?r:e}function i(e){var i,o,g=function(e){return Object.keys(g).reduce((function(r,t){return"create"===t||"function"==typeof g[t]&&(r[t]=g[t].bind(g,e)),r}),{})};function m(e,r){if(i(e,r))return e[r]}function l(e,r,t,s){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if("string"==typeof r)return l(e,r.split(".").map(a),t,s);var n=r[0],i=o(e,n);return 1===r.length?(void 0!==i&&s||(e[n]=t),i):(void 0===i&&("number"==typeof r[1]?e[n]=[]:e[n]={}),l(e[n],r.slice(1),t,s))}return i=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,t){return"number"==typeof t&&Array.isArray(e)||r(e,t)},o=e.includeInheritedProps?function(e,r){"string"!=typeof r&&"number"!=typeof r&&(r=String(r));var t=m(e,r);if("__proto__"===r||"prototype"===r||"constructor"===r&&"function"==typeof t)throw new Error("For security reasons, object's magic properties cannot be set");return t}:function(e,r){return m(e,r)},g.has=function(t,s){if("number"==typeof s?s=[s]:"string"==typeof s&&(s=s.split(".")),!s||0===s.length)return!!t;for(var i=0;i<s.length;i++){var o=a(s[i]);if(!("number"==typeof o&&n(t)&&o<t.length||(e.includeInheritedProps?o in Object(t):r(t,o))))return!1;t=t[o]}return!0},g.ensureExists=function(e,r,t){return l(e,r,t,!0)},g.set=function(e,r,t,s){return l(e,r,t,s)},g.insert=function(e,r,t,s){var a=g.get(e,r);s=~~s,n(a)||(a=[],g.set(e,r,a)),a.splice(s,0,t)},g.empty=function(e,r){var a,o;if(!t(r)&&(null!=e&&(a=g.get(e,r)))){if("string"==typeof a)return g.set(e,r,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===s(e)}(a))return g.set(e,r,!1);if("number"==typeof a)return g.set(e,r,0);if(n(a))a.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===s(e)}(a))return g.set(e,r,null);for(o in a)i(a,o)&&delete a[o]}}},g.push=function(e,r){var t=g.get(e,r);n(t)||(t=[],g.set(e,r,t)),t.push.apply(t,Array.prototype.slice.call(arguments,2))},g.coalesce=function(e,r,t){for(var s,n=0,a=r.length;n<a;n++)if(void 0!==(s=g.get(e,r[n])))return s;return t},g.get=function(e,r,t){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return t;if("string"==typeof r)return g.get(e,r.split("."),t);var s=a(r[0]),n=o(e,s);return void 0===n?t:1===r.length?n:g.get(e[s],r.slice(1),t)},g.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return g.del(e,r.split("."));var s=a(r[0]);return o(e,s),i(e,s)?1!==r.length?g.del(e[s],r.slice(1)):(n(e)?e.splice(s,1):delete e[s],e):e},g}var o=i();return o.create=i,o.withInheritedProps=i({includeInheritedProps:!0}),o}))},24839:function(e,r){var t,s,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=[e],t=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const r="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=e=>e&&"object"==typeof e&&"function"==typeof e.then,a=(r,t)=>(...s)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||s.length<=1&&!1!==t.singleCallbackArg?r.resolve(s[0]):r.resolve(s)},i=e=>1==e?"argument":"arguments",o=(e,r)=>function(t,...s){if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((n,i)=>{if(r.fallbackToNoCallback)try{t[e](...s,a({resolve:n,reject:i},r))}catch(a){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),t[e](...s),r.fallbackToNoCallback=!1,r.noCallback=!0,n()}else r.noCallback?(t[e](...s),n()):t[e](...s,a({resolve:n,reject:i},r))}))},g=(e,r,t)=>new Proxy(r,{apply:(r,s,n)=>t.call(s,e,...n)});let m=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,r={},t={})=>{let s=Object.create(null),n={has:(r,t)=>t in e||t in s,get(n,a,i){if(a in s)return s[a];if(!(a in e))return;let c=e[a];if("function"==typeof c)if("function"==typeof r[a])c=g(e,e[a],r[a]);else if(m(t,a)){let r=o(a,t[a]);c=g(e,e[a],r)}else c=c.bind(e);else if("object"==typeof c&&null!==c&&(m(r,a)||m(t,a)))c=l(c,r[a],t[a]);else{if(!m(t,"*"))return Object.defineProperty(s,a,{configurable:!0,enumerable:!0,get:()=>e[a],set(r){e[a]=r}}),c;c=l(c,r[a],t["*"])}return s[a]=c,c},set:(r,t,n,a)=>(t in s?s[t]=n:e[t]=n,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(s,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(s,r)},a=Object.create(e);return new Proxy(a,n)},c=e=>({addListener(r,t,...s){r.addListener(e.get(t),...s)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),A=new s((e=>"function"!=typeof e?e:function(r){const t=l(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),d=new s((e=>"function"!=typeof e?e:function(r,t,s){let a,i,o=!1,g=new Promise((e=>{a=function(r){o=!0,e(r)}}));try{i=e(r,t,a)}catch(e){i=Promise.reject(e)}const m=!0!==i&&n(i);if(!0!==i&&!m&&!o)return!1;const l=e=>{e.then((e=>{s(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(m?i:g),!0})),p=({reject:t,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===r?s():t(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?t(new Error(n.message)):s(n)},u=(e,r,t,...s)=>{if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,r)=>{const n=p.bind(null,{resolve:e,reject:r});s.push(n),t.sendMessage(...s)}))},h={devtools:{network:{onRequestFinished:c(A)}},runtime:{onMessage:c(d),onMessageExternal:c(d),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},l(e,h,t)};e.exports=t(chrome)}},void 0===(n="function"==typeof t?t.apply(r,s):t)||(e.exports=n)}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var a=r[s]={exports:{}};return e[s].call(a.exports,a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=t(24839),r=t.n(e);const s=(e,r)=>e?`${e}--${r}`:r;function n(e="",t={},n=""){let a={name:s(n,e),data:t};return r().runtime.sendMessage(a)}class a{static sendMessage=n;constructor(e=""){this.listeners={},this.prefix=e,this.listener=this.listener.bind(this)}on(e,r){return Object.hasOwn(this.listeners,e)?(console.error(`You already added ${e}`),this.on):(this.listeners[s(this.prefix,e)]=r,this.on)}listener(e,r){try{false;const t=this.listeners[e.name],s=t&&t.call({message:e,sender:r},e.data,r),n=e.name.split("--")[0];return n&&n!==e.name?n===this.prefix?s?s instanceof Promise?s:Promise.resolve(s):Promise.resolve():void 0:s?s instanceof Promise?s:Promise.resolve(s):Promise.resolve()}catch(e){return Promise.reject(new Error(`Unhandled Background Error: ${String(e)}`))}}sendMessage(e,r){return n(e,r,this.prefix)}}function i(e){if("function"==typeof e)return{__type:"function",__value:e.toString()};if(Array.isArray(e))return e.map((e=>i(e)));if(e&&"object"==typeof e){const r={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=i(e[t]));return r}return e}function o(e){if(e&&"object"==typeof e){if("function"===e.__type)return new Function("return "+e.__value)();if(Array.isArray(e))return e.map((e=>o(e)));const r={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=o(e[t]));return r}return e}var g=t(81843),m=t.n(g);const l=[{api:()=>r().tabs.get,path:"tabs.get"},{api:()=>chrome.tabs.group,path:"tabs.group"},{api:()=>r().tabs.query,path:"tabs.query"},{api:()=>r().tabs.update,path:"tabs.update"},{api:()=>r().tabs.create,path:"tabs.create"},{api:()=>r().tabs.remove,path:"tabs.remove"},{api:()=>r().tabs.reload,path:"tabs.reload"},{api:()=>r().tabs.goBack,path:"tabs.goBack"},{api:()=>r().tabs.setZoom,path:"tabs.setZoom"},{api:()=>r().tabs.goForward,path:"tabs.goForward"},{api:()=>r().tabs.captureTab,path:"tabs.captureTab"},{api:()=>r().tabs.captureVisibleTab,path:"tabs.captureVisibleTab"},{api:()=>r().tabs.sendMessage,path:"tabs.sendMessage"},{isEvent:!0,api:()=>r().tabs.onRemoved,path:"tabs.onRemoved"},{isEvent:!0,path:"webNavigation.onCreatedNavigationTarget",api:()=>r().webNavigation.onCreatedNavigationTarget},{isEvent:!0,path:"webNavigation.onErrorOccurred",api:()=>r().webNavigation.onErrorOccurred},{path:"webNavigation.getAllFrames",api:()=>r().webNavigation.getAllFrames},{api:()=>r().windows.get,path:"windows.get"},{api:()=>r().windows.update,path:"windows.update"},{api:()=>r().windows.create,path:"windows.create"},{api:()=>r().windows.getAll,path:"windows.getAll"},{api:()=>r().windows.remove,path:"windows.remove"},{api:()=>r().windows.getCurrent,path:"windows.getCurrent"},{isEvent:!0,path:"windows.onRemoved",api:()=>r().windows.onRemoved},{isEvent:!0,path:"storage.onChanged",api:()=>r().storage.onChanged},{api:()=>r().storage.local.get,path:"storage.local.get"},{api:()=>r().storage.local.set,path:"storage.local.set"},{api:()=>r().storage.local.remove,path:"storage.local.remove"},{api:()=>r().proxy.settings.clear,path:"proxy.settings.clear"},{api:()=>r().proxy.settings.set,path:"proxy.settings.set"},{isEvent:!0,path:"debugger.onEvent",api:()=>chrome.debugger.onEvent},{path:"debugger.detach",api:()=>chrome.debugger.detach},{path:"debugger.attach",api:()=>chrome.debugger.attach},{path:"debugger.sendCommand",api:()=>chrome.debugger.sendCommand},{path:"permissions.contains",api:()=>r().permissions.contains},{path:"permissions.request",api:()=>r().permissions.request},{path:"cookies.get",api:()=>r().cookies?.get},{path:"cookies.getAll",api:()=>r().cookies?.getAll},{path:"cookies.remove",api:()=>r().cookies?.remove},{path:"cookies.set",api:()=>r().cookies?.set},{path:"downloads.search",api:()=>r().downloads?.search},{path:"downloads.download",api:()=>r().downloads?.download},{isEvent:!0,path:"downloads.onCreated",api:()=>r().downloads?.onCreated},{isEvent:!0,path:"downloads.onDeterminingFilename",api:()=>chrome.downloads?.onDeterminingFilename},{isEvent:!0,path:"downloads.onChanged",api:()=>r().downloads?.onChanged},{path:"browserAction.setBadgeText",api:()=>(r().action||r().browserAction).setBadgeText},{path:"notifications.create",api:()=>r().notifications?.create},{path:"extension.isAllowedFileSchemeAccess",api:()=>r().extension.isAllowedFileSchemeAccess}],c={ON_EVENT:"browser-api:on-browser-event",TOGGLE:"browser-api:toggle-browser-event-listener"};function A(e,...r){a.sendMessage(c.ON_EVENT,{name:e,args:r},"offscreen")}class d{static#e;static get instance(){return this.#e||(this.#e=new d),this.#e}static RuntimeEvents=c;#r;#t;#s;#n;constructor(){this.#r={},this.#n={},this.#t={},this.#s=new Set}createEventListener(e){if(this.#t[e])return this.#t[e];this.#r[e]||(this.#r[e]=[]);return this.#t[e]={addListener:r=>{this.#r[e].push(r),this.#s.has(e)||a.sendMessage(c.TOGGLE,{name:e,type:"add"},"background").then((()=>{this.#s.add(e)}))},hasListener:r=>this.#r[e].includes(r),hasListeners:()=>this.#r[e].length>0,removeListener:r=>{const t=this.#r[e].indexOf(r);-1!==t&&(this.#r[e].splice(t,1),this.#r[e].length>0||(a.sendMessage(c.TOGGLE,{name:e,type:"remove"},"background"),delete this.#t[e]))}},this.#t[e]}onBrowserEventListener(e){e.name&&this.#r[e.name]&&this.#r[e.name].forEach((r=>r(...e.args)))}onToggleBrowserEventListener({name:e,type:r}){const t="add"===r;if(t&&this.#n[e])return;if(!t&&!this.#n[e])return;const s=l.find((r=>r.path===e&&r.isEvent))?.api();if(!l)return;const n=t?"addListener":"removeListener",a=t?A.bind(null,e):this.#n[e];t&&(this.#n[e]=a),s[n](a)}}const p=d,u="tabs"in r();function h(e,...r){const t=i(r);return a.sendMessage("browser-api",{name:e,args:t},"background")}class f{static async isContentScriptInjected(e,t){if(!u)return h("contentScript.isContentScriptInjected",...arguments);try{return await r().tabs.sendMessage(e.tabId,{type:t||"content-script-exists"},{frameId:e.allFrames?void 0:e.frameId}),!0}catch(e){return!1}}static async inject({file:e,target:t,injectImmediately:s,waitUntilInjected:n}){if(!u)return h("contentScript.inject",...arguments);const a=Object.hasOwn(t,"frameId")&&!t.allFrames?t.frameId:void 0;if(r().tabs.injectContentScript?await r().tabs.executeScript(t.tabId,{file:e,frameId:a,allFrames:t.allFrames}):await r().scripting.executeScript({target:{tabId:t.tabId,allFrames:t.allFrames,frameIds:"number"==typeof a?[a]:void 0},files:[e],injectImmediately:s}),!n)return!0;const i=n.maxTry??3,o=n.timeoutMs??1e3;let g=0;return new Promise((e=>{const r=async()=>{try{if(g>i)return void e(!1);g+=1;if(await f.isContentScriptInjected(t,n.messageId))return void e(!0);setTimeout((()=>r()),o)}catch(e){console.error(e),setTimeout((()=>r()),o)}};r()}))}static async isInjected({tabId:e,allFrames:t,frameId:s},n){if(!u)return h("contentScript.isInjected",...arguments);try{return await r().tabs.sendMessage(e,{type:n||"content-script-exists"},{frameId:t?void 0:s}),!0}catch(e){return!1}}}class x{static runtimeMessageHandler({args:e,name:r}){const t=o(e),s=m().get(this,r);if(!s)throw new Error(`"${r}" is invalid method`);return t?s(...t):s()}static runtime=r().runtime;static tabs;static proxy;static storage;static windows;static debugger;static webNavigation;static permissions;static downloads;static notifications;static browserAction;static extension;static contentScript=f}l.forEach((e=>{let r;r=u?e.api():e.isEvent?p.instance.createEventListener(e.path):(...r)=>h(e.path,...r),m().set(x,e.path,r)}));function b(e,r){try{return JSON.parse(e)}catch(e){return r}}function v(e){document.body.innerText=e}(async()=>{try{const{workflowId:e,variables:t}=function(){let e=window.location.hash.slice(1);e.startsWith("/")||(e=`/${e}`);const{pathname:r,searchParams:t}=new URL(window.location.origin+e),s={},{1:n}=r.split("/");return t.forEach(((e,r)=>{const t=b(decodeURIComponent(r),"##_empty");"##_empty"!==t&&(s[e]=t)})),{workflowId:n??"",variables:s}}();if(!e)return void v("Invalid path");const{workflows:s}=await r().storage.local.get("workflows");let a=s[e];if(!a&&Array.isArray(s)&&(a=s.find((r=>r.id===e))),!a)return void v("Workflow not found");const i=Object.keys(t).length>0;v("Executing workflow"),n("workflow:execute",{...a,options:{checkParam:!i,data:{variables:t}}},"background").then((()=>{setTimeout(window.close,1e3)}))}catch(e){console.error(e)}})()})()})();